/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var e={186:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(81),i=n.n(r),s=n(645),o=n.n(s)()(i());o.push([e.id,'/* Default styles for screens wider than 1023px */\r\n* {\r\n  font-family: "Inter", sans-serif;\r\n}\r\n\r\nform {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 0% 30%;\r\n  width: 50%;\r\n  margin-left: 10%;\r\n  margin-bottom: 2%;\r\n}\r\n\r\n.input-container {\r\n  margin-bottom: 20px;\r\n}\r\n\r\nlabel {\r\n  color: white;\r\n  font-weight: 200;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-around;\r\n}\r\n\r\ninput {\r\n  border: none;\r\n  border-bottom: 1px solid #fff;\r\n  background: transparent;\r\n  color: #fff;\r\n  opacity: 0.3;\r\n  width: 100%;\r\n  padding: 8px;\r\n  margin: 8px 0;\r\n}\r\n\r\ninput::placeholder {\r\n  color: #ffffff;\r\n  opacity: 0.5;\r\n  font-size: 20px;\r\n}\r\n\r\nbutton {\r\n  padding: 40px 5px;\r\n  width: 40%;\r\n  font-size: 15px;\r\n  text-decoration: none;\r\n  border: none;\r\n  border-radius: 10px;\r\n  color: black;\r\n  background-color: white;\r\n  margin-left: 1%;\r\n  margin-bottom: 1%;\r\n}\r\n\r\n.change-password-button {\r\n  background-color: #fec2dc;\r\n  font-weight: 600;\r\n}\r\n\r\n.cancel-button {\r\n  background-color: #ffffff16;\r\n  color: #ffffff;\r\n}\r\n\r\nh1 {\r\n  color: white;\r\n  margin-left: 40%;\r\n  margin-bottom: 3%;\r\n}\r\n\r\np {\r\n  color: white;\r\n  margin-top: 0%;\r\n  font-size: 18px;\r\n  font-weight: 200;\r\n}\r\n\r\n.usernamedescr {\r\n  color: white;\r\n  margin-top: -2%;\r\n  font-size: 18px;\r\n  font-weight: 200;\r\n}\r\n\r\na {\r\n  color: #ffffff;\r\n}\r\n\r\n.button-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n/* Medium screen styles (min-width: 768px) */\r\n@media screen and (min-width: 768px) {\r\n  form {\r\n    padding: 0% 15%;\r\n  }\r\n  input::placeholder {\r\n    font-size: 18px;\r\n  }\r\n\r\n  h1 {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n\r\n  button {\r\n    padding: 30px;\r\n    width: 50%;\r\n    font-size: 15px;\r\n    text-decoration: none;\r\n    border: none;\r\n    border-radius: 10px;\r\n    color: black;\r\n    background-color: white;\r\n    margin-left: 1%;\r\n    margin-bottom: 1%;\r\n  }\r\n\r\n  .change-password-button {\r\n    background-color: #fec2dc;\r\n  }\r\n  .cancel-button {\r\n    background-color: #ffffff16;\r\n    color: #ffffff;\r\n  }\r\n}\r\n\r\n/* Small screen styles (max-width: 767px) */\r\n@media screen and (max-width: 767px) {\r\n  form {\r\n    padding: 0% 10%;\r\n  }\r\n\r\n  h1 {\r\n    margin-left: 20%;\r\n  }\r\n\r\n  input::placeholder {\r\n    font-size: 16px;\r\n  }\r\n\r\n  button {\r\n    padding: 30px;\r\n    width: 70%;\r\n    font-size: 15px;\r\n    text-decoration: none;\r\n    border: none;\r\n    border-radius: 10px;\r\n    color: black;\r\n    background-color: white;\r\n    margin-left: 1%;\r\n    margin-bottom: 2%;\r\n  }\r\n\r\n  .button-container {\r\n    align-items: center;\r\n  }\r\n}\r\n',""]);const a=o},725:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(81),i=n.n(r),s=n(645),o=n.n(s)()(i());o.push([e.id,'/* Default styles for screens wider than 1023px */\r\n* {\r\n  font-family: "Inter", sans-serif;\r\n}\r\n\r\nform {\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin: 0% 35%;\r\n}\r\n\r\nlabel {\r\n  color: white;\r\n  font-weight: 200;\r\n}\r\n\r\ninput {\r\n  border: none;\r\n  border-bottom: 1px solid #fff;\r\n  background: transparent;\r\n  color: #fff;\r\n  opacity: 0.2;\r\n  padding: 8px;\r\n  margin: 8px 0;\r\n}\r\n\r\ninput::placeholder {\r\n  color: #ffffff;\r\n  opacity: 0.5;\r\n  font-size: 15px;\r\n}\r\n\r\nbutton {\r\n  padding: 20px 5px;\r\n  width: 30%;\r\n  font-size: 15px;\r\n  text-decoration: none;\r\n  border: none;\r\n  border-radius: 10px;\r\n  color: black;\r\n  background-color: white;\r\n  margin-bottom: 1%;\r\n}\r\n\r\n.button-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.cancel-button {\r\n  background-color: #ffffff16;\r\n  color: #ffffff;\r\n  margin-bottom: 40%;\r\n}\r\n\r\nh1 {\r\n  color: white;\r\n  margin-left: 35%;\r\n  margin-bottom: 3%;\r\n  margin-top: 10%;\r\n}\r\n\r\np {\r\n  color: white;\r\n  margin: 1% 35%;\r\n  margin-bottom: 3%;\r\n  font-size: 18px;\r\n  font-weight: 200;\r\n}\r\n\r\na {\r\n  color: #ffffff;\r\n}\r\n\r\n/* Medium screen styles (min-width: 768px, max-width: 1023px) */\r\n@media screen and (min-width: 768px) and (max-width: 1023px) {\r\n  /* Add your medium screen styles here */\r\n  form {\r\n    margin: 0% 20%;\r\n  }\r\n  h1 {\r\n    margin-left: 30%;\r\n  }\r\n  p {\r\n    margin: 1% 20%;\r\n  }\r\n\r\n  button {\r\n    padding: 30px 5px;\r\n    width: 60%;\r\n    font-size: 15px;\r\n    text-decoration: none;\r\n    border: none;\r\n    border-radius: 10px;\r\n    color: black;\r\n    background-color: white;\r\n    margin-bottom: 1%;\r\n  }\r\n}\r\n\r\n/* Small screen styles (max-width: 767px) */\r\n@media screen and (max-width: 767px) {\r\n  /* Add your small screen styles here */\r\n  form {\r\n    margin: 0% 10%;\r\n  }\r\n  h1 {\r\n    margin-left: 10%;\r\n  }\r\n  p {\r\n    margin: 1% 10%;\r\n  }\r\n\r\n  button {\r\n    padding: 20px 5px;\r\n    width: 80%;\r\n    font-size: 15px;\r\n    text-decoration: none;\r\n    border: none;\r\n    border-radius: 10px;\r\n    color: black;\r\n    background-color: white;\r\n    margin-bottom: 1%;\r\n  }\r\n}\r\n',""]);const a=o},367:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(81),i=n.n(r),s=n(645),o=n.n(s)()(i());o.push([e.id,'/* Default styles for screens wider than 1023px */\r\n* {\r\n  font-family: "Inter", sans-serif;\r\n}\r\n\r\nform {\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin: 0% 35%;\r\n}\r\n\r\nlabel {\r\n  color: white;\r\n  font-weight: 200;\r\n}\r\n\r\ninput {\r\n  border: none;\r\n  border-bottom: 1px solid #fff;\r\n  background: transparent;\r\n  color: #fff;\r\n  opacity: 0.2;\r\n  padding: 8px;\r\n  margin: 8px 0;\r\n}\r\n\r\ninput::placeholder {\r\n  color: #ffffff;\r\n  opacity: 0.5;\r\n  font-size: 15px;\r\n}\r\n\r\nbutton {\r\n  padding: 20px 5px;\r\n  width: 100%;\r\n  font-size: 15px;\r\n  text-decoration: none;\r\n  border: none;\r\n  border-radius: 10px;\r\n  color: black;\r\n  background-color: white;\r\n  margin-bottom: 3%;\r\n}\r\n\r\nh1 {\r\n  color: white;\r\n  margin-left: 40%;\r\n  margin-bottom: 3%;\r\n  margin-top: 2%;\r\n}\r\n\r\np {\r\n  color: white;\r\n  margin: 1% 35%;\r\n  margin-bottom: 3%;\r\n  font-size: 18px;\r\n  font-weight: 200;\r\n}\r\n\r\n/* Medium screen styles (min-width: 768px, max-width: 1023px) */\r\n@media (min-width: 768px) and (max-width: 1023px) {\r\n  form {\r\n    margin: 0% 20%;\r\n  }\r\n  h1 {\r\n    margin-left: 30%;\r\n  }\r\n}\r\n\r\n/* Small screen styles (max-width: 767px) */\r\n@media (max-width: 767px) {\r\n  /* Add your small screen styles here */\r\n  form {\r\n    margin: 0% 10%;\r\n  }\r\n  h1 {\r\n    margin-left: 10%;\r\n  }\r\n  p {\r\n    margin: 1% 10%;\r\n  }\r\n}\r\n',""]);const a=o},890:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(81),i=n.n(r),s=n(645),o=n.n(s)()(i());o.push([e.id,"/* Estilos para el contenedor de fotos */\r\n.grid-container {\r\n  display: grid;\r\n  grid-template-columns: repeat(3, 1fr);\r\n  gap: 4px;\r\n  margin: 0% 2%;\r\n}\r\n\r\n/* Estilos para cada foto */\r\n.photo-container {\r\n  width: 100%;\r\n  height: 0;\r\n  padding-bottom: 100%; /* Hace que la altura sea igual al ancho para que sea cuadrada */\r\n  position: relative;\r\n  overflow: hidden;\r\n  border-radius: 5%;\r\n  margin: 2px;\r\n}\r\n\r\n.photo-container img {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover; /* Ajusta la imagen para llenar el cuadro sin distorsionar */\r\n}\r\n",""]);const a=o},225:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(81),i=n.n(r),s=n(645),o=n.n(s)()(i());o.push([e.id,'/* Default styles for screens wider than 1023px */\r\n* {\r\n  font-family: "Inter", sans-serif;\r\n}\r\n\r\n.linea-blanca {\r\n  border: none;\r\n  border-top: 0.5px solid #fff;\r\n  width: 80%;\r\n  margin-left: 10%;\r\n  margin-right: 10%;\r\n}\r\n\r\nsection {\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin: 0% 10%;\r\n}\r\n\r\n.left {\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n\r\np {\r\n  color: white;\r\n}\r\n\r\na {\r\n  color: white;\r\n}\r\n\r\n/* Medium screen styles (min-width: 768px, max-width: 1023px) */\r\n@media screen and (min-width: 768px) and (max-width: 1023px) {\r\n  /* Add your medium screen styles here */\r\n  .linea-blanca {\r\n    width: 90%;\r\n    margin-left: 5%;\r\n    margin-right: 5%;\r\n  }\r\n\r\n  section {\r\n    margin: 0% 5%;\r\n  }\r\n}\r\n\r\n/* Small screen styles (max-width: 767px) */\r\n@media screen and (max-width: 767px) {\r\n  /* Add your small screen styles here */\r\n  .linea-blanca {\r\n    width: 95%;\r\n    margin-left: 2%;\r\n    margin-right: 2%;\r\n  }\r\n\r\n  section {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    margin: 0% 5%;\r\n  }\r\n\r\n  p {\r\n    margin: 0%;\r\n  }\r\n}\r\n',""]);const a=o},913:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(81),i=n.n(r),s=n(645),o=n.n(s)()(i());o.push([e.id,'.body-card {\r\n  font-family: "Inter", sans-serif;\r\n  font-size: 13px;\r\n  width: 50%;\r\n  background-color: #ffffff;\r\n  height: 20%;\r\n  border-radius: 20px;\r\n  padding: 2%;\r\n  margin: 1%;\r\n}\r\n\r\n.post-img {\r\n  width: 100%;\r\n  border-radius: 3%;\r\n}\r\n\r\nspan {\r\n  font-size: 15px;\r\n}\r\n\r\np {\r\n  font-size: 15px;\r\n  margin: 2% 0%;\r\n}\r\n\r\n.botton-info {\r\n  padding: 0% 0% 3% 3%;\r\n}\r\n\r\n.inputComment {\r\n  text-decoration: none;\r\n  color: #969696;\r\n  border: none;\r\n}\r\n\r\n.icon {\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  padding: 2%;\r\n}\r\n\r\n.icon img {\r\n  width: 6%;\r\n  margin: 0%;\r\n}\r\n\r\n.right img {\r\n  width: 6%;\r\n  margin: 0%;\r\n}\r\n\r\n.buttoncommet{\r\n  background: white;\r\n  border-radius: 50%;\r\n  border: none;\r\n  color: white;\r\n  margin-left: 5px;\r\n}\r\n\r\n/* Estilo para el modal */\r\n.modal {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: rgba(0, 0, 0, 0.8); \r\n  z-index: 1000; \r\n  cursor: pointer; \r\n}\r\n\r\n\r\n.modal img {\r\n  max-width: 90%; \r\n  max-height: 90%; \r\n  object-fit: contain; \r\n  cursor: pointer; \r\n  border-radius: 10px;\r\n}\r\n\r\n\r\n.modal img:hover {\r\n  cursor: zoom-out; \r\n}\r\n\r\n\r\n/* Responsive styles for medium screens (min-width: 768px) and (max-width: 1023px) */\r\n@media (min-width: 768px) and (max-width: 1023px) {\r\n  .body-card {\r\n    width: 90%;\r\n    margin: 2%;\r\n    padding: 2%;\r\n  }\r\n\r\n  .icon {\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-between;\r\n    padding: 2%;\r\n  }\r\n\r\n  .icon img {\r\n    width: 6%;\r\n    margin: 0%;\r\n  }\r\n\r\n  .right img {\r\n    width: 7%;\r\n    margin: 0%;\r\n  }\r\n  /* Adjust other styles as needed for medium screens */\r\n}\r\n\r\n/* Responsive styles for smaller screens (max-width: 767px) */\r\n@media (max-width: 767px) {\r\n  .body-card {\r\n    width: 90%; /* Full width on smaller screens */\r\n    height: auto; /* Auto height to adjust based on content */\r\n    margin: 2%; /* Remove margin for full width */\r\n    padding: 2%; /* Adjust padding as needed */\r\n  }\r\n\r\n  /* Adjust other styles as needed for smaller screens */\r\n  span,\r\n  p {\r\n    font-size: 15px; /* Slightly smaller font size */\r\n  }\r\n}\r\n',""]);const a=o},352:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(81),i=n.n(r),s=n(645),o=n.n(s)()(i());o.push([e.id,"* {\r\n\tpadding: 0;\r\n\tmargin: 0;\r\n}\r\n\r\n.menu-bar {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\tpadding: 3rem;\r\n\tbackground-color: #181818;\r\n}\r\n\r\n.icons img {\r\n\theight: 40px;\r\n\tmargin-right: 1rem;\r\n}\r\n\r\n.logo img {\r\n\theight: 35px;\r\n\tpadding-left: 7rem;\r\n}\r\n\r\n.search-box {\r\n\tflex-grow: 1;\r\n\theight: 35px;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n}\r\n\r\n.search-box-input {\r\n\twidth: 25%;\r\n\tpadding: 1rem 2rem;\r\n\ttext-align: center;\r\n\tbackground-color: #2f60e9;\r\n\tcolor: white;\r\n\tborder-radius: 20px;\r\n\tborder: none;\r\n\toutline: none;\r\n}\r\n\r\n.icons {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\tmargin-right: 9rem;\r\n\twidth: 6rem;\r\n}\r\n\r\n.search-box-input::placeholder {\r\n\tcolor: white;\r\n}\r\n\r\n/* version responsive */\r\n\r\n@media (max-width: 768px) {\r\n\t.menu-bar {\r\n\t\tjustify-content: center;\r\n\t\tpadding: 2.5rem;\r\n\t\tpadding-bottom: 0.5rem;\r\n\t}\r\n\r\n\t.logo img {\r\n\t\theight: 35px;\r\n\t\tpadding-left: 1rem;\r\n\t}\r\n\t.search-box,\r\n\t.search-box-input,\r\n\t.icons {\r\n\t\tdisplay: none; /* Ocultar iconos y barra  */\r\n\t}\r\n}\r\n",""]);const a=o},856:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(81),i=n.n(r),s=n(645),o=n.n(s)()(i());o.push([e.id,'/* Default styles for screens wider than 1023px */\r\n* {\r\n  font-family: "Inter", sans-serif;\r\n}\r\n\r\n.container {\r\n  display: flex;\r\n  align-items: center;\r\n  width: 50%;\r\n  border-radius: 20px;\r\n  background: #b8fe67;\r\n  margin: 1%;\r\n  padding: 2%;\r\n}\r\n\r\n.userMessage {\r\n  display: flex;\r\n  flex: auto;\r\n  align-items: center;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  margin-left: 2%;\r\n}\r\n\r\n.user {\r\n  font-size: 15px;\r\n  height: 20px;\r\n}\r\n\r\n.message {\r\n  font-size: 12px;\r\n}\r\n\r\nimg {\r\n  width: 47px;\r\n  border-radius: 50%;\r\n  margin-right: 10px;\r\n}\r\n\r\n.plus {\r\n  background-color: #000;\r\n  width: 47px;\r\n  height: 47px;\r\n  border-radius: 50%;\r\n  margin-right: 10px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.imgPlus {\r\n  width: 20px;\r\n  height: 20px;\r\n  margin-left: 10px;\r\n}\r\n\r\n.roundComponents {\r\n  display: flex;\r\n}\r\n\r\n/* Medium screen styles (min-width: 768px, max-width: 1023px) */\r\n@media screen and (min-width: 768px) and (max-width: 1023px) {\r\n  .container {\r\n    width: 90%;\r\n    margin: 2%;\r\n    padding: 2%;\r\n  }\r\n\r\n  .user {\r\n    font-size: 15px;\r\n    height: 20px;\r\n  }\r\n\r\n  .message {\r\n    font-size: 12px;\r\n  }\r\n\r\n  img {\r\n    width: 47px;\r\n  }\r\n\r\n  .plus {\r\n    width: 47px;\r\n    height: 47px;\r\n  }\r\n\r\n  .imgPlus {\r\n    width: 20px;\r\n    height: 20px;\r\n  }\r\n}\r\n\r\n/* Small screen styles (max-width: 767px) */\r\n@media screen and (max-width: 767px) {\r\n  .container {\r\n    width: 90%;\r\n    margin: 2%;\r\n    padding: 2%;\r\n  }\r\n\r\n  .user {\r\n    font-size: 15px;\r\n    height: 20px;\r\n  }\r\n\r\n  .message {\r\n    font-size: 12px;\r\n  }\r\n\r\n  img {\r\n    width: 47px;\r\n  }\r\n\r\n  .plus {\r\n    width: 47px;\r\n    height: 47px;\r\n  }\r\n\r\n  .imgPlus {\r\n    width: 20px;\r\n    height: 20px;\r\n  }\r\n}\r\n',""]);const a=o},601:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(81),i=n.n(r),s=n(645),o=n.n(s)()(i());o.push([e.id,'/* Default styles for screens wider than 1023px */\r\n* {\r\n  font-family: "Inter", sans-serif;\r\n}\r\n\r\n.container {\r\n  display: flex;\r\n  align-items: center;\r\n  width: 50%;\r\n  border-radius: 20px;\r\n  background: #fec2dc;\r\n  margin: 1%;\r\n  padding: 3% 2%;\r\n}\r\n\r\n.userMessage {\r\n  display: flex;\r\n  flex: auto;\r\n  align-items: center;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  margin-left: 2%;\r\n}\r\n\r\n.user {\r\n  font-size: 15px;\r\n  height: 20px;\r\n}\r\n\r\n.message {\r\n  font-size: 12px;\r\n}\r\n\r\nimg {\r\n  width: 47px;\r\n  height: 47px;\r\n  border-radius: 50%;\r\n  margin-right: 10px;\r\n}\r\n\r\n/* Medium screen styles (min-width: 768px, max-width: 1023px) */\r\n@media screen and (min-width: 768px) and (max-width: 1023px) {\r\n  .container {\r\n    width: 90%;\r\n    margin: 2%;\r\n    padding: 2%;\r\n  }\r\n\r\n  .user {\r\n    font-size: 15px;\r\n    height: 20px;\r\n  }\r\n\r\n  .message {\r\n    font-size: 12px;\r\n  }\r\n\r\n  img {\r\n    width: 47px;\r\n    height: 47px;\r\n  }\r\n}\r\n\r\n/* Small screen styles (max-width: 767px) */\r\n@media screen and (max-width: 767px) {\r\n  .container {\r\n    width: 90%;\r\n    margin: 2%;\r\n    padding: 2%;\r\n  }\r\n\r\n  .user {\r\n    font-size: 15px;\r\n    height: 20px;\r\n  }\r\n\r\n  .message {\r\n    font-size: 12px;\r\n  }\r\n\r\n  img {\r\n    width: 47px;\r\n    height: 47px;\r\n  }\r\n}\r\n',""]);const a=o},700:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(81),i=n.n(r),s=n(645),o=n.n(s)()(i());o.push([e.id,'/* Default styles for screens wider than 1023px */\r\n* {\r\n  font-family: "Inter", sans-serif;\r\n}\r\n\r\n.user {\r\n  width: 7%;\r\n  border-radius: 50%;\r\n  border: 3px solid #b8fe67;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.user-profile {\r\n  font-size: 25px;\r\n  color: white;\r\n  margin: 0%;\r\n}\r\n\r\n.user-at {\r\n  color: #a1a1a1;\r\n  margin: 0%;\r\n}\r\n\r\n.container-secondline {\r\n  display: flex;\r\n  align-items: center;\r\n  margin: 0%;\r\n  padding: 0%;\r\n}\r\n\r\n.user-link {\r\n  font-weight: 700;\r\n  color: #b8fe67;\r\n}\r\n\r\n.user-description {\r\n  color: white;\r\n  margin-left: 5px;\r\n}\r\n\r\n.button-profile {\r\n  padding: 20px 5px;\r\n  width: 10%;\r\n  font-size: 15px;\r\n  text-decoration: none;\r\n  border: none;\r\n  border-radius: 10px;\r\n  color: black;\r\n  background-color: white;\r\n}\r\n\r\n.containerButton {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin-top: 20px; /* Puedes ajustar el margen según sea necesario */\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.btn-logout {\r\n  padding: 20px 5px;\r\n  width: 10%;\r\n  font-size: 15px;\r\n  text-decoration: none;\r\n  border: 2px solid rgb(255, 92, 92);\r\n  border-radius: 10px;\r\n  color: rgb(255, 92, 92);\r\n  background-color: transparent;\r\n  margin: 0 10px;\r\n}\r\n\r\n/* Medium screen styles (min-width: 768px, max-width: 1023px) */\r\n@media screen and (min-width: 768px) and (max-width: 1023px) {\r\n  /* Add your medium screen styles here */\r\n  .user-profile {\r\n    font-size: 20px;\r\n  }\r\n\r\n  .user {\r\n    width: 15%;\r\n    border-radius: 50%;\r\n    border: 3px solid #b8fe67;\r\n    margin-bottom: 10px;\r\n  }\r\n\r\n  .button-profile {\r\n    width: 25%;\r\n  }\r\n\r\n  .container-secondline {\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 0%;\r\n  }\r\n}\r\n\r\n/* Small screen styles (max-width: 767px) */\r\n@media screen and (max-width: 767px) {\r\n  /* Add your small screen styles here */\r\n  .user {\r\n    width: 20%;\r\n    border-radius: 50%;\r\n    border: 3px solid #b8fe67;\r\n    margin-bottom: 10px;\r\n  }\r\n\r\n  .user-profile {\r\n    font-size: 18px;\r\n  }\r\n\r\n  .button-profile {\r\n    width: 40%;\r\n  }\r\n\r\n  .container-secondline {\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 0%;\r\n  }\r\n}\r\n',""]);const a=o},689:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(81),i=n.n(r),s=n(645),o=n.n(s)()(i());o.push([e.id,'/* Default styles for screens wider than 1023px */\r\n* {\r\n  font-family: "Inter", sans-serif;\r\n}\r\n\r\nbutton {\r\n  padding: 20px 5px;\r\n  width: 30%;\r\n  font-size: 15px;\r\n  text-decoration: none;\r\n  border: none;\r\n  border-radius: 10px;\r\n  color: black;\r\n  background-color: white;\r\n  margin: 0 auto;\r\n  display: block;\r\n  margin-bottom: 3%;\r\n  text-align: center;\r\n  line-height: 1;\r\n}\r\n\r\n/* Medium screen styles (min-width: 768px, max-width: 1023px) */\r\n@media screen and (min-width: 768px) and (max-width: 1023px) {\r\n  /* Modify medium screen styles here */\r\n\r\n  button {\r\n    width: 50%;\r\n  }\r\n}\r\n\r\n/* Small screen styles (max-width: 767px) */\r\n@media screen and (max-width: 767px) {\r\n  /* Modify small screen styles here */\r\n\r\n  button {\r\n    width: 70%;\r\n  }\r\n}\r\n',""]);const a=o},463:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(81),i=n.n(r),s=n(645),o=n.n(s)()(i());o.push([e.id,'* {\r\n  font-family: "Inter", sans-serif;\r\n}\r\n\r\nform {\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin: 0% 35%;\r\n}\r\n\r\nlabel {\r\n  color: white;\r\n  font-weight: 200;\r\n}\r\n\r\ninput {\r\n  border: none;\r\n  border-bottom: 1px solid #fff;\r\n  background: transparent;\r\n  color: #fff;\r\n  opacity: 0.2;\r\n  padding: 8px;\r\n  margin: 8px 0;\r\n}\r\n\r\ninput::placeholder {\r\n  color: #ffffff;\r\n  opacity: 0.5;\r\n  font-size: 15px;\r\n}\r\n\r\nbutton {\r\n  padding: 20px 5px;\r\n  width: 30%;\r\n  font-size: 15px;\r\n  text-decoration: none;\r\n  border: none;\r\n  border-radius: 10px;\r\n  color: black;\r\n  background-color: white;\r\n  margin-bottom: 3%;\r\n  margin-left: 35%;\r\n}\r\n\r\nh1 {\r\n  color: white;\r\n  margin-left: 40%;\r\n  margin-bottom: 3%;\r\n  margin-top: 10%;\r\n}\r\n\r\np {\r\n  color: white;\r\n  margin: 1% 35%;\r\n  margin-bottom: 3%;\r\n  font-size: 18px;\r\n  font-weight: 200;\r\n}\r\n\r\na {\r\n  color: #ffffff;\r\n}\r\n\r\n@media screen and (min-width: 768px) and (max-width: 1023px) {\r\n  form {\r\n    margin: 0% 20%;\r\n  }\r\n\r\n  h1 {\r\n    margin-left: 30%;\r\n  }\r\n\r\n  p {\r\n    margin: 1% 20%;\r\n  }\r\n}\r\n\r\n@media screen and (max-width: 767px) {\r\n  form {\r\n    margin: 0% 10%;\r\n  }\r\n\r\n  h1 {\r\n    margin-left: 10%;\r\n  }\r\n\r\n  p {\r\n    margin: 1% 10%;\r\n    margin-bottom: 5%;\r\n  }\r\n}\r\n',""]);const a=o},149:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(81),i=n.n(r),s=n(645),o=n.n(s)()(i());o.push([e.id,'* {\r\n  font-family: "Inter", sans-serif;\r\n}\r\n\r\n.imgFeed {\r\n  color: white;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin: 2%;\r\n}\r\n\r\n/*@media screen and (min-width: 1024px) {\r\n  .general {\r\n    display: grid;\r\n    grid-auto-flow: dense;\r\n    grid-template-columns: 1fr 1fr; /* Crea dos columnas de igual ancho */\r\n/*justify-content: center; /* Centra horizontalmente */\r\n/*margin: 0% 10%;}/*\r\n}*/\r\n\r\n@media screen and (min-width: 1024px) {\r\n  .general {\r\n    margin-left: 30%;\r\n  }\r\n}\r\n\r\n@media screen and (min-width: 1024px) {\r\n  .general {\r\n    margin-left: 30%;\r\n  }\r\n}\r\n',""]);const a=o},226:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(81),i=n.n(r),s=n(645),o=n.n(s)()(i());o.push([e.id,".general {\r\n  display: grid;\r\n  grid-auto-flow: dense;\r\n  grid-template-columns: 1fr 1fr;\r\n}\r\n",""]);const a=o},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,i,s){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(o[c]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);r&&o[u[0]]||(void 0!==s&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=s),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),t.push(u))}},t}},81:e=>{e.exports=function(e){return e[1]}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={id:r,exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e,t=n(149),r=n(352);!function(e){e.STORE="STORE"}(e||(e={}));var i,s;!function(e){e.LOGIN="LOGIN",e.CREATEACCOUNT="CREATEACCOUNT",e.DASHBOARD="DASHBOARD",e.USER_PROFILE="USER_PROFILE",e.SETTINGS="SETTINGS",e.PASSWORD="PASSWORD"}(i||(i={})),function(e){e.NAVIGATE="NAVIGATE"}(s||(s={}));const o={screen:i.CREATEACCOUNT};let a=(({key:e,defaultValue:t})=>{const n=localStorage.getItem(e)||sessionStorage.getItem(e);return n?JSON.parse(n):t})({key:e.STORE,defaultValue:o}),c=[];const l=t=>{const n=((e,t)=>{const{action:n,payload:r}=e;return n===s.NAVIGATE?Object.assign(Object.assign({},t),{screen:r}):t})(t,JSON.parse(JSON.stringify(a)));var r;a=n,r=n,(({key:e,value:t,session:n=!1})=>{const r=n?sessionStorage:localStorage,i=JSON.stringify(t);r.setItem(e,i)})({key:e.STORE,value:r}),c.forEach((e=>e.render()))},u=e=>({action:s.NAVIGATE,payload:e});var h;!function(e){e.user="user"}(h||(h={}));class d extends HTMLElement{static get observedAttributes(){return Object.keys({user:null})}attributeChangedCallback(e,t,n){this[e]=n,this.render()}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t\t\t\t\t\t<style>${r.Z}</style>\n\t\t\t\t\t\t<nav class="menu-bar">\n\t\t\t\t\t\t\t\t<div class="logo">\n\t\t\t\t\t\t\t\t\t\t<img src="images/logo.png" alt="logo">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="search-box">\n\t\t\t\t\t\t\t\t\t\t<input type="text" class="search-box-input" placeholder="Search...">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="icons">\n\t\t\t\t\t\t\t\t\t\t<img src="images/icon-notifications-menu.png" alt="Icono notificaciones" class="icon">\n\t\t\t\t\t\t\t\t\t\t<img src="images/icon-home-menu.png" alt="Icono home" class="icon home-icon" id="homeButton">\n\t\t\t\t\t\t\t\t\t\t<img src="images/icon-profile-menu.png" alt="Icono profile" class="icon profile-icon" id="profileButton">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</nav>\n\t\t\t\t\t\t<div class="line-separator"></div>\n\t\t\t\t`,this.setupEventListeners())}setupEventListeners(){const e=this.shadowRoot.querySelector("#homeButton");e&&e.addEventListener("click",(()=>{l(u(i.DASHBOARD))}));const t=this.shadowRoot.querySelector("#profileButton");t&&t.addEventListener("click",(()=>{l(u(i.USER_PROFILE))}))}}customElements.define("menu-card",d);var f,p=n(601);!function(e){e.user="user",e.message="message",e.img="img"}(f||(f={}));class m extends HTMLElement{static get observedAttributes(){return Object.keys({user:null,message:null,img:null})}attributeChangedCallback(e,t,n){this[e]=n,this.render()}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){this.shadowRoot&&(this.shadowRoot.innerHTML=`    \n            <style>\n              ${p.Z}\n            </style>\n\n            <section class="container">\n              <section class="userMessage">\n                <div class="user">\n                  <p>${this.user}</p>\n                </div>\n            \n                <div class="message">\n                  <h2>${this.message}</h2>\n                </div>\n              </section>\n            \n              <section class="roundComponents">\n                <img class="imgprofiles" src="${this.img}">\n              </section>\n            </section>\n        `)}}customElements.define("tweet-card",m);var g,y=n(856);!function(e){e.user="user",e.comment="comment",e.img="img"}(g||(g={}));class v extends HTMLElement{static get observedAttributes(){return Object.keys({user:null,comment:null,img:null})}attributeChangedCallback(e,t,n){this[e]=n,this.render()}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){if(this.shadowRoot){this.shadowRoot.innerHTML=`\n          <style>\n            ${y.Z}\n          </style>\n\n  `;const e=this.ownerDocument.createElement("section");e.className="container";const t=this.ownerDocument.createElement("section");t.className="userMessage";const n=this.ownerDocument.createElement("div");n.className="user";const r=this.ownerDocument.createElement("p");r.textContent="@a.miller",n.appendChild(r);const i=this.ownerDocument.createElement("div");i.className="message";const s=this.ownerDocument.createElement("h2");s.textContent="Mix&Match",i.appendChild(s),t.appendChild(n),t.appendChild(i);const o=this.ownerDocument.createElement("section");o.className="roundComponents";const a=this.ownerDocument.createElement("img");a.className="profileimg",a.src="https://m.media-amazon.com/images/I/91LYRChMy-L._SX1248_CR0%2C0%2C1248%2C1248_.jpg";const c=this.ownerDocument.createElement("img");c.className="imgPlus",c.src="/img/plus.png",o.appendChild(a),e.appendChild(t),e.appendChild(o);const l=document.createElement("style");l.textContent=y.Z,this.shadowRoot.appendChild(l),this.shadowRoot.appendChild(e)}}}customElements.define("post-card",v);var w,b=n(913);!function(e){e.publication="publication",e.likes="likes",e.user="user",e.caption="caption"}(w||(w={}));class _ extends HTMLElement{static get observedAttributes(){return Object.keys({publication:null,likes:null,user:null,caption:null})}attributeChangedCallback(e,t,n){this[e]=n,this.render()}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){if(this.shadowRoot){this.shadowRoot.innerHTML=`\n    <style>\n        ${b.Z}\n    </style>\n`;const e=this.ownerDocument.createElement("section"),t=this.ownerDocument.createElement("div");t.className="body-card";const n=this.ownerDocument.createElement("img");n.className="post-img",n.src=`${this.publication}`,n.addEventListener("click",(()=>{var e;const t=this.ownerDocument.createElement("div");t.classList.add("modal");const n=this.ownerDocument.createElement("img");n.src=`${this.publication}`,t.appendChild(n),null===(e=this.shadowRoot)||void 0===e||e.appendChild(t),t.addEventListener("click",(()=>{t.remove()}))}));const r=this.ownerDocument.createElement("div");r.className="icon";const i=this.ownerDocument.createElement("div");i.className="right";const s=this.ownerDocument.createElement("img");s.src="/img/Icondefault.png",s.addEventListener("click",(()=>{s.src="/img/Icon.png"}));const o=this.ownerDocument.createElement("img");o.src="/img/Iconcomment.png";const a=this.ownerDocument.createElement("img");a.src="/img/Iconshare.png";const c=this.ownerDocument.createElement("img");c.src="/img/Iconsave.png",c.addEventListener("click",(()=>{c.src="/img/saveB.png"}));const l=this.ownerDocument.createElement("div");l.className="button-info";const u=this.ownerDocument.createElement("span");u.textContent=`${this.likes} likes`;const h=this.ownerDocument.createElement("p"),d=this.ownerDocument.createElement("strong");d.textContent=`${this.user}`;const f=this.ownerDocument.createElement("br"),p=this.ownerDocument.createElement("p");p.textContent=`${this.caption}`,h.appendChild(d),h.appendChild(f),h.appendChild(p);const m=this.ownerDocument.createElement("div");m.classList.add("inputContainer");const g=this.ownerDocument.createElement("input");g.classList.add("inputComment"),g.placeholder="Add a comment";const y=this.ownerDocument.createElement("button");y.classList.add("buttoncommet"),y.innerText="Submit",m.appendChild(y),l.appendChild(m),e.appendChild(t),t.appendChild(n),t.appendChild(r),r.appendChild(i),i.appendChild(s),i.appendChild(o),i.appendChild(a),r.appendChild(c),t.appendChild(l),l.appendChild(u),l.appendChild(h),l.appendChild(m),l.appendChild(g),l.appendChild(y),this.shadowRoot.appendChild(e)}}}customElements.define("main-imgcard",_);const E=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},I={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const i=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,c=a?e[t+2]:0,l=i>>2,u=(3&i)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),r.push(n[l],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(E(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const i=n[e.charAt(t++)],s=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==i||null==s||null==o||null==a)throw new T;const c=i<<2|s>>4;if(r.push(c),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class T extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const C=function(e){return function(e){const t=E(e);return I.encodeByteArray(t,!0)}(e).replace(/\./g,"")},S=function(e){try{return I.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},k=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&S(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},A=e=>{var t,n;return null===(n=null===(t=k())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},R=e=>{const t=A(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},x=()=>{var e;return null===(e=k())||void 0===e?void 0:e.config},D=e=>{var t;return null===(t=k())||void 0===t?void 0:t[`_${e}`]};class N{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function O(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[C(JSON.stringify({alg:"none",type:"JWT"})),C(JSON.stringify(s)),""].join(".")}function P(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function L(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function M(){try{return"object"==typeof indexedDB}catch(e){return!1}}function U(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}class F extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,F.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,V.prototype.create)}}class V{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(j,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new F(r,o,n)}}const j=/\{\$([^}]+)}/g;function B(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(z(n)&&z(s)){if(!B(n,s))return!1}else if(n!==s)return!1}for(const e of r)if(!n.includes(e))return!1;return!0}function z(e){return null!==e&&"object"==typeof e}function q(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function $(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function H(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class K{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const t of["next","error","complete"])if(t in e&&"function"==typeof e[t])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=G),void 0===r.error&&(r.error=G),void 0===r.complete&&(r.complete=G);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function G(){}const W=1e3,Q=2,J=144e5,X=.5;function Y(e,t=W,n=Q){const r=t*Math.pow(n,e),i=Math.round(X*r*(Math.random()-.5)*2);return Math.min(J,r+i)}function Z(e){return e&&e._delegate?e._delegate:e}class ee{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const te="[DEFAULT]";class ne{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new N;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:te})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=te){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=te){return this.instances.has(e)}getOptions(e=te){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===te?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var r;return n||null}normalizeInstanceIdentifier(e=te){return this.component?this.component.multipleInstances?e:te:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class re{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ne(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const ie=[];var se,oe;(oe=se||(se={}))[oe.DEBUG=0]="DEBUG",oe[oe.VERBOSE=1]="VERBOSE",oe[oe.INFO=2]="INFO",oe[oe.WARN=3]="WARN",oe[oe.ERROR=4]="ERROR",oe[oe.SILENT=5]="SILENT";const ae={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},ce=se.INFO,le={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},ue=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=le[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class he{constructor(e){this.name=e,this._logLevel=ce,this._logHandler=ue,this._userLogHandler=null,ie.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?ae[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...e),this._logHandler(this,se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...e),this._logHandler(this,se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,se.INFO,...e),this._logHandler(this,se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,se.WARN,...e),this._logHandler(this,se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...e),this._logHandler(this,se.ERROR,...e)}}const de=(e,t)=>t.some((t=>e instanceof t));let fe,pe;const me=new WeakMap,ge=new WeakMap,ye=new WeakMap,ve=new WeakMap,we=new WeakMap;let be={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ge.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ye.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ee(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function _e(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(pe||(pe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(Ie(this),e),Ee(me.get(this))}:function(...e){return Ee(t.apply(Ie(this),e))}:function(e,...n){const r=t.call(Ie(this),e,...n);return ye.set(r,e.sort?e.sort():[e]),Ee(r)}:(e instanceof IDBTransaction&&function(e){if(ge.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));ge.set(e,t)}(e),de(e,fe||(fe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,be):e);var t}function Ee(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Ee(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&me.set(t,e)})).catch((()=>{})),we.set(t,e),t}(e);if(ve.has(e))return ve.get(e);const t=_e(e);return t!==e&&(ve.set(e,t),we.set(t,e)),t}const Ie=e=>we.get(e);function Te(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=Ee(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(Ee(o.result),e.oldVersion,e.newVersion,Ee(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}const Ce=["get","getKey","getAll","getAllKeys","count"],Se=["put","add","delete","clear"],ke=new Map;function Ae(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(ke.get(t))return ke.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Se.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Ce.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let o=s.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&s.done]))[0]};return ke.set(t,s),s}var Re;Re=be,be={...Re,get:(e,t,n)=>Ae(e,t)||Re.get(e,t,n),has:(e,t)=>!!Ae(e,t)||Re.has(e,t)};class xe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const De="@firebase/app",Ne="0.10.2",Oe=new he("@firebase/app"),Pe="[DEFAULT]",Le={[De]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Me=new Map,Ue=new Map,Fe=new Map;function Ve(e,t){try{e.container.addComponent(t)}catch(n){Oe.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function je(e){const t=e.name;if(Fe.has(t))return Oe.debug(`There were multiple attempts to register component ${t}.`),!1;Fe.set(t,e);for(const t of Me.values())Ve(t,e);for(const t of Ue.values())Ve(t,e);return!0}function Be(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ze(e){return void 0!==e.settings}const qe=new V("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class $e{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ee("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qe.create("app-deleted",{appName:this._name})}}const He="10.11.1";function Ke(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const r=Object.assign({name:Pe,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!=typeof i||!i)throw qe.create("bad-app-name",{appName:String(i)});if(n||(n=x()),!n)throw qe.create("no-options");const s=Me.get(i);if(s){if(B(n,s.options)&&B(r,s.config))return s;throw qe.create("duplicate-app",{appName:i})}const o=new re(i);for(const e of Fe.values())o.addComponent(e);const a=new $e(n,r,o);return Me.set(i,a),a}function Ge(e=Pe){const t=Me.get(e);if(!t&&e===Pe&&x())return Ke();if(!t)throw qe.create("no-app",{appName:e});return t}function We(e,t,n){var r;let i=null!==(r=Le[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Oe.warn(e.join(" "))}je(new ee(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const Qe="firebase-heartbeat-database",Je=1,Xe="firebase-heartbeat-store";let Ye=null;function Ze(){return Ye||(Ye=Te(Qe,Je,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Xe)}catch(e){console.warn(e)}}}).catch((e=>{throw qe.create("idb-open",{originalErrorMessage:e.message})}))),Ye}async function et(e,t){try{const n=(await Ze()).transaction(Xe,"readwrite"),r=n.objectStore(Xe);await r.put(t,tt(e)),await n.done}catch(e){if(e instanceof F)Oe.warn(e.message);else{const t=qe.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});Oe.warn(t.message)}}}function tt(e){return`${e.name}!${e.options.appId}`}class nt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new it(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=rt();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=rt(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),st(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),st(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=C(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function rt(){return(new Date).toISOString().substring(0,10)}class it{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!M()&&U().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Ze()).transaction(Xe),n=await t.objectStore(Xe).get(tt(e));return await t.done,n}catch(e){if(e instanceof F)Oe.warn(e.message);else{const t=qe.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});Oe.warn(t.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return et(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return et(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function st(e){return C(JSON.stringify({version:2,heartbeats:e})).length}je(new ee("platform-logger",(e=>new xe(e)),"PRIVATE")),je(new ee("heartbeat",(e=>new nt(e)),"PRIVATE")),We(De,Ne,""),We(De,Ne,"esm2017"),We("fire-js","");var ot,at="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ct={},lt=lt||{},ut=at||self;function ht(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function dt(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var ft="closure_uid_"+(1e9*Math.random()>>>0),pt=0;function mt(e,t,n){return e.call.apply(e.bind,arguments)}function gt(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function yt(e,t,n){return(yt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?mt:gt).apply(null,arguments)}function vt(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function wt(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function bt(){this.s=this.s,this.o=this.o}bt.prototype.s=!1,bt.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,ft)&&e[ft]||(e[ft]=++pt))},bt.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const _t=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Et(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function It(e,t){for(let t=1;t<arguments.length;t++){const n=arguments[t];if(ht(n)){const t=e.length||0,r=n.length||0;e.length=t+r;for(let i=0;i<r;i++)e[t+i]=n[i]}else e.push(n)}}function Tt(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Tt.prototype.h=function(){this.defaultPrevented=!0};var Ct=function(){if(!ut.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};ut.addEventListener("test",e,t),ut.removeEventListener("test",e,t)}catch(e){}return e}();function St(e){return/^[\s\xa0]*$/.test(e)}function kt(){var e=ut.navigator;return e&&(e=e.userAgent)?e:""}function At(e){return-1!=kt().indexOf(e)}function Rt(e){return Rt[" "](e),e}Rt[" "]=function(){};var xt,Dt,Nt,Ot=At("Opera"),Pt=At("Trident")||At("MSIE"),Lt=At("Edge"),Mt=Lt||Pt,Ut=At("Gecko")&&!(-1!=kt().toLowerCase().indexOf("webkit")&&!At("Edge"))&&!(At("Trident")||At("MSIE"))&&!At("Edge"),Ft=-1!=kt().toLowerCase().indexOf("webkit")&&!At("Edge");function Vt(){var e=ut.document;return e?e.documentMode:void 0}e:{var jt="",Bt=(Dt=kt(),Ut?/rv:([^\);]+)(\)|;)/.exec(Dt):Lt?/Edge\/([\d\.]+)/.exec(Dt):Pt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Dt):Ft?/WebKit\/(\S+)/.exec(Dt):Ot?/(?:Version)[ \/]?(\S+)/.exec(Dt):void 0);if(Bt&&(jt=Bt?Bt[1]:""),Pt){var zt=Vt();if(null!=zt&&zt>parseFloat(jt)){xt=String(zt);break e}}xt=jt}ut.document&&Pt?Nt=Vt()||parseInt(xt,10)||void 0:Nt=void 0;var qt=Nt;function $t(e,t){if(Tt.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Ut){e:{try{Rt(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:Ht[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&$t.$.h.call(this)}}wt($t,Tt);var Ht={2:"touch",3:"pen",4:"mouse"};$t.prototype.h=function(){$t.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Kt="closure_listenable_"+(1e6*Math.random()|0),Gt=0;function Wt(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Gt,this.fa=this.ia=!1}function Qt(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Jt(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Xt(e){const t={};for(const n in e)t[n]=e[n];return t}const Yt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Zt(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<Yt.length;t++)n=Yt[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function en(e){this.src=e,this.g={},this.h=0}function tn(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=_t(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Qt(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function nn(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}en.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=nn(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Wt(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var rn="closure_lm_"+(1e6*Math.random()|0),sn={};function on(e,t,n,r,i){if(r&&r.once)return cn(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)on(e,t[s],n,r,i);return null}return n=mn(n),e&&e[Kt]?e.O(t,n,dt(r)?!!r.capture:!!r,i):an(e,t,n,!1,r,i)}function an(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=dt(i)?!!i.capture:!!i,a=fn(e);if(a||(e[rn]=a=new en(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){const e=dn;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Ct||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(hn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function cn(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)cn(e,t[s],n,r,i);return null}return n=mn(n),e&&e[Kt]?e.P(t,n,dt(r)?!!r.capture:!!r,i):an(e,t,n,!0,r,i)}function ln(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)ln(e,t[s],n,r,i);else r=dt(r)?!!r.capture:!!r,n=mn(n),e&&e[Kt]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=nn(s=e.g[t],n,r,i))&&(Qt(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--))):e&&(e=fn(e))&&(t=e.g[t.toString()],e=-1,t&&(e=nn(t,n,r,i)),(n=-1<e?t[e]:null)&&un(n))}function un(e){if("number"!=typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Kt])tn(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(hn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=fn(t))?(tn(n,e),0==n.h&&(n.src=null,t[rn]=null)):Qt(e)}}}function hn(e){return e in sn?sn[e]:sn[e]="on"+e}function dn(e,t){if(e.fa)e=!0;else{t=new $t(t,this);var n=e.listener,r=e.la||e.src;e.ia&&un(e),e=n.call(r,t)}return e}function fn(e){return(e=e[rn])instanceof en?e:null}var pn="__closure_events_fn_"+(1e9*Math.random()>>>0);function mn(e){return"function"==typeof e?e:(e[pn]||(e[pn]=function(t){return e.handleEvent(t)}),e[pn])}function gn(){bt.call(this),this.i=new en(this),this.S=this,this.J=null}function yn(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"==typeof t)t=new Tt(t,e);else if(t instanceof Tt)t.target=t.target||e;else{var i=t;Zt(t=new Tt(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=vn(o,r,!0,t)&&i}if(i=vn(o=t.g=e,r,!0,t)&&i,i=vn(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=vn(o=t.g=n[s],r,!1,t)&&i}function vn(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&tn(e.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}wt(gn,bt),gn.prototype[Kt]=!0,gn.prototype.removeEventListener=function(e,t,n,r){ln(this,e,t,n,r)},gn.prototype.N=function(){if(gn.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Qt(n[r]);delete t.g[e],t.h--}}this.J=null},gn.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},gn.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var wn=ut.JSON.stringify;function bn(){var e=kn;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var _n=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new En),(e=>e.reset()));class En{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function In(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Tn(e){ut.setTimeout((()=>{throw e}),0)}let Cn,Sn=!1,kn=new class{constructor(){this.h=this.g=null}add(e,t){const n=_n.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},An=()=>{const e=ut.Promise.resolve(void 0);Cn=()=>{e.then(Rn)}};var Rn=()=>{for(var e;e=bn();){try{e.h.call(e.g)}catch(e){Tn(e)}var t=_n;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Sn=!1};function xn(e,t){gn.call(this),this.h=e||1,this.g=t||ut,this.j=yt(this.qb,this),this.l=Date.now()}function Dn(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Nn(e,t,n){if("function"==typeof e)n&&(e=yt(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=yt(e.handleEvent,e)}return 2147483647<Number(t)?-1:ut.setTimeout(e,t||0)}function On(e){e.g=Nn((()=>{e.g=null,e.i&&(e.i=!1,On(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}wt(xn,gn),(ot=xn.prototype).ga=!1,ot.T=null,ot.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),yn(this,"tick"),this.ga&&(Dn(this),this.start()))}},ot.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ot.N=function(){xn.$.N.call(this),Dn(this),delete this.g};class Pn extends bt{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:On(this)}N(){super.N(),this.g&&(ut.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ln(e){bt.call(this),this.h=e,this.g={}}wt(Ln,bt);var Mn=[];function Un(e,t,n,r){Array.isArray(n)||(n&&(Mn[0]=n.toString()),n=Mn);for(var i=0;i<n.length;i++){var s=on(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Fn(e){Jt(e.g,(function(e,t){this.g.hasOwnProperty(t)&&un(e)}),e),e.g={}}function Vn(){this.g=!0}function jn(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return wn(n)}catch(e){return t}}(e,n)+(r?" "+r:"")}))}Ln.prototype.N=function(){Ln.$.N.call(this),Fn(this)},Ln.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Vn.prototype.Ea=function(){this.g=!1},Vn.prototype.info=function(){};var Bn={},zn=null;function qn(){return zn=zn||new gn}function $n(e){Tt.call(this,Bn.Ta,e)}function Hn(e){const t=qn();yn(t,new $n(t))}function Kn(e,t){Tt.call(this,Bn.STAT_EVENT,e),this.stat=t}function Gn(e){const t=qn();yn(t,new Kn(t,e))}function Wn(e,t){Tt.call(this,Bn.Ua,e),this.size=t}function Qn(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return ut.setTimeout((function(){e()}),t)}Bn.Ta="serverreachability",wt($n,Tt),Bn.STAT_EVENT="statevent",wt(Kn,Tt),Bn.Ua="timingevent",wt(Wn,Tt);var Jn={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Xn={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Yn(){}function Zn(e){return e.h||(e.h=e.i())}function er(){}Yn.prototype.h=null;var tr,nr={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function rr(){Tt.call(this,"d")}function ir(){Tt.call(this,"c")}function sr(){}function or(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Ln(this),this.P=cr,e=Mt?125:void 0,this.V=new xn(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new ar}function ar(){this.i=null,this.g="",this.h=!1}wt(rr,Tt),wt(ir,Tt),wt(sr,Yn),sr.prototype.g=function(){return new XMLHttpRequest},sr.prototype.i=function(){return{}},tr=new sr;var cr=45e3,lr={},ur={};function hr(e,t,n){e.L=1,e.A=xr(Cr(t)),e.u=n,e.S=!0,dr(e,null)}function dr(e,t){e.G=Date.now(),gr(e),e.B=Cr(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),qr(n.i,"t",r),e.o=0,n=e.l.J,e.h=new ar,e.g=zi(e.l,n?t:null,!e.u),0<e.O&&(e.M=new Pn(yt(e.Pa,e,e.g),e.O)),Un(e.U,e.g,"readystatechange",e.nb),t=e.I?Xt(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Hn(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function fr(e){return!!e.g&&"GET"==e.v&&2!=e.L&&e.l.Ha}function pr(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=mr(e,n),r==ur){4==t&&(e.s=4,Gn(14),i=!1),jn(e.j,e.m,null,"[Incomplete Response]");break}if(r==lr){e.s=4,Gn(15),jn(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}jn(e.j,e.m,r,null),_r(e,r)}fr(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,Gn(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Pi(t),t.M=!0,Gn(11))):(jn(e.j,e.m,n,"[Invalid Chunked Response]"),br(e),wr(e))}function mr(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?ur:(n=Number(t.substring(n,r)),isNaN(n)?lr:(r+=1)+n>t.length?ur:(t=t.slice(r,r+n),e.o=r+n,t))}function gr(e){e.Y=Date.now()+e.P,yr(e,e.P)}function yr(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=Qn(yt(e.lb,e),t)}function vr(e){e.C&&(ut.clearTimeout(e.C),e.C=null)}function wr(e){0==e.l.H||e.J||Ui(e.l,e)}function br(e){vr(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Dn(e.V),Fn(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function _r(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Qr(n.i,e)))if(!e.K&&Qr(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Mi(n),Si(n)}Oi(n),Gn(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Qn(yt(n.ib,n),6e3));if(1>=Wr(n.i)&&n.oa){try{n.oa()}catch(e){}n.oa=void 0}}else Vi(n,11)}else if((e.K||n.g==e)&&Mi(n),!St(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let l=i[t];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const t=l[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=l[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=l[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Jr(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Rr(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=Bi(r,r.J?r.pa:null,r.Y),o.K){Xr(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(vr(a),gr(a)),r.g=o}else Ni(r);0<n.j.length&&Ai(n)}else"stop"!=l[0]&&"close"!=l[0]||Vi(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Vi(n,7):Ci(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}Hn()}catch(e){}}function Er(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(ht(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(ht(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(ht(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(ot=or.prototype).setTimeout=function(e){this.P=e},ot.nb=function(e){e=e.target;const t=this.M;t&&3==wi(e)?t.l():this.Pa(e)},ot.Pa=function(e){try{if(e==this.g)e:{const u=wi(this.g);var t=this.g.Ia();if(this.g.da(),!(3>u)&&(3!=u||Mt||this.g&&(this.h.h||this.g.ja()||bi(this.g)))){this.J||4!=u||7==t||Hn(),vr(this);var n=this.g.da();this.ca=n;t:if(fr(this)){var r=bi(this.g);e="";var i=r.length,s=4==wi(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){br(this),wr(this);var o="";break t}this.h.i=new ut.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!St(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.s=3,Gn(12),br(this),wr(this);break e}jn(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_r(this,n)}this.S?(pr(this,u,o),Mt&&this.i&&3==u&&(Un(this.U,this.V,"tick",this.mb),this.V.start())):(jn(this.j,this.m,o,null),_r(this,o)),4==u&&br(this),this.i&&!this.J&&(4==u?Ui(this.l,this):(this.i=!1,gr(this)))}else(function(e){const t={};e=(e.g&&2<=wi(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(St(e[r]))continue;var n=In(e[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Gn(12)):(this.s=0,Gn(13)),br(this),wr(this)}}}catch(e){}},ot.mb=function(){if(this.g){var e=wi(this.g),t=this.g.ja();this.o<t.length&&(vr(this),pr(this,e,t),this.i&&4!=e&&gr(this))}},ot.cancel=function(){this.J=!0,br(this)},ot.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(Hn(),Gn(17)),br(this),this.s=2,wr(this)):yr(this,this.Y-e)};var Ir=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Tr(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Tr){this.h=e.h,Sr(this,e.j),this.s=e.s,this.g=e.g,kr(this,e.m),this.l=e.l;var t=e.i,n=new Vr;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Ar(this,n),this.o=e.o}else e&&(t=String(e).match(Ir))?(this.h=!1,Sr(this,t[1]||"",!0),this.s=Dr(t[2]||""),this.g=Dr(t[3]||"",!0),kr(this,t[4]),this.l=Dr(t[5]||"",!0),Ar(this,t[6]||"",!0),this.o=Dr(t[7]||"")):(this.h=!1,this.i=new Vr(null,this.h))}function Cr(e){return new Tr(e)}function Sr(e,t,n){e.j=n?Dr(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function kr(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Ar(e,t,n){t instanceof Vr?(e.i=t,function(e,t){t&&!e.j&&(jr(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Br(this,t),qr(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Nr(t,Ur)),e.i=new Vr(t,e.h))}function Rr(e,t,n){e.i.set(t,n)}function xr(e){return Rr(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Dr(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Nr(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Or),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Or(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Tr.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Nr(t,Pr,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Nr(t,Pr,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Nr(n,"/"==n.charAt(0)?Mr:Lr,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Nr(n,Fr)),e.join("")};var Pr=/[#\/\?@]/g,Lr=/[#\?:]/g,Mr=/[#\?]/g,Ur=/[#\?@]/g,Fr=/#/g;function Vr(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function jr(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Br(e,t){jr(e),t=$r(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function zr(e,t){return jr(e),t=$r(e,t),e.g.has(t)}function qr(e,t,n){Br(e,t),0<n.length&&(e.i=null,e.g.set($r(e,t),Et(n)),e.h+=n.length)}function $r(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Hr(e){this.l=e||Kr,e=ut.PerformanceNavigationTiming?0<(e=ut.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(ut.g&&ut.g.Ka&&ut.g.Ka()&&ut.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ot=Vr.prototype).add=function(e,t){jr(this),this.i=null,e=$r(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},ot.forEach=function(e,t){jr(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},ot.ta=function(){jr(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},ot.Z=function(e){jr(this);let t=[];if("string"==typeof e)zr(this,e)&&(t=t.concat(this.g.get($r(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},ot.set=function(e,t){return jr(this),this.i=null,zr(this,e=$r(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},ot.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},ot.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var Kr=10;function Gr(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Wr(e){return e.h?1:e.g?e.g.size:0}function Qr(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Jr(e,t){e.g?e.g.add(t):e.h=t}function Xr(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Yr(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Et(e.i)}Hr.prototype.cancel=function(){if(this.i=Yr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Zr=class{stringify(e){return ut.JSON.stringify(e,void 0)}parse(e){return ut.JSON.parse(e,void 0)}};function ei(){this.g=new Zr}function ti(e,t,n){const r=n||"";try{Er(e,(function(e,n){let i=e;dt(e)&&(i=wn(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function ni(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}function ri(e){this.l=e.ec||null,this.j=e.ob||!1}function ii(e,t){gn.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=si,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}wt(ri,Yn),ri.prototype.g=function(){return new ii(this.l,this.j)},ri.prototype.i=function(e){return function(){return e}}({}),wt(ii,gn);var si=0;function oi(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function ai(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ci(e)}function ci(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(ot=ii.prototype).open=function(e,t){if(this.readyState!=si)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ci(this)},ot.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||ut).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},ot.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ai(this)),this.readyState=si},ot.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ci(this)),this.g&&(this.readyState=3,ci(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==ut.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;oi(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},ot.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ai(this):ci(this),3==this.readyState&&oi(this)}},ot.Za=function(e){this.g&&(this.response=this.responseText=e,ai(this))},ot.Ya=function(e){this.g&&(this.response=e,ai(this))},ot.ka=function(){this.g&&ai(this)},ot.setRequestHeader=function(e,t){this.v.append(e,t)},ot.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},ot.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(ii.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var li=ut.JSON.parse;function ui(e){gn.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=hi,this.L=this.M=!1}wt(ui,gn);var hi="",di=/^https?$/i,fi=["POST","PUT"];function pi(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,mi(e),yi(e)}function mi(e){e.F||(e.F=!0,yn(e,"complete"),yn(e,"error"))}function gi(e){if(e.h&&void 0!==lt&&(!e.C[1]||4!=wi(e)||2!=e.da()))if(e.v&&4==wi(e))Nn(e.La,0,e);else if(yn(e,"readystatechange"),4==wi(e)){e.h=!1;try{const o=e.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===o){var i=String(e.I).match(Ir)[1]||null;!i&&ut.self&&ut.self.location&&(i=ut.self.location.protocol.slice(0,-1)),r=!di.test(i?i.toLowerCase():"")}n=r}if(n)yn(e,"complete"),yn(e,"success");else{e.m=6;try{var s=2<wi(e)?e.g.statusText:""}catch(e){s=""}e.j=s+" ["+e.da()+"]",mi(e)}}finally{yi(e)}}}function yi(e,t){if(e.g){vi(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||yn(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function vi(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(ut.clearTimeout(e.A),e.A=null)}function wi(e){return e.g?e.g.readyState:0}function bi(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case hi:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function _i(e){let t="";return Jt(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Ei(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=_i(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Rr(e,t,n))}function Ii(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ti(e){this.Ga=0,this.j=[],this.l=new Vn,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ii("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ii("baseRetryDelayMs",5e3,e),this.hb=Ii("retryDelaySeedMs",1e4,e),this.eb=Ii("forwardChannelMaxRetries",2,e),this.xa=Ii("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Hr(e&&e.concurrentRequestLimit),this.Ja=new ei,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Ci(e){if(ki(e),3==e.H){var t=e.W++,n=Cr(e.I);if(Rr(n,"SID",e.K),Rr(n,"RID",t),Rr(n,"TYPE","terminate"),xi(e,n),(t=new or(e,e.l,t)).L=2,t.A=xr(Cr(n)),n=!1,ut.navigator&&ut.navigator.sendBeacon)try{n=ut.navigator.sendBeacon(t.A.toString(),"")}catch(e){}!n&&ut.Image&&((new Image).src=t.A,n=!0),n||(t.g=zi(t.l,null),t.g.ha(t.A)),t.G=Date.now(),gr(t)}ji(e)}function Si(e){e.g&&(Pi(e),e.g.cancel(),e.g=null)}function ki(e){Si(e),e.u&&(ut.clearTimeout(e.u),e.u=null),Mi(e),e.i.cancel(),e.m&&("number"==typeof e.m&&ut.clearTimeout(e.m),e.m=null)}function Ai(e){if(!Gr(e.i)&&!e.m){e.m=!0;var t=e.Na;Cn||An(),Sn||(Cn(),Sn=!0),kn.add(t,e),e.C=0}}function Ri(e,t){var n;n=t?t.m:e.W++;const r=Cr(e.I);Rr(r,"SID",e.K),Rr(r,"RID",n),Rr(r,"AID",e.V),xi(e,r),e.o&&e.s&&Ei(r,e.o,e.s),n=new or(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Di(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Jr(e.i,n),hr(n,r,t)}function xi(e,t){e.na&&Jt(e.na,(function(e,n){Rr(t,n,e)})),e.h&&Er({},(function(e,n){Rr(t,n,e)}))}function Di(e,t,n){n=Math.min(e.j.length,n);var r=e.h?yt(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{ti(a,e,"req"+n+"_")}catch(e){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Ni(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Cn||An(),Sn||(Cn(),Sn=!0),kn.add(t,e),e.A=0}}function Oi(e){return!(e.g||e.u||3<=e.A||(e.ba++,e.u=Qn(yt(e.Ma,e),Fi(e,e.A)),e.A++,0))}function Pi(e){null!=e.B&&(ut.clearTimeout(e.B),e.B=null)}function Li(e){e.g=new or(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Cr(e.wa);Rr(t,"RID","rpc"),Rr(t,"SID",e.K),Rr(t,"AID",e.V),Rr(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Rr(t,"TO",e.qa),Rr(t,"TYPE","xmlhttp"),xi(e,t),e.o&&e.s&&Ei(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=xr(Cr(t)),n.u=null,n.S=!0,dr(n,e)}function Mi(e){null!=e.v&&(ut.clearTimeout(e.v),e.v=null)}function Ui(e,t){var n=null;if(e.g==t){Mi(e),Pi(e),e.g=null;var r=2}else{if(!Qr(e.i,t))return;n=t.F,Xr(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;yn(r=qn(),new Wn(r,n)),Ai(e)}else Ni(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Wr(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.j=t.F.concat(e.j),0):1==e.H||2==e.H||e.C>=(e.cb?0:e.eb)||(e.m=Qn(yt(e.Na,e,t),Fi(e,e.C)),e.C++,0)))}(e,t)||2==r&&Oi(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Vi(e,5);break;case 4:Vi(e,10);break;case 3:Vi(e,6);break;default:Vi(e,2)}}function Fi(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Vi(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=yt(e.pb,e);n||(n=new Tr("//www.google.com/images/cleardot.gif"),ut.location&&"http"==ut.location.protocol||Sr(n,"https"),xr(n)),function(e,t){const n=new Vn;if(ut.Image){const r=new Image;r.onload=vt(ni,n,r,"TestLoadImage: loaded",!0,t),r.onerror=vt(ni,n,r,"TestLoadImage: error",!1,t),r.onabort=vt(ni,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=vt(ni,n,r,"TestLoadImage: timeout",!1,t),ut.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Gn(2);e.H=0,e.h&&e.h.za(t),ji(e),ki(e)}function ji(e){if(e.H=0,e.ma=[],e.h){const t=Yr(e.i);0==t.length&&0==e.j.length||(It(e.ma,t),It(e.ma,e.j),e.i.i.length=0,Et(e.j),e.j.length=0),e.h.ya()}}function Bi(e,t,n){var r=n instanceof Tr?Cr(n):new Tr(n);if(""!=r.g)t&&(r.g=t+"."+r.g),kr(r,r.m);else{var i=ut.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new Tr(null);r&&Sr(s,r),t&&(s.g=t),i&&kr(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Rr(r,n,t),Rr(r,"VER",e.ra),xi(e,r),r}function zi(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new ui(new ri({ob:n})):new ui(e.va)).Oa(e.J),t}function qi(){}function $i(){if(Pt&&!(10<=Number(qt)))throw Error("Environmental error: no available transport.")}function Hi(e,t){gn.call(this),this.g=new Ti(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!St(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!St(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new Wi(this)}function Ki(e){rr.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Gi(){ir.call(this),this.status=1}function Wi(e){this.g=e}function Qi(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Ji(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function Xi(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(ot=ui.prototype).Oa=function(e){this.M=e},ot.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():tr.g(),this.C=this.u?Zn(this.u):Zn(tr),this.g.onreadystatechange=yt(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(e){return void pi(this,e)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=ut.FormData&&e instanceof ut.FormData,!(0<=_t(fi,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[e,t]of n)this.g.setRequestHeader(e,t);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{vi(this),0<this.B&&((this.L=function(e){return Pt&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=yt(this.ua,this)):this.A=Nn(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){pi(this,e)}},ot.ua=function(){void 0!==lt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,yn(this,"timeout"),this.abort(8))},ot.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,yn(this,"complete"),yn(this,"abort"),yi(this))},ot.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),yi(this,!0)),ui.$.N.call(this)},ot.La=function(){this.s||(this.G||this.v||this.l?gi(this):this.kb())},ot.kb=function(){gi(this)},ot.isActive=function(){return!!this.g},ot.da=function(){try{return 2<wi(this)?this.g.status:-1}catch(e){return-1}},ot.ja=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},ot.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),li(t)}},ot.Ia=function(){return this.m},ot.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ot=Ti.prototype).ra=8,ot.H=1,ot.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new or(this,this.l,e);let s=this.s;if(this.U&&(s?(s=Xt(s),Zt(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Di(this,i,t),Rr(n=Cr(this.I),"RID",e),Rr(n,"CVER",22),this.F&&Rr(n,"X-HTTP-Session-Id",this.F),xi(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(_i(s)))+"&"+t:this.o&&Ei(n,this.o,s)),Jr(this.i,i),this.bb&&Rr(n,"TYPE","init"),this.P?(Rr(n,"$req",t),Rr(n,"SID","null"),i.aa=!0,hr(i,n,null)):hr(i,n,t),this.H=2}}else 3==this.H&&(e?Ri(this,e):0==this.j.length||Gr(this.i)||Ri(this))},ot.Ma=function(){if(this.u=null,Li(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Qn(yt(this.jb,this),e)}},ot.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Gn(10),Si(this),Li(this))},ot.ib=function(){null!=this.v&&(this.v=null,Si(this),Oi(this),Gn(19))},ot.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Gn(2)):(this.l.info("Failed to ping google.com"),Gn(1))},ot.isActive=function(){return!!this.h&&this.h.isActive(this)},(ot=qi.prototype).Ba=function(){},ot.Aa=function(){},ot.za=function(){},ot.ya=function(){},ot.isActive=function(){return!0},ot.Va=function(){},$i.prototype.g=function(e,t){return new Hi(e,t)},wt(Hi,gn),Hi.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Gn(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Bi(e,null,e.Y),Ai(e)},Hi.prototype.close=function(){Ci(this.g)},Hi.prototype.u=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=wn(e),e=n);t.j.push(new class{constructor(e,t){this.g=e,this.map=t}}(t.fb++,e)),3==t.H&&Ai(t)},Hi.prototype.N=function(){this.g.h=null,delete this.j,Ci(this.g),delete this.g,Hi.$.N.call(this)},wt(Ki,rr),wt(Gi,ir),wt(Wi,qi),Wi.prototype.Ba=function(){yn(this.g,"a")},Wi.prototype.Aa=function(e){yn(this.g,new Ki(e))},Wi.prototype.za=function(e){yn(this.g,new Gi)},Wi.prototype.ya=function(){yn(this.g,"b")},wt(Qi,(function(){this.blockSize=-1})),Qi.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Qi.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)Ji(this,e,s),s+=this.blockSize;if("string"==typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){Ji(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){Ji(this,r),i=0;break}}this.h=i,this.i+=t},Qi.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Yi={};function Zi(e){return-128<=e&&128>e?function(e,t){var n=Yi;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=function(e){return new Xi([0|e],0>e?-1:0)}(e)}(e):new Xi([0|e],0>e?-1:0)}function es(e){if(isNaN(e)||!isFinite(e))return ns;if(0>e)return as(es(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=ts;return new Xi(t,0)}var ts=4294967296,ns=Zi(0),rs=Zi(1),is=Zi(16777216);function ss(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function os(e){return-1==e.h}function as(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Xi(n,~e.h).add(rs)}function cs(e,t){return e.add(as(t))}function ls(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function us(e,t){this.g=e,this.h=t}function hs(e,t){if(ss(t))throw Error("division by zero");if(ss(e))return new us(ns,ns);if(os(e))return t=hs(as(e),t),new us(as(t.g),as(t.h));if(os(t))return t=hs(e,as(t)),new us(as(t.g),t.h);if(30<e.g.length){if(os(e)||os(t))throw Error("slowDivide_ only works with positive integers.");for(var n=rs,r=t;0>=r.X(e);)n=ds(n),r=ds(r);var i=fs(n,1),s=fs(r,1);for(r=fs(r,2),n=fs(n,2);!ss(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=fs(r,1),n=fs(n,1)}return t=cs(e,i.R(t)),new us(i,t)}for(i=ns;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=es(n)).R(t);os(o)||0<o.X(e);)o=(s=es(n-=r)).R(t);ss(s)&&(s=rs),i=i.add(s),e=cs(e,o)}return new us(i,e)}function ds(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Xi(n,e.h)}function fs(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Xi(i,e.h)}(ot=Xi.prototype).ea=function(){if(os(this))return-as(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:ts+r)*t,t*=ts}return e},ot.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(ss(this))return"0";if(os(this))return"-"+as(this).toString(e);for(var t=es(Math.pow(e,6)),n=this,r="";;){var i=hs(n,t).g,s=((0<(n=cs(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(ss(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},ot.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},ot.X=function(e){return os(e=cs(this,e))?-1:ss(e)?0:1},ot.abs=function(){return os(this)?as(this):this},ot.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Xi(n,-2147483648&n[n.length-1]?-1:0)},ot.R=function(e){if(ss(this)||ss(e))return ns;if(os(this))return os(e)?as(this).R(as(e)):as(as(this).R(e));if(os(e))return as(this.R(as(e)));if(0>this.X(is)&&0>e.X(is))return es(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,c=65535&e.D(i);n[2*r+2*i]+=o*c,ls(n,2*r+2*i),n[2*r+2*i+1]+=s*c,ls(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,ls(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,ls(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Xi(n,0)},ot.gb=function(e){return hs(this,e).h},ot.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Xi(n,this.h&e.h)},ot.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Xi(n,this.h|e.h)},ot.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Xi(n,this.h^e.h)},$i.prototype.createWebChannel=$i.prototype.g,Hi.prototype.send=Hi.prototype.u,Hi.prototype.open=Hi.prototype.m,Hi.prototype.close=Hi.prototype.close,Jn.NO_ERROR=0,Jn.TIMEOUT=8,Jn.HTTP_ERROR=6,Xn.COMPLETE="complete",er.EventType=nr,nr.OPEN="a",nr.CLOSE="b",nr.ERROR="c",nr.MESSAGE="d",gn.prototype.listen=gn.prototype.O,ui.prototype.listenOnce=ui.prototype.P,ui.prototype.getLastError=ui.prototype.Sa,ui.prototype.getLastErrorCode=ui.prototype.Ia,ui.prototype.getStatus=ui.prototype.da,ui.prototype.getResponseJson=ui.prototype.Wa,ui.prototype.getResponseText=ui.prototype.ja,ui.prototype.send=ui.prototype.ha,ui.prototype.setWithCredentials=ui.prototype.Oa,Qi.prototype.digest=Qi.prototype.l,Qi.prototype.reset=Qi.prototype.reset,Qi.prototype.update=Qi.prototype.j,Xi.prototype.add=Xi.prototype.add,Xi.prototype.multiply=Xi.prototype.R,Xi.prototype.modulo=Xi.prototype.gb,Xi.prototype.compare=Xi.prototype.X,Xi.prototype.toNumber=Xi.prototype.ea,Xi.prototype.toString=Xi.prototype.toString,Xi.prototype.getBits=Xi.prototype.D,Xi.fromNumber=es,Xi.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return as(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=es(Math.pow(n,8)),i=ns,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=es(Math.pow(n,o)),i=i.R(o).add(es(a))):i=(i=i.R(r)).add(es(a))}return i};var ps=ct.createWebChannelTransport=function(){return new $i},ms=ct.getStatEventTarget=function(){return qn()},gs=ct.ErrorCode=Jn,ys=ct.EventType=Xn,vs=ct.Event=Bn,ws=ct.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},bs=ct.FetchXmlHttpFactory=ri,_s=ct.WebChannel=er,Es=ct.XhrIo=ui,Is=ct.Md5=Qi,Ts=ct.Integer=Xi;const Cs="@firebase/firestore";class Ss{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ss.UNAUTHENTICATED=new Ss(null),Ss.GOOGLE_CREDENTIALS=new Ss("google-credentials-uid"),Ss.FIRST_PARTY=new Ss("first-party-uid"),Ss.MOCK_USER=new Ss("mock-user");let ks="10.11.1";const As=new he("@firebase/firestore");function Rs(){return As.logLevel}function xs(e,...t){if(As.logLevel<=se.DEBUG){const n=t.map(Os);As.debug(`Firestore (${ks}): ${e}`,...n)}}function Ds(e,...t){if(As.logLevel<=se.ERROR){const n=t.map(Os);As.error(`Firestore (${ks}): ${e}`,...n)}}function Ns(e,...t){if(As.logLevel<=se.WARN){const n=t.map(Os);As.warn(`Firestore (${ks}): ${e}`,...n)}}function Os(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Ps(e="Unexpected state"){const t=`FIRESTORE (${ks}) INTERNAL ASSERTION FAILED: `+e;throw Ds(t),new Error(t)}function Ls(e,t){e||Ps()}function Ms(e,t){return e}const Us={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fs extends F{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Vs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class js{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Bs{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ss.UNAUTHENTICATED)))}shutdown(){}}class zs{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class qs{constructor(e){this.t=e,this.currentUser=Ss.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Vs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Vs,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{xs("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(xs("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Vs)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(xs("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ls("string"==typeof t.accessToken),new js(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ls(null===e||"string"==typeof e),new Ss(e)}}class $s{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Ss.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Hs{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new $s(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Ss.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ks{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Gs{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&xs("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,xs("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{xs("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):xs("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Ls("string"==typeof e.token),this.R=e.token,new Ks(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ws(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}class Qs{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=Ws(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length))}return n}}function Js(e,t){return e<t?-1:e>t?1:0}function Xs(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class Ys{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Fs(Us.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Fs(Us.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Fs(Us.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Fs(Us.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ys.fromMillis(Date.now())}static fromDate(e){return Ys.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Ys(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Js(this.nanoseconds,e.nanoseconds):Js(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Zs{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Zs(e)}static min(){return new Zs(new Ys(0,0))}static max(){return new Zs(new Ys(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class eo{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ps(),void 0===n?n=e.length-t:n>e.length-t&&Ps(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===eo.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof eo?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class to extends eo{construct(e,t,n){return new to(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Fs(Us.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new to(t)}static emptyPath(){return new to([])}}const no=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ro extends eo{construct(e,t,n){return new ro(e,t,n)}static isValidIdentifier(e){return no.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ro.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ro(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Fs(Us.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Fs(Us.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Fs(Us.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Fs(Us.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ro(t)}static emptyPath(){return new ro([])}}class io{constructor(e){this.path=e}static fromPath(e){return new io(to.fromString(e))}static fromName(e){return new io(to.fromString(e).popFirst(5))}static empty(){return new io(to.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===to.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return to.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new io(new to(e.slice()))}}function so(e){return new oo(e.readTime,e.key,-1)}class oo{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new oo(Zs.min(),io.empty(),-1)}static max(){return new oo(Zs.max(),io.empty(),-1)}}function ao(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=io.comparator(e.documentKey,t.documentKey),0!==n?n:Js(e.largestBatchId,t.largestBatchId))}const co="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lo{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function uo(e){if(e.code!==Us.FAILED_PRECONDITION||e.message!==co)throw e;xs("LocalStore","Unexpectedly lost primary lease")}class ho{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ps(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ho(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ho?t:ho.resolve(t)}catch(e){return ho.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ho.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ho.reject(t)}static resolve(e){return new ho(((t,n)=>{t(e)}))}static reject(e){return new ho(((t,n)=>{n(e)}))}static waitFor(e){return new ho(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=ho.resolve(!1);for(const n of e)t=t.next((e=>e?ho.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new ho(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const c=a;t(e[c]).next((e=>{s[c]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new ho(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function fo(e){return"IndexedDbTransactionError"===e.name}class po{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function mo(e){return null==e}function go(e){return 0===e&&1/e==-1/0}po.oe=-1;function yo(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function vo(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function wo(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class bo{constructor(e,t){this.comparator=e,this.root=t||Eo.EMPTY}insert(e,t){return new bo(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Eo.BLACK,null,null))}remove(e){return new bo(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Eo.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _o(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _o(this.root,e,this.comparator,!1)}getReverseIterator(){return new _o(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _o(this.root,e,this.comparator,!0)}}class _o{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Eo{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Eo.RED,this.left=null!=r?r:Eo.EMPTY,this.right=null!=i?i:Eo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Eo(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Eo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Eo.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Eo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Eo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ps();if(this.right.isRed())throw Ps();const e=this.left.check();if(e!==this.right.check())throw Ps();return e+(this.isRed()?0:1)}}Eo.EMPTY=null,Eo.RED=!0,Eo.BLACK=!1,Eo.EMPTY=new class{constructor(){this.size=0}get key(){throw Ps()}get value(){throw Ps()}get color(){throw Ps()}get left(){throw Ps()}get right(){throw Ps()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Eo(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Io{constructor(e){this.comparator=e,this.data=new bo(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new To(this.data.getIterator())}getIteratorFrom(e){return new To(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Io))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Io(this.comparator);return t.data=e,t}}class To{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Co{constructor(e){this.fields=e,e.sort(ro.comparator)}static empty(){return new Co([])}unionWith(e){let t=new Io(ro.comparator);for(const e of this.fields)t=t.add(e);for(const n of e)t=t.add(n);return new Co(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xs(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class So extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ko{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new So("Invalid base64 string: "+e):e}}(e);return new ko(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ko(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Js(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ko.EMPTY_BYTE_STRING=new ko("");const Ao=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ro(e){if(Ls(!!e),"string"==typeof e){let t=0;const n=Ao.exec(e);if(Ls(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:xo(e.seconds),nanos:xo(e.nanos)}}function xo(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Do(e){return"string"==typeof e?ko.fromBase64String(e):ko.fromUint8Array(e)}function No(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Oo(e){const t=e.mapValue.fields.__previous_value__;return No(t)?Oo(t):t}function Po(e){const t=Ro(e.mapValue.fields.__local_write_time__.timestampValue);return new Ys(t.seconds,t.nanos)}class Lo{constructor(e,t,n,r,i,s,o,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class Mo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Mo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Mo&&e.projectId===this.projectId&&e.database===this.database}}const Uo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Fo(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?No(e)?4:Xo(e)?9007199254740991:10:Ps()}function Vo(e,t){if(e===t)return!0;const n=Fo(e);if(n!==Fo(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Po(e).isEqual(Po(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Ro(e.timestampValue),r=Ro(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Do(e.bytesValue).isEqual(Do(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return xo(e.geoPointValue.latitude)===xo(t.geoPointValue.latitude)&&xo(e.geoPointValue.longitude)===xo(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return xo(e.integerValue)===xo(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=xo(e.doubleValue),r=xo(t.doubleValue);return n===r?go(n)===go(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Xs(e.arrayValue.values||[],t.arrayValue.values||[],Vo);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(yo(n)!==yo(r))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===r[e]||!Vo(n[e],r[e])))return!1;return!0}(e,t);default:return Ps()}}function jo(e,t){return void 0!==(e.values||[]).find((e=>Vo(e,t)))}function Bo(e,t){if(e===t)return 0;const n=Fo(e),r=Fo(t);if(n!==r)return Js(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Js(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=xo(e.integerValue||e.doubleValue),r=xo(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return zo(e.timestampValue,t.timestampValue);case 4:return zo(Po(e),Po(t));case 5:return Js(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Do(e),r=Do(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let e=0;e<n.length&&e<r.length;e++){const t=Js(n[e],r[e]);if(0!==t)return t}return Js(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Js(xo(e.latitude),xo(t.latitude));return 0!==n?n:Js(xo(e.longitude),xo(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){const t=Bo(n[e],r[e]);if(t)return t}return Js(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Uo.mapValue&&t===Uo.mapValue)return 0;if(e===Uo.mapValue)return 1;if(t===Uo.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let e=0;e<r.length&&e<s.length;++e){const t=Js(r[e],s[e]);if(0!==t)return t;const o=Bo(n[r[e]],i[s[e]]);if(0!==o)return o}return Js(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Ps()}}function zo(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Js(e,t);const n=Ro(e),r=Ro(t),i=Js(n.seconds,r.seconds);return 0!==i?i:Js(n.nanos,r.nanos)}function qo(e){return $o(e)}function $o(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Ro(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Do(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return io.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=$o(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${$o(e.fields[i])}`;return n+"}"}(e.mapValue):Ps()}function Ho(e){return!!e&&"integerValue"in e}function Ko(e){return!!e&&"arrayValue"in e}function Go(e){return!!e&&"nullValue"in e}function Wo(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Qo(e){return!!e&&"mapValue"in e}function Jo(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return vo(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Jo(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Jo(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Xo(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class Yo{constructor(e){this.value=e}static empty(){return new Yo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Qo(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jo(t)}setAll(e){let t=ro.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Jo(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Qo(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Qo(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){vo(t,((t,n)=>e[t]=n));for(const t of n)delete e[t]}clone(){return new Yo(Jo(this.value))}}function Zo(e){const t=[];return vo(e.fields,((e,n)=>{const r=new ro([e]);if(Qo(n)){const e=Zo(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Co(t)}class ea{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new ea(e,0,Zs.min(),Zs.min(),Zs.min(),Yo.empty(),0)}static newFoundDocument(e,t,n,r){return new ea(e,1,t,Zs.min(),n,r,0)}static newNoDocument(e,t){return new ea(e,2,t,Zs.min(),Zs.min(),Yo.empty(),0)}static newUnknownDocument(e,t){return new ea(e,3,t,Zs.min(),Zs.min(),Yo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Zs.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Zs.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ea&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ea(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ta{constructor(e,t){this.position=e,this.inclusive=t}}function na(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?io.comparator(io.fromName(o.referenceValue),n.key):Bo(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function ra(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Vo(e.position[n],t.position[n]))return!1;return!0}class ia{constructor(e,t="asc"){this.field=e,this.dir=t}}function sa(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class oa{}class aa extends oa{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new pa(e,t,n):"array-contains"===t?new va(e,n):"in"===t?new wa(e,n):"not-in"===t?new ba(e,n):"array-contains-any"===t?new _a(e,n):new aa(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new ma(e,n):new ga(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Bo(t,this.value)):null!==t&&Fo(this.value)===Fo(t)&&this.matchesComparison(Bo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ps()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ca extends oa{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new ca(e,t)}matches(e){return la(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function la(e){return"and"===e.op}function ua(e){return function(e){for(const t of e.filters)if(t instanceof ca)return!1;return!0}(e)&&la(e)}function ha(e){if(e instanceof aa)return e.field.canonicalString()+e.op.toString()+qo(e.value);if(ua(e))return e.filters.map((e=>ha(e))).join(",");{const t=e.filters.map((e=>ha(e))).join(",");return`${e.op}(${t})`}}function da(e,t){return e instanceof aa?function(e,t){return t instanceof aa&&e.op===t.op&&e.field.isEqual(t.field)&&Vo(e.value,t.value)}(e,t):e instanceof ca?function(e,t){return t instanceof ca&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&da(n,t.filters[r])),!0)}(e,t):void Ps()}function fa(e){return e instanceof aa?function(e){return`${e.field.canonicalString()} ${e.op} ${qo(e.value)}`}(e):e instanceof ca?function(e){return e.op.toString()+" {"+e.getFilters().map(fa).join(" ,")+"}"}(e):"Filter"}class pa extends aa{constructor(e,t,n){super(e,t,n),this.key=io.fromName(n.referenceValue)}matches(e){const t=io.comparator(e.key,this.key);return this.matchesComparison(t)}}class ma extends aa{constructor(e,t){super(e,"in",t),this.keys=ya(0,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class ga extends aa{constructor(e,t){super(e,"not-in",t),this.keys=ya(0,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function ya(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>io.fromName(e.referenceValue)))}class va extends aa{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ko(t)&&jo(t.arrayValue,this.value)}}class wa extends aa{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&jo(this.value.arrayValue,t)}}class ba extends aa{constructor(e,t){super(e,"not-in",t)}matches(e){if(jo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!jo(this.value.arrayValue,t)}}class _a extends aa{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ko(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>jo(this.value.arrayValue,e)))}}class Ea{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ue=null}}function Ia(e,t=null,n=[],r=[],i=null,s=null,o=null){return new Ea(e,t,n,r,i,s,o)}function Ta(e){const t=Ms(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>ha(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),mo(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>qo(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>qo(e))).join(",")),t.ue=e}return t.ue}function Ca(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!sa(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!da(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ra(e.startAt,t.startAt)&&ra(e.endAt,t.endAt)}function Sa(e){return io.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class ka{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Aa(e){return new ka(e)}function Ra(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function xa(e){const t=Ms(e);if(null===t.ce){t.ce=[];const e=new Set;for(const n of t.explicitOrderBy)t.ce.push(n),e.add(n.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Io(ro.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new ia(r,n))})),e.has(ro.keyField().canonicalString())||t.ce.push(new ia(ro.keyField(),n))}return t.ce}function Da(e){const t=Ms(e);return t.le||(t.le=function(e,t){if("F"===e.limitType)return Ia(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new ia(e.field,t)}));const n=e.endAt?new ta(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ta(e.startAt.position,e.startAt.inclusive):null;return Ia(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}(t,xa(e))),t.le}function Na(e,t,n){return new ka(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Oa(e,t){return Ca(Da(e),Da(t))&&e.limitType===t.limitType}function Pa(e){return`${Ta(Da(e))}|lt:${e.limitType}`}function La(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>fa(e))).join(", ")}]`),mo(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>qo(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>qo(e))).join(",")),`Target(${t})`}(Da(e))}; limitType=${e.limitType})`}function Ma(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):io.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of xa(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=na(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,xa(e),t)||e.endAt&&!function(e,t,n){const r=na(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,xa(e),t))}(e,t)}function Ua(e){return(t,n)=>{let r=!1;for(const i of xa(e)){const e=Fa(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Fa(e,t,n){const r=e.field.isKeyField()?io.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Bo(r,i):Ps()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ps()}}class Va{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,r]of n)if(this.equalsFn(t,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){vo(this.inner,((t,n)=>{for(const[t,r]of n)e(t,r)}))}isEmpty(){return wo(this.inner)}size(){return this.innerSize}}const ja=new bo(io.comparator);function Ba(){return ja}const za=new bo(io.comparator);function qa(...e){let t=za;for(const n of e)t=t.insert(n.key,n);return t}function $a(e){let t=za;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Ha(){return Ga()}function Ka(){return Ga()}function Ga(){return new Va((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Wa=new bo(io.comparator),Qa=new Io(io.comparator);function Ja(...e){let t=Qa;for(const n of e)t=t.add(n);return t}const Xa=new Io(Js);function Ya(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:go(t)?"-0":t}}function Za(e){return{integerValue:""+e}}function ec(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!go(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}(t)?Za(t):Ya(e,t)}class tc{constructor(){this._=void 0}}function nc(e,t,n){return e instanceof sc?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&No(t)&&(t=Oo(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof oc?ac(e,t):e instanceof cc?lc(e,t):function(e,t){const n=ic(e,t),r=hc(n)+hc(e.Pe);return Ho(n)&&Ho(e.Pe)?Za(r):Ya(e.serializer,r)}(e,t)}function rc(e,t,n){return e instanceof oc?ac(e,t):e instanceof cc?lc(e,t):n}function ic(e,t){return e instanceof uc?function(e){return Ho(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class sc extends tc{}class oc extends tc{constructor(e){super(),this.elements=e}}function ac(e,t){const n=dc(t);for(const t of e.elements)n.some((e=>Vo(e,t)))||n.push(t);return{arrayValue:{values:n}}}class cc extends tc{constructor(e){super(),this.elements=e}}function lc(e,t){let n=dc(t);for(const t of e.elements)n=n.filter((e=>!Vo(e,t)));return{arrayValue:{values:n}}}class uc extends tc{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function hc(e){return xo(e.integerValue||e.doubleValue)}function dc(e){return Ko(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class fc{constructor(e,t){this.version=e,this.transformResults=t}}class pc{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new pc}static exists(e){return new pc(void 0,e)}static updateTime(e){return new pc(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class gc{}function yc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new kc(e.key,pc.none()):new Ec(e.key,e.data,pc.none());{const n=e.data,r=Yo.empty();let i=new Io(ro.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Ic(e.key,r,new Co(i.toArray()),pc.none())}}function vc(e,t,n){e instanceof Ec?function(e,t,n){const r=e.value.clone(),i=Cc(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Ic?function(e,t,n){if(!mc(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Cc(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Tc(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function wc(e,t,n,r){return e instanceof Ec?function(e,t,n,r){if(!mc(e.precondition,t))return n;const i=e.value.clone(),s=Sc(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Ic?function(e,t,n,r){if(!mc(e.precondition,t))return n;const i=Sc(e.fieldTransforms,r,t),s=t.data;return s.setAll(Tc(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return mc(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function bc(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=ic(r.transform,e||null);null!=i&&(null===n&&(n=Yo.empty()),n.set(r.field,i))}return n||null}function _c(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Xs(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof oc&&t instanceof oc||e instanceof cc&&t instanceof cc?Xs(e.elements,t.elements,Vo):e instanceof uc&&t instanceof uc?Vo(e.Pe,t.Pe):e instanceof sc&&t instanceof sc}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ec extends gc{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ic extends gc{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Tc(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Cc(e,t,n){const r=new Map;Ls(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,rc(o,a,n[i]))}return r}function Sc(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,nc(e,s,t))}return r}class kc extends gc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ac extends gc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Rc{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const r=this.mutations[t];r.key.isEqual(e.key)&&vc(r,e,n[t])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=wc(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=wc(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Ka();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=yc(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Zs.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ja())}isEqual(e){return this.batchId===e.batchId&&Xs(this.mutations,e.mutations,((e,t)=>_c(e,t)))&&Xs(this.baseMutations,e.baseMutations,((e,t)=>_c(e,t)))}}class xc{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ls(e.mutations.length===n.length);let r=Wa;const i=e.mutations;for(let e=0;e<i.length;e++)r=r.insert(i[e].key,n[e].version);return new xc(e,t,n,r)}}class Dc{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Nc{constructor(e,t){this.count=e,this.unchangedNames=t}}var Oc,Pc;function Lc(e){if(void 0===e)return Ds("GRPC error has no .code"),Us.UNKNOWN;switch(e){case Oc.OK:return Us.OK;case Oc.CANCELLED:return Us.CANCELLED;case Oc.UNKNOWN:return Us.UNKNOWN;case Oc.DEADLINE_EXCEEDED:return Us.DEADLINE_EXCEEDED;case Oc.RESOURCE_EXHAUSTED:return Us.RESOURCE_EXHAUSTED;case Oc.INTERNAL:return Us.INTERNAL;case Oc.UNAVAILABLE:return Us.UNAVAILABLE;case Oc.UNAUTHENTICATED:return Us.UNAUTHENTICATED;case Oc.INVALID_ARGUMENT:return Us.INVALID_ARGUMENT;case Oc.NOT_FOUND:return Us.NOT_FOUND;case Oc.ALREADY_EXISTS:return Us.ALREADY_EXISTS;case Oc.PERMISSION_DENIED:return Us.PERMISSION_DENIED;case Oc.FAILED_PRECONDITION:return Us.FAILED_PRECONDITION;case Oc.ABORTED:return Us.ABORTED;case Oc.OUT_OF_RANGE:return Us.OUT_OF_RANGE;case Oc.UNIMPLEMENTED:return Us.UNIMPLEMENTED;case Oc.DATA_LOSS:return Us.DATA_LOSS;default:return Ps()}}(Pc=Oc||(Oc={}))[Pc.OK=0]="OK",Pc[Pc.CANCELLED=1]="CANCELLED",Pc[Pc.UNKNOWN=2]="UNKNOWN",Pc[Pc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pc[Pc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pc[Pc.NOT_FOUND=5]="NOT_FOUND",Pc[Pc.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pc[Pc.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pc[Pc.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pc[Pc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pc[Pc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pc[Pc.ABORTED=10]="ABORTED",Pc[Pc.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pc[Pc.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pc[Pc.INTERNAL=13]="INTERNAL",Pc[Pc.UNAVAILABLE=14]="UNAVAILABLE",Pc[Pc.DATA_LOSS=15]="DATA_LOSS";const Mc=new Ts([4294967295,4294967295],0);function Uc(e){const t=(new TextEncoder).encode(e),n=new Is;return n.update(t),new Uint8Array(n.digest())}function Fc(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Ts([n,r],0),new Ts([i,s],0)]}class Vc{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new jc(`Invalid padding: ${t}`);if(n<0)throw new jc(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new jc(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new jc(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Ts.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(Ts.fromNumber(n)));return 1===r.compare(Mc)&&(r=new Ts([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Uc(e),[n,r]=Fc(t);for(let e=0;e<this.hashCount;e++){const t=this.Ee(n,r,e);if(!this.de(t))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Vc(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Ie)return;const t=Uc(e),[n,r]=Fc(t);for(let e=0;e<this.hashCount;e++){const t=this.Ee(n,r,e);this.Ae(t)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class jc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Bc{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,zc.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Bc(Zs.min(),r,new bo(Js),Ba(),Ja())}}class zc{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new zc(n,t,Ja(),Ja(),Ja())}}class qc{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class $c{constructor(e,t){this.targetId=e,this.me=t}}class Hc{constructor(e,t,n=ko.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Kc{constructor(){this.fe=0,this.ge=Qc(),this.pe=ko.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Ja(),t=Ja(),n=Ja();return this.ge.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ps()}})),new zc(this.pe,this.ye,e,t,n)}ve(){this.we=!1,this.ge=Qc()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ls(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Gc{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ba(),this.qe=Wc(),this.Qe=new bo(Js)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:Ps()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(Sa(i))if(0===n){const e=new io(i.path);this.Ue(t,e,ea.newNoDocument(e,Zs.min()))}else Ls(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Do(n).toUint8Array()}catch(e){if(e instanceof So)return Ns("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Vc(s,r,i)}catch(e){return Ns(e instanceof jc?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ie?null:o}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.tt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.Ue(t,n,null),r++)})),r}rt(e){const t=new Map;this.Be.forEach(((n,r)=>{const i=this.Je(r);if(i){if(n.current&&Sa(i.target)){const t=new io(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,ea.newNoDocument(t,e))}n.be&&(t.set(r,n.Ce()),n.ve())}}));let n=Ja();this.qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const r=new Bc(e,t,this.Qe,this.ke,n);return this.ke=Ba(),this.qe=Wc(),this.Qe=new bo(Js),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Kc,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Io(Js),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||xs("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Kc),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Wc(){return new bo(io.comparator)}function Qc(){return new bo(io.comparator)}const Jc={asc:"ASCENDING",desc:"DESCENDING"},Xc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Yc={and:"AND",or:"OR"};class Zc{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function el(e,t){return e.useProto3Json||mo(t)?t:{value:t}}function tl(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function nl(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function rl(e,t){return tl(e,t.toTimestamp())}function il(e){return Ls(!!e),Zs.fromTimestamp(function(e){const t=Ro(e);return new Ys(t.seconds,t.nanos)}(e))}function sl(e,t){return ol(e,t).canonicalString()}function ol(e,t){const n=function(e){return new to(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function al(e){const t=to.fromString(e);return Ls(Cl(t)),t}function cl(e,t){return sl(e.databaseId,t.path)}function ll(e,t){const n=al(t);if(n.get(1)!==e.databaseId.projectId)throw new Fs(Us.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Fs(Us.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new io(dl(n))}function ul(e,t){return sl(e.databaseId,t)}function hl(e){return new to(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function dl(e){return Ls(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function fl(e,t,n){return{name:cl(e,t),fields:n.value.mapValue.fields}}function pl(e,t){return{documents:[ul(e,t.path)]}}function ml(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ul(e,i);const s=function(e){if(0!==e.length)return Il(ca.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:_l(e.field),direction:vl(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=el(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function gl(e){let t=function(e){const t=al(e);return 4===t.length?to.emptyPath():dl(t)}(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ls(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=yl(e);return t instanceof ca&&ua(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new ia(El(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,mo(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new ta(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new ta(n,t)}(n.endAt)),function(e,t,n,r,i,s,o,a){return new ka(e,t,n,r,i,s,o,a)}(t,i,o,s,a,"F",c,l)}function yl(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=El(e.unaryFilter.field);return aa.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=El(e.unaryFilter.field);return aa.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=El(e.unaryFilter.field);return aa.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=El(e.unaryFilter.field);return aa.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ps()}}(e):void 0!==e.fieldFilter?function(e){return aa.create(El(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ps()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return ca.create(e.compositeFilter.filters.map((e=>yl(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ps()}}(e.compositeFilter.op))}(e):Ps()}function vl(e){return Jc[e]}function wl(e){return Xc[e]}function bl(e){return Yc[e]}function _l(e){return{fieldPath:e.canonicalString()}}function El(e){return ro.fromServerFormat(e.fieldPath)}function Il(e){return e instanceof aa?function(e){if("=="===e.op){if(Wo(e.value))return{unaryFilter:{field:_l(e.field),op:"IS_NAN"}};if(Go(e.value))return{unaryFilter:{field:_l(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Wo(e.value))return{unaryFilter:{field:_l(e.field),op:"IS_NOT_NAN"}};if(Go(e.value))return{unaryFilter:{field:_l(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_l(e.field),op:wl(e.op),value:e.value}}}(e):e instanceof ca?function(e){const t=e.getFilters().map((e=>Il(e)));return 1===t.length?t[0]:{compositeFilter:{op:bl(e.op),filters:t}}}(e):Ps()}function Tl(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Cl(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Sl{constructor(e,t,n,r,i=Zs.min(),s=Zs.min(),o=ko.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Sl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Sl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Sl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Sl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class kl{constructor(e){this.ut=e}}function Al(e){const t=gl({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Na(t,t.limit,"L"):t}class Rl{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(xo(e.integerValue));else if("doubleValue"in e){const n=xo(e.doubleValue);isNaN(n)?this.Tt(t,13):(this.Tt(t,15),go(n)?t.Et(0):t.Et(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Tt(t,20),"string"==typeof n&&(n=Ro(n)),t.dt(`${n.seconds||""}`),t.Et(n.nanos||0)}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(Do(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Tt(t,45),t.Et(n.latitude||0),t.Et(n.longitude||0)}else"mapValue"in e?Xo(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):Ps()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const n=e.fields||{};this.Tt(t,55);for(const e of Object.keys(n))this.At(e,t),this.Pt(n[e],t)}yt(e,t){const n=e.values||[];this.Tt(t,50);for(const e of n)this.Pt(e,t)}ft(e,t){this.Tt(t,37),io.fromName(e).path.forEach((e=>{this.Tt(t,60),this.wt(e,t)}))}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}Rl.St=new Rl;class xl{constructor(){this.on=new Dl}addToCollectionParentIndex(e,t){return this.on.add(t),ho.resolve()}getCollectionParents(e,t){return ho.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return ho.resolve()}deleteFieldIndex(e,t){return ho.resolve()}deleteAllFieldIndexes(e){return ho.resolve()}createTargetIndexes(e,t){return ho.resolve()}getDocumentsMatchingTarget(e,t){return ho.resolve(null)}getIndexType(e,t){return ho.resolve(0)}getFieldIndexes(e,t){return ho.resolve([])}getNextCollectionGroupToUpdate(e){return ho.resolve(null)}getMinOffset(e,t){return ho.resolve(oo.min())}getMinOffsetFromCollectionGroup(e,t){return ho.resolve(oo.min())}updateCollectionGroup(e,t,n){return ho.resolve()}updateIndexEntries(e,t){return ho.resolve()}}class Dl{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Io(to.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Io(to.comparator)).toArray()}}new Uint8Array(0);class Nl{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Nl(e,Nl.DEFAULT_COLLECTION_PERCENTILE,Nl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Nl.DEFAULT_COLLECTION_PERCENTILE=10,Nl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nl.DEFAULT=new Nl(41943040,Nl.DEFAULT_COLLECTION_PERCENTILE,Nl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nl.DISABLED=new Nl(-1,0,0);class Ol{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new Ol(0)}static Nn(){return new Ol(-1)}}class Pl{constructor(){this.changes=new Va((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ea.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ho.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ll{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Ml{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&wc(n.mutation,e,Co.empty(),Ys.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Ja()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=Ja()){const r=Ha();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=qa();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Ha();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Ja())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Ba();const s=Ga(),o=Ga();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Ic)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),wc(o.mutation,t,o.mutation.getFieldMask(),Ys.now())):s.set(t.key,Co.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new Ll(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=Ga();let r=new bo(((e,t)=>e-t)),i=Ja();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Co.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Ja()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,l=Ka();c.forEach((e=>{if(!i.has(e)){const r=yc(t.get(e),n.get(e));null!==r&&l.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,l))}return ho.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return io.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):function(e){return null!==e.collectionGroup}(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):ho.resolve(Ha());let o=-1,a=i;return s.next((t=>ho.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?ho.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Ja()))).next((e=>({batchId:o,changes:$a(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new io(t)).next((e=>{let t=qa();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=qa();return this.indexManager.getCollectionParents(e,i).next((o=>ho.forEach(o,(o=>{const a=function(e,t){return new ka(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,ea.newInvalidDocument(r)))}));let n=qa();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&wc(s.mutation,r,Co.empty(),Ys.now()),Ma(t,r)&&(n=n.insert(e,r))})),n}))}}class Ul{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return ho.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,function(e){return{id:e.id,version:e.version,createTime:il(e.createTime)}}(t)),ho.resolve()}getNamedQuery(e,t){return ho.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,function(e){return{name:e.name,query:Al(e.bundledQuery),readTime:il(e.readTime)}}(t)),ho.resolve()}}class Fl{constructor(){this.overlays=new bo(io.comparator),this.lr=new Map}getOverlay(e,t){return ho.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Ha();return ho.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.lt(e,t,r)})),ho.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.lr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.lr.delete(n)),ho.resolve()}getOverlaysForCollection(e,t,n){const r=Ha(),i=t.length+1,s=new io(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return ho.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new bo(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Ha(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Ha(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return ho.resolve(o)}lt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.lr.get(r.largestBatchId).delete(n.key);this.lr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Dc(t,n));let i=this.lr.get(t);void 0===i&&(i=Ja(),this.lr.set(t,i)),this.lr.set(t,i.add(n.key))}}class Vl{constructor(){this.hr=new Io(jl.Pr),this.Ir=new Io(jl.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const n=new jl(e,t);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}Er(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.dr(new jl(e,t))}Ar(e,t){e.forEach((e=>this.removeReference(e,t)))}Rr(e){const t=new io(new to([])),n=new jl(t,e),r=new jl(t,e+1),i=[];return this.Ir.forEachInRange([n,r],(e=>{this.dr(e),i.push(e.key)})),i}Vr(){this.hr.forEach((e=>this.dr(e)))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new io(new to([])),n=new jl(t,e),r=new jl(t,e+1);let i=Ja();return this.Ir.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new jl(e,0),n=this.hr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class jl{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return io.comparator(e.key,t.key)||Js(e.gr,t.gr)}static Tr(e,t){return Js(e.gr,t.gr)||io.comparator(e.key,t.key)}}class Bl{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new Io(jl.Pr)}checkEmpty(e){return ho.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Rc(i,t,n,r);this.mutationQueue.push(s);for(const t of r)this.yr=this.yr.add(new jl(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return ho.resolve(s)}lookupMutationBatch(e,t){return ho.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Sr(n),i=r<0?0:r;return ho.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ho.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return ho.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new jl(t,0),r=new jl(t,Number.POSITIVE_INFINITY),i=[];return this.yr.forEachInRange([n,r],(e=>{const t=this.wr(e.gr);i.push(t)})),ho.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Io(Js);return t.forEach((e=>{const t=new jl(e,0),r=new jl(e,Number.POSITIVE_INFINITY);this.yr.forEachInRange([t,r],(e=>{n=n.add(e.gr)}))})),ho.resolve(this.br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;io.isDocumentKey(i)||(i=i.child(""));const s=new jl(new io(i),0);let o=new Io(Js);return this.yr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.gr)),!0)}),s),ho.resolve(this.br(o))}br(e){const t=[];return e.forEach((e=>{const n=this.wr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Ls(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.yr;return ho.forEach(t.mutations,(r=>{const i=new jl(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.yr=n}))}Fn(e){}containsKey(e,t){const n=new jl(t,0),r=this.yr.firstAfterOrEqual(n);return ho.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ho.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class zl{constructor(e){this.Cr=e,this.docs=new bo(io.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Cr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ho.resolve(n?n.document.mutableCopy():ea.newInvalidDocument(t))}getEntries(e,t){let n=Ba();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ea.newInvalidDocument(e))})),ho.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Ba();const s=t.path,o=new io(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||ao(so(o),n)<=0||(r.has(o.key)||Ma(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return ho.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Ps()}vr(e,t){return ho.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new ql(this)}getSize(e){return ho.resolve(this.size)}}class ql extends Pl{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this._r.addEntry(e,r)):this._r.removeEntry(n)})),ho.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class $l{constructor(e){this.persistence=e,this.Fr=new Va((e=>Ta(e)),Ca),this.lastRemoteSnapshotVersion=Zs.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Vl,this.targetCount=0,this.Nr=Ol.On()}forEachTarget(e,t){return this.Fr.forEach(((e,n)=>t(n))),ho.resolve()}getLastRemoteSnapshotVersion(e){return ho.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ho.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),ho.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Mr&&(this.Mr=t),ho.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new Ol(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,ho.resolve()}updateTargetData(e,t){return this.kn(t),ho.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,ho.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Fr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Fr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),ho.waitFor(i).next((()=>r))}getTargetCount(e){return ho.resolve(this.targetCount)}getTargetData(e,t){const n=this.Fr.get(t)||null;return ho.resolve(n)}addMatchingKeys(e,t,n){return this.Or.Er(t,n),ho.resolve()}removeMatchingKeys(e,t,n){this.Or.Ar(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),ho.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),ho.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Or.mr(t);return ho.resolve(n)}containsKey(e,t){return ho.resolve(this.Or.containsKey(t))}}class Hl{constructor(e,t){this.Lr={},this.overlays={},this.Br=new po(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new $l(this),this.indexManager=new xl,this.remoteDocumentCache=function(e){return new zl(e)}((e=>this.referenceDelegate.Qr(e))),this.serializer=new kl(t),this.Kr=new Ul(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Fl,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Lr[e.toKey()];return n||(n=new Bl(t,this.referenceDelegate),this.Lr[e.toKey()]=n),n}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,n){xs("MemoryPersistence","Starting transaction:",e);const r=new Kl(this.Br.next());return this.referenceDelegate.$r(),n(r).next((e=>this.referenceDelegate.Ur(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Wr(e,t){return ho.or(Object.values(this.Lr).map((n=>()=>n.containsKey(e,t))))}}class Kl extends lo{constructor(e){super(),this.currentSequenceNumber=e}}class Gl{constructor(e){this.persistence=e,this.Gr=new Vl,this.zr=null}static jr(e){return new Gl(e)}get Hr(){if(this.zr)return this.zr;throw Ps()}addReference(e,t,n){return this.Gr.addReference(n,t),this.Hr.delete(n.toString()),ho.resolve()}removeReference(e,t,n){return this.Gr.removeReference(n,t),this.Hr.add(n.toString()),ho.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),ho.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach((e=>this.Hr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Hr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ho.forEach(this.Hr,(n=>{const r=io.fromPath(n);return this.Jr(e,r).next((e=>{e||t.removeEntry(r,Zs.min())}))})).next((()=>(this.zr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Jr(e,t).next((e=>{e?this.Hr.delete(t.toString()):this.Hr.add(t.toString())}))}Qr(e){return 0}Jr(e,t){return ho.or([()=>ho.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class Wl{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ki=n,this.qi=r}static Qi(e,t){let n=Ja(),r=Ja();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:r=r.add(e.doc.key)}return new Wl(e,t.fromCache,n,r)}}class Ql{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Jl{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=!function(){var e;const t=null===(e=k())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}()&&navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")?8:function(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}(P())>0?6:4}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.zi(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ji(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Ql;return this.Hi(e,t,n).next((r=>{if(i.result=r,this.$i)return this.Ji(e,t,n,r.size)}))})).next((()=>i.result))}Ji(e,t,n,r){return n.documentReadCount<this.Ui?(Rs()<=se.DEBUG&&xs("QueryEngine","SDK will not create cache indexes for query:",La(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),ho.resolve()):(Rs()<=se.DEBUG&&xs("QueryEngine","Query:",La(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Wi*r?(Rs()<=se.DEBUG&&xs("QueryEngine","The SDK decides to create cache indexes for query:",La(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Da(t))):ho.resolve())}zi(e,t){if(Ra(t))return ho.resolve(null);let n=Da(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Na(t,null,"F"),n=Da(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Ja(...r);return this.Gi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Yi(t,r);return this.Zi(t,s,i,n.readTime)?this.zi(e,Na(t,null,"F")):this.Xi(e,s,t,n)}))))})))))}ji(e,t,n,r){return Ra(t)||r.isEqual(Zs.min())?ho.resolve(null):this.Gi.getDocuments(e,n).next((i=>{const s=this.Yi(t,i);return this.Zi(t,s,n,r)?ho.resolve(null):(Rs()<=se.DEBUG&&xs("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),La(t)),this.Xi(e,s,t,function(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Zs.fromTimestamp(1e9===r?new Ys(n+1,0):new Ys(n,r));return new oo(i,io.empty(),t)}(r,-1)).next((e=>e)))}))}Yi(e,t){let n=new Io(Ua(e));return t.forEach(((t,r)=>{Ma(e,r)&&(n=n.add(r))})),n}Zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Hi(e,t,n){return Rs()<=se.DEBUG&&xs("QueryEngine","Using full collection scan to execute query:",La(t)),this.Gi.getDocumentsMatchingQuery(e,t,oo.min(),n)}Xi(e,t,n,r){return this.Gi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Xl{constructor(e,t,n,r){this.persistence=e,this.es=t,this.serializer=r,this.ts=new bo(Js),this.ns=new Va((e=>Ta(e)),Ca),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(n)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ml(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ts)))}}async function Yl(e,t){const n=Ms(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.os(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=Ja();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({_s:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Zl(e){const t=Ms(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.qr.getLastRemoteSnapshotVersion(e)))}function eu(e,t){const n=Ms(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}async function tu(e,t,n){const r=Ms(e),i=r.ts.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!fo(e))throw e;xs("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.ts=r.ts.remove(t),r.ns.delete(i.target)}function nu(e,t,n){const r=Ms(e);let i=Zs.min(),s=Ja();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Ms(e),i=r.ns.get(n);return void 0!==i?ho.resolve(r.ts.get(i)):r.qr.getTargetData(t,n)}(r,e,Da(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.es.getDocumentsMatchingQuery(e,t,n?i:Zs.min(),n?s:Ja()))).next((e=>(function(e,t,n){let r=e.rs.get(t)||Zs.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.rs.set(t,r)}(r,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,ls:s})))))}class ru{constructor(){this.activeTargetIds=Xa}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class iu{constructor(){this.eo=new ru,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,n){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new ru,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class su{ro(e){}shutdown(){}}class ou{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){xs("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){xs("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let au=null;function cu(){return null===au?au=268435456+Math.round(2147483648*Math.random()):au++,"0x"+au.toString(16)}const lu={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class uu{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}Eo(e){this.Ao=e}onMessage(e){this.Ro=e}close(){this.lo()}send(e){this.co(e)}Vo(){this.Po()}mo(){this.To()}fo(e){this.Ao(e)}po(e){this.Ro(e)}}const hu="WebChannelConnection";class du extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.yo=t+"://"+e.host,this.wo=`projects/${n}/databases/${r}`,this.So="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get bo(){return!1}Do(e,t,n,r,i){const s=cu(),o=this.Co(e,t.toUriEncodedString());xs("RestConnection",`Sending RPC '${e}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.wo,"x-goog-request-params":this.So};return this.vo(a,r,i),this.Fo(e,o,a,n).then((t=>(xs("RestConnection",`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw Ns("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t}))}Mo(e,t,n,r,i,s){return this.Do(e,t,n,r,i)}vo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ks,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}Co(e,t){const n=lu[e];return`${this.yo}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Fo(e,t,n,r){const i=cu();return new Promise(((s,o)=>{const a=new Es;a.setWithCredentials(!0),a.listenOnce(ys.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case gs.NO_ERROR:const t=a.getResponseJson();xs(hu,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case gs.TIMEOUT:xs(hu,`RPC '${e}' ${i} timed out`),o(new Fs(Us.DEADLINE_EXCEEDED,"Request time out"));break;case gs.HTTP_ERROR:const n=a.getStatus();if(xs(hu,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Us).indexOf(t)>=0?t:Us.UNKNOWN}(t.status);o(new Fs(e,t.message))}else o(new Fs(Us.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Fs(Us.UNAVAILABLE,"Connection failed."));break;default:Ps()}}finally{xs(hu,`RPC '${e}' ${i} completed.`)}}));const c=JSON.stringify(r);xs(hu,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",c,n,15)}))}xo(e,t,n){const r=cu(),i=[this.yo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=ps(),o=ms(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.xmlHttpFactory=new bs({})),this.vo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const l=i.join("");xs(hu,`Creating RPC '${e}' stream ${r}: ${l}`,a);const u=s.createWebChannel(l,a);let h=!1,d=!1;const f=new uu({co:t=>{d?xs(hu,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(xs(hu,`Opening RPC '${e}' stream ${r} transport.`),u.open(),h=!0),xs(hu,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},lo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,_s.EventType.OPEN,(()=>{d||(xs(hu,`RPC '${e}' stream ${r} transport opened.`),f.Vo())})),p(u,_s.EventType.CLOSE,(()=>{d||(d=!0,xs(hu,`RPC '${e}' stream ${r} transport closed`),f.fo())})),p(u,_s.EventType.ERROR,(t=>{d||(d=!0,Ns(hu,`RPC '${e}' stream ${r} transport errored:`,t),f.fo(new Fs(Us.UNAVAILABLE,"The operation could not be completed")))})),p(u,_s.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Ls(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){xs(hu,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=Oc[e];if(void 0!==t)return Lc(t)}(t),i=o.message;void 0===n&&(n=Us.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.fo(new Fs(n,i)),u.close()}else xs(hu,`RPC '${e}' stream ${r} received:`,i),f.po(i)}})),p(o,vs.STAT_EVENT,(t=>{t.stat===ws.PROXY?xs(hu,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===ws.NOPROXY&&xs(hu,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.mo()}),0),f}}function fu(){return"undefined"!=typeof document?document:null}function pu(e){return new Zc(e,!0)}class mu{constructor(e,t,n=1e3,r=1.5,i=6e4){this.si=e,this.timerId=t,this.Oo=n,this.No=r,this.Lo=i,this.Bo=0,this.ko=null,this.qo=Date.now(),this.reset()}reset(){this.Bo=0}Qo(){this.Bo=this.Lo}Ko(e){this.cancel();const t=Math.floor(this.Bo+this.$o()),n=Math.max(0,Date.now()-this.qo),r=Math.max(0,t-n);r>0&&xs("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Bo} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.ko=this.si.enqueueAfterDelay(this.timerId,r,(()=>(this.qo=Date.now(),e()))),this.Bo*=this.No,this.Bo<this.Oo&&(this.Bo=this.Oo),this.Bo>this.Lo&&(this.Bo=this.Lo)}Uo(){null!==this.ko&&(this.ko.skipDelay(),this.ko=null)}cancel(){null!==this.ko&&(this.ko.cancel(),this.ko=null)}$o(){return(Math.random()-.5)*this.Bo}}class gu{constructor(e,t,n,r,i,s,o,a){this.si=e,this.Wo=n,this.Go=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.zo=0,this.jo=null,this.Ho=null,this.stream=null,this.Jo=new mu(e,t)}Yo(){return 1===this.state||5===this.state||this.Zo()}Zo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Xo()}async stop(){this.Yo()&&await this.close(0)}e_(){this.state=0,this.Jo.reset()}t_(){this.Zo()&&null===this.jo&&(this.jo=this.si.enqueueAfterDelay(this.Wo,6e4,(()=>this.n_())))}r_(e){this.i_(),this.stream.send(e)}async n_(){if(this.Zo())return this.close(0)}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}async close(e,t){this.i_(),this.s_(),this.Jo.cancel(),this.zo++,4!==e?this.Jo.reset():t&&t.code===Us.RESOURCE_EXHAUSTED?(Ds(t.toString()),Ds("Using maximum backoff delay to prevent overloading the backend."),this.Jo.Qo()):t&&t.code===Us.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.o_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Eo(t)}o_(){}auth(){this.state=1;const e=this.__(this.zo),t=this.zo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.zo===t&&this.a_(e,n)}),(t=>{e((()=>{const e=new Fs(Us.UNKNOWN,"Fetching auth token failed: "+t.message);return this.u_(e)}))}))}a_(e,t){const n=this.__(this.zo);this.stream=this.c_(e,t),this.stream.ho((()=>{n((()=>this.listener.ho()))})),this.stream.Io((()=>{n((()=>(this.state=2,this.Ho=this.si.enqueueAfterDelay(this.Go,1e4,(()=>(this.Zo()&&(this.state=3),Promise.resolve()))),this.listener.Io())))})),this.stream.Eo((e=>{n((()=>this.u_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Xo(){this.state=5,this.Jo.Ko((async()=>{this.state=0,this.start()}))}u_(e){return xs("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}__(e){return t=>{this.si.enqueueAndForget((()=>this.zo===e?t():(xs("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class yu extends gu{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}c_(e,t){return this.connection.xo("Listen",e,t)}onMessage(e){this.Jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ps()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Ls(void 0===t||"string"==typeof t),ko.fromBase64String(t||"")):(Ls(void 0===t||t instanceof Buffer||t instanceof Uint8Array),ko.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Us.UNKNOWN:Lc(e.code);return new Fs(t,e.message||"")}(o);n=new Hc(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=ll(e,r.document.name),s=il(r.document.updateTime),o=r.document.createTime?il(r.document.createTime):Zs.min(),a=new Yo({mapValue:{fields:r.document.fields}}),c=ea.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new qc(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=ll(e,r.document),s=r.readTime?il(r.readTime):Zs.min(),o=ea.newNoDocument(i,s),a=r.removedTargetIds||[];n=new qc([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=ll(e,r.document),s=r.removedTargetIds||[];n=new qc([],s,i,null)}else{if(!("filter"in t))return Ps();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Nc(r,i),o=e.targetId;n=new $c(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Zs.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Zs.min():t.readTime?il(t.readTime):Zs.min()}(e);return this.listener.l_(t,n)}h_(e){const t={};t.database=hl(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Sa(r)?{documents:pl(e,r)}:{query:ml(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=nl(e,t.resumeToken);const r=el(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Zs.min())>0){n.readTime=tl(e,t.snapshotVersion.toTimestamp());const r=el(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ps()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.r_(t)}P_(e){const t={};t.database=hl(this.serializer),t.removeTarget=e,this.r_(t)}}class vu extends gu{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.I_=!1}get T_(){return this.I_}start(){this.I_=!1,this.lastStreamToken=void 0,super.start()}o_(){this.I_&&this.E_([])}c_(e,t){return this.connection.xo("Write",e,t)}onMessage(e){if(Ls(!!e.streamToken),this.lastStreamToken=e.streamToken,this.I_){this.Jo.reset();const t=function(e,t){return e&&e.length>0?(Ls(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?il(e.updateTime):il(t);return n.isEqual(Zs.min())&&(n=il(t)),new fc(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=il(e.commitTime);return this.listener.d_(n,t)}return Ls(!e.writeResults||0===e.writeResults.length),this.I_=!0,this.listener.A_()}R_(){const e={};e.database=hl(this.serializer),this.r_(e)}E_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>function(e,t){let n;if(t instanceof Ec)n={update:fl(e,t.key,t.value)};else if(t instanceof kc)n={delete:cl(e,t.key)};else if(t instanceof Ic)n={update:fl(e,t.key,t.data),updateMask:Tl(t.fieldMask)};else{if(!(t instanceof Ac))return Ps();n={verify:cl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof sc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof oc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof cc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof uc)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw Ps()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:rl(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ps()}(e,t.precondition)),n}(this.serializer,e)))};this.r_(t)}}class wu extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.V_=!1}m_(){if(this.V_)throw new Fs(Us.FAILED_PRECONDITION,"The client has already been terminated.")}Do(e,t,n,r){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.connection.Do(e,ol(t,n),r,i,s))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Us.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Fs(Us.UNKNOWN,e.toString())}))}Mo(e,t,n,r,i){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.Mo(e,ol(t,n),r,s,o,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Us.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Fs(Us.UNKNOWN,e.toString())}))}terminate(){this.V_=!0,this.connection.terminate()}}class bu{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve()))))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Ds(t),this.y_=!1):xs("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class _u{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=i,this.O_.ro((e=>{n.enqueueAndForget((async()=>{xu(this)&&(xs("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Ms(e);t.M_.add(4),await Iu(t),t.N_.set("Unknown"),t.M_.delete(4),await Eu(t)}(this))}))})),this.N_=new bu(n,r)}}async function Eu(e){if(xu(e))for(const t of e.x_)await t(!0)}async function Iu(e){for(const t of e.x_)await t(!1)}function Tu(e,t){const n=Ms(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),Ru(n)?Au(n):Wu(n).Zo()&&Su(n,t))}function Cu(e,t){const n=Ms(e),r=Wu(n);n.F_.delete(t),r.Zo()&&ku(n,t),0===n.F_.size&&(r.Zo()?r.t_():xu(n)&&n.N_.set("Unknown"))}function Su(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Zs.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Wu(e).h_(t)}function ku(e,t){e.L_.xe(t),Wu(e).P_(t)}function Au(e){e.L_=new Gc({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Wu(e).start(),e.N_.w_()}function Ru(e){return xu(e)&&!Wu(e).Yo()&&e.F_.size>0}function xu(e){return 0===Ms(e).M_.size}function Du(e){e.L_=void 0}async function Nu(e){e.N_.set("Online")}async function Ou(e){e.F_.forEach(((t,n)=>{Su(e,t)}))}async function Pu(e,t){Du(e),Ru(e)?(e.N_.D_(t),Au(e)):e.N_.set("Unknown")}async function Lu(e,t,n){if(e.N_.set("Online"),t instanceof Hc&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.F_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.F_.delete(r),e.L_.removeTarget(r))}(e,t)}catch(n){xs("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Mu(e,n)}else if(t instanceof qc?e.L_.Ke(t):t instanceof $c?e.L_.He(t):e.L_.We(t),!n.isEqual(Zs.min()))try{const t=await Zl(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.L_.rt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.F_.get(r);i&&e.F_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.F_.get(t);if(!r)return;e.F_.set(t,r.withResumeToken(ko.EMPTY_BYTE_STRING,r.snapshotVersion)),ku(e,t);const i=new Sl(r.target,t,n,r.sequenceNumber);Su(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){xs("RemoteStore","Failed to raise snapshot:",t),await Mu(e,t)}}async function Mu(e,t,n){if(!fo(t))throw t;e.M_.add(1),await Iu(e),e.N_.set("Offline"),n||(n=()=>Zl(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{xs("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await Eu(e)}))}function Uu(e,t){return t().catch((n=>Mu(e,n,t)))}async function Fu(e){const t=Ms(e),n=Qu(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;Vu(t);)try{const e=await eu(t.localStore,r);if(null===e){0===t.v_.length&&n.t_();break}r=e.batchId,ju(t,e)}catch(e){await Mu(t,e)}Bu(t)&&zu(t)}function Vu(e){return xu(e)&&e.v_.length<10}function ju(e,t){e.v_.push(t);const n=Qu(e);n.Zo()&&n.T_&&n.E_(t.mutations)}function Bu(e){return xu(e)&&!Qu(e).Yo()&&e.v_.length>0}function zu(e){Qu(e).start()}async function qu(e){Qu(e).R_()}async function $u(e){const t=Qu(e);for(const n of e.v_)t.E_(n.mutations)}async function Hu(e,t,n){const r=e.v_.shift(),i=xc.from(r,t,n);await Uu(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Fu(e)}async function Ku(e,t){t&&Qu(e).T_&&await async function(e,t){if(function(e){return function(e){switch(e){default:return Ps();case Us.CANCELLED:case Us.UNKNOWN:case Us.DEADLINE_EXCEEDED:case Us.RESOURCE_EXHAUSTED:case Us.INTERNAL:case Us.UNAVAILABLE:case Us.UNAUTHENTICATED:return!1;case Us.INVALID_ARGUMENT:case Us.NOT_FOUND:case Us.ALREADY_EXISTS:case Us.PERMISSION_DENIED:case Us.FAILED_PRECONDITION:case Us.ABORTED:case Us.OUT_OF_RANGE:case Us.UNIMPLEMENTED:case Us.DATA_LOSS:return!0}}(e)&&e!==Us.ABORTED}(t.code)){const n=e.v_.shift();Qu(e).e_(),await Uu(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Fu(e)}}(e,t),Bu(e)&&zu(e)}async function Gu(e,t){const n=Ms(e);n.asyncQueue.verifyOperationInProgress(),xs("RemoteStore","RemoteStore received new credentials");const r=xu(n);n.M_.add(3),await Iu(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await Eu(n)}function Wu(e){return e.B_||(e.B_=function(e,t,n){const r=Ms(e);return r.m_(),new yu(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:Nu.bind(null,e),Io:Ou.bind(null,e),Eo:Pu.bind(null,e),l_:Lu.bind(null,e)}),e.x_.push((async t=>{t?(e.B_.e_(),Ru(e)?Au(e):e.N_.set("Unknown")):(await e.B_.stop(),Du(e))}))),e.B_}function Qu(e){return e.k_||(e.k_=function(e,t,n){const r=Ms(e);return r.m_(),new vu(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:()=>Promise.resolve(),Io:qu.bind(null,e),Eo:Ku.bind(null,e),A_:$u.bind(null,e),d_:Hu.bind(null,e)}),e.x_.push((async t=>{t?(e.k_.e_(),await Fu(e)):(await e.k_.stop(),e.v_.length>0&&(xs("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))}))),e.k_}class Ju{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Vs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Ju(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Fs(Us.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xu(e,t){if(Ds("AsyncQueue",`${t}: ${e}`),fo(e))return new Fs(Us.UNAVAILABLE,`${t}: ${e}`);throw e}class Yu{constructor(e){this.comparator=e?(t,n)=>e(t,n)||io.comparator(t.key,n.key):(e,t)=>io.comparator(e.key,t.key),this.keyedMap=qa(),this.sortedSet=new bo(this.comparator)}static emptySet(e){return new Yu(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yu))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Yu;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Zu{constructor(){this.q_=new bo(io.comparator)}track(e){const t=e.doc.key,n=this.q_.get(t);n?0!==e.type&&3===n.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==n.type?this.q_=this.q_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.q_=this.q_.remove(t):1===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):Ps():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class eh{constructor(e,t,n,r,i,s,o,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new eh(e,t,Yu.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Oa(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}}class th{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some((e=>e.G_()))}}class nh{constructor(){this.queries=new Va((e=>Pa(e)),Oa),this.onlineState="Unknown",this.z_=new Set}}function rh(e,t){const n=Ms(e);let r=!1;for(const e of t){const t=e.query,i=n.queries.get(t);if(i){for(const t of i.U_)t.H_(e)&&(r=!0);i.K_=e}}r&&sh(n)}function ih(e,t,n){const r=Ms(e),i=r.queries.get(t);if(i)for(const e of i.U_)e.onError(n);r.queries.delete(t)}function sh(e){e.z_.forEach((e=>{e.next()}))}var oh,ah;(ah=oh||(oh={})).J_="default",ah.Cache="cache";class ch{constructor(e,t,n){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new eh(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache)return!0;if(!this.G_())return!0;const n="Offline"!==t;return(!this.options.ra||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){if(e.docChanges.length>0)return!0;const t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}na(e){e=eh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==oh.Cache}}class lh{constructor(e){this.key=e}}class uh{constructor(e){this.key=e}}class hh{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Ja(),this.mutatedKeys=Ja(),this.Ia=Ua(e),this.Ta=new Yu(this.Ia)}get Ea(){return this.la}da(e,t){const n=t?t.Aa:new Zu,r=t?t.Ta:this.Ta;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const l=r.get(e),u=Ma(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.Ra(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Ia(u,a)>0||c&&this.Ia(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ta:s,Aa:n,Zi:o,mutatedKeys:i}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const s=e.Aa.Q_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ps()}};return n(e)-n(t)}(e.type,t.type)||this.Ia(e.doc,t.doc))),this.Va(n),r=null!=r&&r;const o=t&&!r?this.ma():[],a=0===this.Pa.size&&this.current&&!r?1:0,c=a!==this.ha;return this.ha=a,0!==s.length||c?{snapshot:new eh(this.query,e.Ta,i,s,e.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:o}:{fa:o}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Zu,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach((e=>this.la=this.la.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.la=this.la.delete(e))),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=Ja(),this.Ta.forEach((e=>{this.ga(e.key)&&(this.Pa=this.Pa.add(e.key))}));const t=[];return e.forEach((e=>{this.Pa.has(e)||t.push(new uh(e))})),this.Pa.forEach((n=>{e.has(n)||t.push(new lh(n))})),t}pa(e){this.la=e.ls,this.Pa=Ja();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return eh.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class dh{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class fh{constructor(e){this.key=e,this.wa=!1}}class ph{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new Va((e=>Pa(e)),Oa),this.Da=new Map,this.Ca=new Set,this.va=new bo(io.comparator),this.Fa=new Map,this.Ma=new Vl,this.xa={},this.Oa=new Map,this.Na=Ol.Nn(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}async function mh(e,t,n=!0){const r=Lh(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await yh(r,t,n,!0),i}async function gh(e,t){const n=Lh(e);await yh(n,t,!0,!1)}async function yh(e,t,n,r){const i=await function(e,t){const n=Ms(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.qr.getTargetData(e,t).next((i=>i?(r=i,ho.resolve(r)):n.qr.allocateTargetId(e).next((i=>(r=new Sl(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ts=n.ts.insert(e.targetId,e),n.ns.set(t,e.targetId)),e}))}(e.localStore,Da(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await async function(e,t,n,r,i){e.Ba=(t,n,r)=>async function(e,t,n,r){let i=t.view.da(n);i.Zi&&(i=await nu(e.localStore,t.query,!1).then((({documents:e})=>t.view.da(e,i))));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Rh(e,t.targetId,a.fa),a.snapshot}(e,t,n,r);const s=await nu(e.localStore,t,!0),o=new hh(t,s.ls),a=o.da(s.documents),c=zc.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),l=o.applyChanges(a,e.isPrimaryClient,c);Rh(e,n,l.fa);const u=new dh(t,n,o);return e.ba.set(t,u),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&Tu(e.remoteStore,i),a}async function vh(e,t,n){const r=Ms(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter((e=>!Oa(e,t)))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await tu(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Cu(r.remoteStore,i.targetId),kh(r,i.targetId)})).catch(uo)):(kh(r,i.targetId),await tu(r.localStore,i.targetId,!0))}async function wh(e,t){const n=Ms(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Cu(n.remoteStore,r.targetId))}async function bh(e,t){const n=Ms(e);try{const e=await function(e,t){const n=Ms(e),r=t.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const o=[];t.targetChanges.forEach(((s,a)=>{const c=i.get(a);if(!c)return;o.push(n.qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.qr.addMatchingKeys(e,s.addedDocuments,a))));let l=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?l=l.withResumeToken(ko.EMPTY_BYTE_STRING,Zs.min()).withLastLimboFreeSnapshotVersion(Zs.min()):s.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(s.resumeToken,r)),i=i.insert(a,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,s)&&o.push(n.qr.updateTargetData(e,l))}));let a=Ba(),c=Ja();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(function(e,t,n){let r=Ja(),i=Ja();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Ba();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Zs.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):xs("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{us:r,cs:i}}))}(e,s,t.documentUpdates).next((e=>{a=e.us,c=e.cs}))),!r.isEqual(Zs.min())){const t=n.qr.getLastRemoteSnapshotVersion(e).next((t=>n.qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return ho.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,c))).next((()=>a))})).then((e=>(n.ts=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Fa.get(t);r&&(Ls(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.wa=!0:e.modifiedDocuments.size>0?Ls(r.wa):e.removedDocuments.size>0&&(Ls(r.wa),r.wa=!1))})),await Nh(n,e,t)}catch(e){await uo(e)}}function _h(e,t,n){const r=Ms(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ba.forEach(((n,r)=>{const i=r.view.j_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Ms(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const e of n.U_)e.j_(t)&&(r=!0)})),r&&sh(n)}(r.eventManager,t),e.length&&r.Sa.l_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Eh(e,t,n){const r=Ms(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let e=new bo(io.comparator);e=e.insert(s,ea.newNoDocument(s,Zs.min()));const n=Ja().add(s),i=new Bc(Zs.min(),new Map,new bo(Js),e,n);await bh(r,i),r.va=r.va.remove(s),r.Fa.delete(t),Dh(r)}else await tu(r.localStore,t,!1).then((()=>kh(r,t,n))).catch(uo)}async function Ih(e,t){const n=Ms(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Ms(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.ss.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=ho.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Ls(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Ja();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Sh(n,r,null),Ch(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Nh(n,e)}catch(e){await uo(e)}}async function Th(e,t,n){const r=Ms(e);try{const e=await function(e,t){const n=Ms(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Ls(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Sh(r,t,n),Ch(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Nh(r,e)}catch(n){await uo(n)}}function Ch(e,t){(e.Oa.get(t)||[]).forEach((e=>{e.resolve()})),e.Oa.delete(t)}function Sh(e,t,n){const r=Ms(e);let i=r.xa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function kh(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Rr(t).forEach((t=>{e.Ma.containsKey(t)||Ah(e,t)}))}function Ah(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);null!==n&&(Cu(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),Dh(e))}function Rh(e,t,n){for(const r of n)r instanceof lh?(e.Ma.addReference(r.key,t),xh(e,r)):r instanceof uh?(xs("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||Ah(e,r.key)):Ps()}function xh(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(xs("SyncEngine","New document in limbo: "+n),e.Ca.add(r),Dh(e))}function Dh(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new io(to.fromString(t)),r=e.Na.next();e.Fa.set(r,new fh(n)),e.va=e.va.insert(n,r),Tu(e.remoteStore,new Sl(Da(Aa(n.path)),r,"TargetPurposeLimboResolution",po.oe))}}async function Nh(e,t,n){const r=Ms(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach(((e,a)=>{o.push(r.Ba(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Wl.Qi(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.Sa.l_(i),await async function(e,t){const n=Ms(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>ho.forEach(t,(t=>ho.forEach(t.ki,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>ho.forEach(t.qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!fo(e))throw e;xs("LocalStore","Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.ts.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.ts=n.ts.insert(t,i)}}}(r.localStore,s))}async function Oh(e,t){const n=Ms(e);if(!n.currentUser.isEqual(t)){xs("SyncEngine","User change. New user:",t.toKey());const e=await Yl(n.localStore,t);n.currentUser=t,function(e,t){e.Oa.forEach((e=>{e.forEach((e=>{e.reject(new Fs(Us.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Oa.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Nh(n,e._s)}}function Ph(e,t){const n=Ms(e),r=n.Fa.get(t);if(r&&r.wa)return Ja().add(r.key);{let e=Ja();const r=n.Da.get(t);if(!r)return e;for(const t of r){const r=n.ba.get(t);e=e.unionWith(r.view.Ea)}return e}}function Lh(e){const t=Ms(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=bh.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ph.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Eh.bind(null,t),t.Sa.l_=rh.bind(null,t.eventManager),t.Sa.ka=ih.bind(null,t.eventManager),t}function Mh(e){const t=Ms(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ih.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Th.bind(null,t),t}class Uh{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=pu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function(e,t,n,r){return new Xl(e,t,n,r)}(this.persistence,new Jl,e.initialUser,this.serializer)}createPersistence(e){return new Hl(Gl.jr,this.serializer)}createSharedClientState(e){return new iu}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Fh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>_h(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Oh.bind(null,this.syncEngine),await async function(e,t){const n=Ms(e);t?(n.M_.delete(2),await Eu(n)):t||(n.M_.add(2),await Iu(n),n.N_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new nh}createDatastore(e){const t=pu(e.databaseInfo.databaseId),n=function(e){return new du(e)}(e.databaseInfo);return function(e,t,n,r){return new wu(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new _u(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>_h(this.syncEngine,e,0)),ou.D()?new ou:new su)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new ph(e,t,n,r,i,s);return o&&(a.La=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=Ms(e);xs("RemoteStore","RemoteStore shutting down."),t.M_.add(5),await Iu(t),t.O_.shutdown(),t.N_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}class Vh{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Ds("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class jh{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ss.UNAUTHENTICATED,this.clientId=Qs.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{xs("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(xs("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Fs(Us.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Xu(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Bh(e,t){e.asyncQueue.verifyOperationInProgress(),xs("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Yl(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function zh(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){xs("FirestoreClient","Using user provided OfflineComponentProvider");try{await Bh(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Us.FAILED_PRECONDITION||e.code===Us.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Ns("Error using user provided cache. Falling back to memory cache: "+n),await Bh(e,new Uh)}}else xs("FirestoreClient","Using default OfflineComponentProvider"),await Bh(e,new Uh);return e._offlineComponents}(e);xs("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Gu(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Gu(t.remoteStore,n))),e._onlineComponents=t}async function qh(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(xs("FirestoreClient","Using user provided OnlineComponentProvider"),await zh(e,e._uninitializedComponentsProvider._online)):(xs("FirestoreClient","Using default OnlineComponentProvider"),await zh(e,new Fh))),e._onlineComponents}async function $h(e){const t=await qh(e),n=t.eventManager;return n.onListen=mh.bind(null,t.syncEngine),n.onUnlisten=vh.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=gh.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=wh.bind(null,t.syncEngine),n}function Hh(e,t,n={}){const r=new Vs;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Vh({next:n=>{t.enqueueAndForget((()=>async function(e,t){const n=Ms(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.U_.indexOf(t);e>=0&&(s.U_.splice(e,1),0===s.U_.length?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}(e,o))),n.fromCache&&"server"===r.source?i.reject(new Fs(Us.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new ch(n,s,{includeMetadataChanges:!0,ra:!0});return async function(e,t){const n=Ms(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new th,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Xu(e,`Initialization of query '${La(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&sh(n)}(e,o)}(await $h(e),e.asyncQueue,t,n,r))),r.promise}function Kh(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Gh=new Map;function Wh(e,t,n){if(!n)throw new Fs(Us.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Qh(e){if(!io.isDocumentKey(e))throw new Fs(Us.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Jh(e){if(io.isDocumentKey(e))throw new Fs(Us.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Xh(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Ps()}function Yh(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Fs(Us.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xh(e);throw new Fs(Us.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class Zh{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Fs(Us.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Fs(Us.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Fs(Us.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,e.experimentalForceLongPolling,0,e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Kh(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Fs(Us.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Fs(Us.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Fs(Us.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ed{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zh({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Fs(Us.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Fs(Us.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zh(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Bs;switch(e.type){case"firstParty":return new Hs(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Fs(Us.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Gh.get(e);t&&(xs("ComponentProvider","Removing Datastore"),Gh.delete(e),t.terminate())}(this),Promise.resolve()}}class td{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new td(this.firestore,e,this._query)}}class nd{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nd(this.firestore,e,this._key)}}class rd extends td{constructor(e,t,n){super(e,t,Aa(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nd(this.firestore,null,new io(e))}withConverter(e){return new rd(this.firestore,e,this._path)}}function id(e,t,...n){if(e=Z(e),Wh("collection","path",t),e instanceof ed){const r=to.fromString(t,...n);return Jh(r),new rd(e,null,r)}{if(!(e instanceof nd||e instanceof rd))throw new Fs(Us.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(to.fromString(t,...n));return Jh(r),new rd(e.firestore,null,r)}}class sd{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Jo=new mu(this,"async_queue_retry"),this.hu=()=>{const e=fu();e&&xs("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Jo.Uo()};const e=fu();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=fu();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise((()=>{}));const t=new Vs;return this.Iu((()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.su.push(e),this.Tu())))}async Tu(){if(0!==this.su.length){try{await this.su[0](),this.su.shift(),this.Jo.reset()}catch(e){if(!fo(e))throw e;xs("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Jo.Ko((()=>this.Tu()))}}Iu(e){const t=this.iu.then((()=>(this.uu=!0,e().catch((e=>{this.au=e,this.uu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ds("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.uu=!1,e))))));return this.iu=t,t}enqueueAfterDelay(e,t,n){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const r=Ju.createAndSchedule(this,e,t,n,(e=>this.Eu(e)));return this._u.push(r),r}Pu(){this.au&&Ps()}verifyOperationInProgress(){}async du(){let e;do{e=this.iu,await e}while(e!==this.iu)}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then((()=>{this._u.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()}))}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}class od extends ed{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new sd,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||cd(this),this._firestoreClient.terminate()}}function ad(e){return e._firestoreClient||cd(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function cd(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Lo(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Kh(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new jh(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}class ld{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ld(ko.fromBase64String(e))}catch(e){throw new Fs(Us.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new ld(ko.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ud{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Fs(Us.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ro(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class hd{constructor(e){this._methodName=e}}class dd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Fs(Us.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Fs(Us.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Js(this._lat,e._lat)||Js(this._long,e._long)}}const fd=/^__.*__$/;class pd{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Ic(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ec(e,this.data,t,this.fieldTransforms)}}function md(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ps()}}class gd{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.mu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new gd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.wu(e),r}Su(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return kd(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(md(this.fu)&&fd.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class yd{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||pu(e)}Fu(e,t,n,r=!1){return new gd({fu:e,methodName:t,vu:n,path:ro.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vd(e){const t=e._freezeSettings(),n=pu(e._databaseId);return new yd(e._databaseId,!!t.ignoreUndefinedProperties,n)}function wd(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);Id("Data must be an object, but it was:",o,r);const a=_d(r,o);let c,l;if(s.merge)c=new Co(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Td(t,r,n);if(!o.contains(i))throw new Fs(Us.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Ad(e,i)||e.push(i)}c=new Co(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new pd(new Yo(a),c,l)}function bd(e,t){if(Ed(e=Z(e)))return Id("Unsupported field value:",t,e),_d(e,t);if(e instanceof hd)return function(e,t){if(!md(t.fu))throw t.Du(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Du(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&4!==t.fu)throw t.Du("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=bd(i,t.bu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Z(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ec(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Ys.fromDate(e);return{timestampValue:tl(t.serializer,n)}}if(e instanceof Ys){const n=new Ys(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:tl(t.serializer,n)}}if(e instanceof dd)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof ld)return{bytesValue:nl(t.serializer,e._byteString)};if(e instanceof nd){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Du(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:sl(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Du(`Unsupported field value: ${Xh(e)}`)}(e,t)}function _d(e,t){const n={};return wo(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):vo(e,((e,r)=>{const i=bd(r,t.pu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Ed(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ys||e instanceof dd||e instanceof ld||e instanceof nd||e instanceof hd)}function Id(e,t,n){if(!Ed(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Xh(n);throw"an object"===r?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function Td(e,t,n){if((t=Z(t))instanceof ud)return t._internalPath;if("string"==typeof t)return Sd(e,t);throw kd("Field path arguments must be of type string or ",e,!1,void 0,n)}const Cd=new RegExp("[~\\*/\\[\\]]");function Sd(e,t,n){if(t.search(Cd)>=0)throw kd(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new ud(...t.split("."))._internalPath}catch(r){throw kd(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function kd(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Fs(Us.INVALID_ARGUMENT,a+e+c)}function Ad(e,t){return e.some((e=>e.isEqual(t)))}class Rd{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new nd(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new xd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Dd("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class xd extends Rd{data(){return super.data()}}function Dd(e,t){return"string"==typeof t?Sd(e,t):t instanceof ud?t._internalPath:t._delegate._internalPath}class Nd{convertValue(e,t="none"){switch(Fo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xo(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Do(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ps()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return vo(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new dd(xo(e.latitude),xo(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Oo(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Po(e));default:return null}}convertTimestamp(e){const t=Ro(e);return new Ys(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=to.fromString(e);Ls(Cl(n));const r=new Mo(n.get(1),n.get(3)),i=new io(n.popFirst(5));return r.isEqual(t)||Ds(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}class Od{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Pd extends Rd{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ld(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Dd("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Ld extends Pd{data(e={}){return super.data(e)}}class Md{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Od(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Ld(this._firestore,this._userDataWriter,n.key,n,new Od(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Fs(Us.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Ld(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Od(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Ld(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Od(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Ud(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Ud(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ps()}}class Fd extends Nd{constructor(e){super(),this.firestore=e}convertBytes(e){return new ld(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nd(this.firestore,null,t)}}function Vd(e){e=Yh(e,td);const t=Yh(e.firestore,od),n=ad(t),r=new Fd(t);return function(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Fs(Us.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(e._query),Hh(n,e._query).then((n=>new Md(t,r,e,n)))}function jd(e,t){return function(e,t){const n=new Vs;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Mh(e);try{const e=await function(e,t){const n=Ms(e),r=Ys.now(),i=t.reduce(((e,t)=>e.add(t.key)),Ja());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Ba(),c=Ja();return n.ss.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=bc(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Ic(e.key,t,Zo(t.value.mapValue),pc.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:$a(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.xa[e.currentUser.toKey()];r||(r=new bo(Js)),r=r.insert(t,n),e.xa[e.currentUser.toKey()]=r}(r,e.batchId,n),await Nh(r,e.changes),await Fu(r.remoteStore)}catch(e){const t=Xu(e,"Failed to persist write");n.reject(t)}}(await function(e){return qh(e).then((e=>e.syncEngine))}(e),t,n))),n.promise}(ad(e),t)}function Bd(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}new WeakMap,function(e,t=!0){!function(e){ks=e}(He),je(new ee("firestore",((e,{instanceIdentifier:n,options:r})=>{const i=e.getProvider("app").getImmediate(),s=new od(new qs(e.getProvider("auth-internal")),new Gs(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Fs(Us.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mo(e.options.projectId,t)}(i,n),i);return r=Object.assign({useFetchStreams:t},r),s._setSettings(r),s}),"PUBLIC").setMultipleInstances(!0)),We(Cs,"4.6.1",e),We(Cs,"4.6.1","esm2017")}(),Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;const zd=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},qd=new V("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),$d=new he("@firebase/auth");function Hd(e,...t){$d.logLevel<=se.ERROR&&$d.error(`Auth (${He}): ${e}`,...t)}function Kd(e,...t){throw Jd(e,...t)}function Gd(e,...t){return Jd(e,...t)}function Wd(e,t,n){const r=Object.assign(Object.assign({},zd()),{[t]:n});return new V("auth","Firebase",r).create(t,{appName:e.name})}function Qd(e){return Wd(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Jd(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return qd.create(e,...t)}function Xd(e,t,...n){if(!e)throw Jd(t,...n)}function Yd(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Hd(t),new Error(t)}function Zd(e,t){e||Yd(t)}function ef(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function tf(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class nf{constructor(e,t){this.shortDelay=e,this.longDelay=t,Zd(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(P())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===tf()||"https:"===tf()||L()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function rf(e,t){Zd(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class sf{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void Yd("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void Yd("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void Yd("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const of={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},af=new nf(3e4,6e4);function cf(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function lf(e,t,n,r,i={}){return uf(e,i,(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=q(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),sf.fetch()(df(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function uf(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},of),t);try{const t=new pf(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw mf(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw mf(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw mf(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw mf(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Wd(e,a,o);Kd(e,a)}}catch(t){if(t instanceof F)throw t;Kd(e,"network-request-failed",{message:String(t)})}}async function hf(e,t,n,r,i={}){const s=await lf(e,t,n,r,i);return"mfaPendingCredential"in s&&Kd(e,"multi-factor-auth-required",{_serverResponse:s}),s}function df(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?rf(e.config,i):`${e.config.apiScheme}://${i}`}function ff(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class pf{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Gd(this.auth,"network-request-failed"))),af.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function mf(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Gd(e,t,r);return i.customData._tokenResponse=n,i}function gf(e){return void 0!==e&&void 0!==e.enterprise}class yf{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ff(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function vf(e,t){return lf(e,"POST","/v1/accounts:lookup",t)}function wf(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function bf(e){return 1e3*Number(e)}function _f(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Hd("JWT malformed, contained fewer than 3 sections"),null;try{const e=S(n);return e?JSON.parse(e):(Hd("Failed to decode base64 JWT payload"),null)}catch(e){return Hd("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}function Ef(e){const t=_f(e);return Xd(t,"internal-error"),Xd(void 0!==t.exp,"internal-error"),Xd(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function If(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof F&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class Tf{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class Cf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=wf(this.lastLoginAt),this.creationTime=wf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Sf(e){var t;const n=e.auth,r=await e.getIdToken(),i=await If(e,vf(n,{idToken:r}));Xd(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?kf(s.providerUserInfo):[],a=(c=e.providerData,l=o,[...c.filter((e=>!l.some((t=>t.providerId===e.providerId)))),...l]);var c,l;const u=e.isAnonymous,h=!(e.email&&s.passwordHash||(null==a?void 0:a.length)),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Cf(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function kf(e){return e.map((e=>{var{providerId:t}=e,n=Bd(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class Af{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Xd(e.idToken,"internal-error"),Xd(void 0!==e.idToken,"internal-error"),Xd(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):Ef(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Xd(0!==e.length,"internal-error");const t=Ef(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(Xd(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await uf(e,{},(async()=>{const n=q({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=df(e,r,"/v1/token",`key=${i}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",sf.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Af;return n&&(Xd("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Xd("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Xd("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Af,this.toJSON())}_performRefresh(){return Yd("not implemented")}}function Rf(e,t){Xd("string"==typeof e||void 0===e,"internal-error",{appName:t})}class xf{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Bd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Tf(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Cf(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await If(this,this.stsTokenManager.getToken(this.auth,e));return Xd(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=Z(e),r=await n.getIdToken(t),i=_f(r);Xd(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:wf(bf(i.auth_time)),issuedAtTime:wf(bf(i.iat)),expirationTime:wf(bf(i.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Z(e);await Sf(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Xd(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new xf(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Xd(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Sf(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ze(this.auth.app))return Promise.reject(Qd(this.auth));const e=await this.getIdToken();return await If(this,async function(e,t){return lf(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,y=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:E}=t;Xd(v&&E,e,"internal-error");const I=Af.fromJSON(this.name,E);Xd("string"==typeof v,e,"internal-error"),Rf(u,e.name),Rf(h,e.name),Xd("boolean"==typeof w,e,"internal-error"),Xd("boolean"==typeof b,e,"internal-error"),Rf(d,e.name),Rf(f,e.name),Rf(p,e.name),Rf(m,e.name),Rf(g,e.name),Rf(y,e.name);const T=new xf({uid:v,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:I,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(T.providerData=_.map((e=>Object.assign({},e)))),m&&(T._redirectEventId=m),T}static async _fromIdTokenResponse(e,t,n=!1){const r=new Af;r.updateFromServerResponse(t);const i=new xf({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Sf(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Xd(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?kf(r.providerUserInfo):[],s=!(r.email&&r.passwordHash||(null==i?void 0:i.length)),o=new Af;o.updateFromIdToken(n);const a=new xf({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Cf(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash||(null==i?void 0:i.length))};return Object.assign(a,c),a}}const Df=new Map;function Nf(e){Zd(e instanceof Function,"Expected a class definition");let t=Df.get(e);return t?(Zd(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Df.set(e,t),t)}class Of{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Of.type="NONE";const Pf=Of;function Lf(e,t,n){return`firebase:${e}:${t}:${n}`}class Mf{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Lf(this.userKey,r.apiKey,i),this.fullPersistenceKey=Lf("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?xf._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Mf(Nf(Pf),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Nf(Pf);const s=Lf(n,e.config.apiKey,e.name);let o=null;for(const n of t)try{const t=await n._get(s);if(t){const r=xf._fromJSON(e,t);n!==i&&(o=r),i=n;break}}catch(e){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(e){}}))),new Mf(i,e,n)):new Mf(i,e,n)}}function Uf(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Bf(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ff(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(qf(t))return"Blackberry";if($f(t))return"Webos";if(Vf(t))return"Safari";if((t.includes("chrome/")||jf(t))&&!t.includes("edge/"))return"Chrome";if(zf(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function Ff(e=P()){return/firefox\//i.test(e)}function Vf(e=P()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function jf(e=P()){return/crios\//i.test(e)}function Bf(e=P()){return/iemobile/i.test(e)}function zf(e=P()){return/android/i.test(e)}function qf(e=P()){return/blackberry/i.test(e)}function $f(e=P()){return/webos/i.test(e)}function Hf(e=P()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Kf(e=P()){return Hf(e)||zf(e)||$f(e)||qf(e)||/windows phone/i.test(e)||Bf(e)}function Gf(e,t=[]){let n;switch(e){case"Browser":n=Uf(P());break;case"Worker":n=`${Uf(P())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${He}/${r}`}class Wf{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(e){r(e)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(const e of t)try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}}class Qf{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Jf{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yf(this),this.idTokenSubscription=new Yf(this),this.beforeStateQueue=new Wf(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qd,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Nf(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Mf.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await vf(this,{idToken:e}),n=await xf._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ze(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null==o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(e){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(e)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Xd(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Sf(e)}catch(e){if("auth/network-request-failed"!==(null==e?void 0:e.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ze(this.app))return Promise.reject(Qd(this));const t=e?Z(e):null;return t&&Xd(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Xd(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return ze(this.app)?Promise.reject(Qd(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ze(this.app)?Promise.reject(Qd(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(Nf(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e,t={}){return lf(e,"GET","/v2/passwordPolicy",cf(e,t))}(this),t=new Qf(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new V("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return lf(e,"POST","/v2/accounts:revokeToken",cf(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Nf(e)||this._popupRedirectResolver;Xd(t,this,"argument-error"),this.redirectPersistenceManager=await Mf.create(this,[Nf(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Xd(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"==typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Xd(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Gf(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){$d.logLevel<=se.WARN&&$d.warn(`Auth (${He}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function Xf(e){return Z(e)}class Yf{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new K(e,void 0);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return Xd(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Zf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ep(e){return Zf.loadJS(e)}function tp(e){return`__${e}${Math.floor(1e6*Math.random())}`}class np{constructor(e){this.type="recaptcha-enterprise",this.auth=Xf(e)}async verify(e="verify",t=!1){function n(t,n,r){const i=window.grecaptcha;gf(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{(async function(e,t){return lf(e,"GET","/v2/recaptchaConfig",cf(e,t))})(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new yf(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&gf(window.grecaptcha))n(i,e,r);else{if("undefined"==typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Zf.recaptchaEnterpriseScript;0!==t.length&&(t+=i),ep(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function rp(e,t,n,r=!1){const i=new np(e);let s;try{s=await i.verify(n)}catch(e){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function ip(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await rp(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await rp(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function sp(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function op(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class ap{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Yd("not implemented")}_getIdTokenResponse(e){return Yd("not implemented")}_linkToIdToken(e,t){return Yd("not implemented")}_getReauthenticationResolver(e){return Yd("not implemented")}}async function cp(e,t){return lf(e,"POST","/v1/accounts:signUp",t)}async function lp(e,t){return hf(e,"POST","/v1/accounts:signInWithPassword",cf(e,t))}class up extends ap{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new up(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new up(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return ip(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",lp);case"emailLink":return async function(e,t){return hf(e,"POST","/v1/accounts:signInWithEmailLink",cf(e,t))}(e,{email:this._email,oobCode:this._password});default:Kd(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ip(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",cp);case"emailLink":return async function(e,t){return hf(e,"POST","/v1/accounts:signInWithEmailLink",cf(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Kd(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function hp(e,t){return hf(e,"POST","/v1/accounts:signInWithIdp",cf(e,t))}class dp extends ap{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new dp(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Kd("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Bd(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new dp(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return hp(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,hp(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,hp(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=q(t)}return e}}const fp={USER_NOT_FOUND:"user-not-found"};class pp extends ap{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new pp({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new pp({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return hf(e,"POST","/v1/accounts:signInWithPhoneNumber",cf(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await hf(e,"POST","/v1/accounts:signInWithPhoneNumber",cf(e,t));if(n.temporaryProof)throw mf(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return hf(e,"POST","/v1/accounts:signInWithPhoneNumber",cf(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),fp)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new pp({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class mp{constructor(e){var t,n,r,i,s,o;const a=$(H(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Xd(c&&l&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=l,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=$(H(e)).link,n=t?$(H(t)).deep_link_id:null,r=$(H(e)).deep_link_id;return(r?$(H(r)).link:null)||r||n||t||e}(e);try{return new mp(t)}catch(e){return null}}}class gp{constructor(){this.providerId=gp.PROVIDER_ID}static credential(e,t){return up._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=mp.parseLink(t);return Xd(n,"argument-error"),up._fromEmailAndCode(e,n.code,n.tenantId)}}gp.PROVIDER_ID="password",gp.EMAIL_PASSWORD_SIGN_IN_METHOD="password",gp.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class yp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class vp extends yp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class wp extends vp{constructor(){super("facebook.com")}static credential(e){return dp._fromParams({providerId:wp.PROVIDER_ID,signInMethod:wp.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wp.credentialFromTaggedObject(e)}static credentialFromError(e){return wp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return wp.credential(e.oauthAccessToken)}catch(e){return null}}}wp.FACEBOOK_SIGN_IN_METHOD="facebook.com",wp.PROVIDER_ID="facebook.com";class bp extends vp{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return dp._fromParams({providerId:bp.PROVIDER_ID,signInMethod:bp.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return bp.credentialFromTaggedObject(e)}static credentialFromError(e){return bp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return bp.credential(t,n)}catch(e){return null}}}bp.GOOGLE_SIGN_IN_METHOD="google.com",bp.PROVIDER_ID="google.com";class _p extends vp{constructor(){super("github.com")}static credential(e){return dp._fromParams({providerId:_p.PROVIDER_ID,signInMethod:_p.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _p.credentialFromTaggedObject(e)}static credentialFromError(e){return _p.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return _p.credential(e.oauthAccessToken)}catch(e){return null}}}_p.GITHUB_SIGN_IN_METHOD="github.com",_p.PROVIDER_ID="github.com";class Ep extends vp{constructor(){super("twitter.com")}static credential(e,t){return dp._fromParams({providerId:Ep.PROVIDER_ID,signInMethod:Ep.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ep.credentialFromTaggedObject(e)}static credentialFromError(e){return Ep.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Ep.credential(t,n)}catch(e){return null}}}async function Ip(e,t){return hf(e,"POST","/v1/accounts:signUp",cf(e,t))}Ep.TWITTER_SIGN_IN_METHOD="twitter.com",Ep.PROVIDER_ID="twitter.com";class Tp{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await xf._fromIdTokenResponse(e,n,r),s=Cp(n);return new Tp({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Cp(n);return new Tp({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Cp(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Sp extends F{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Sp.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Sp(e,t,n,r)}}function kp(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Sp._fromErrorAndOperation(e,n,t,r);throw n}))}async function Ap(e,t,n=!1){if(ze(e.app))return Promise.reject(Qd(e));const r="signIn",i=await kp(e,r,t),s=await Tp._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Rp(e){const t=Xf(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function xp(e,t,n){return ze(e.app)?Promise.reject(Qd(e)):async function(e,t){return Ap(Xf(e),t)}(Z(e),gp.credential(t,n)).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Rp(e),t}))}new WeakMap;const Dp="__sak";class Np{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Dp,"1"),this.storage.removeItem(Dp),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Op extends Np{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=P();return Vf(e)||Hf(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Kf(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);!function(){const e=P();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()||10!==document.documentMode||i===e.newValue||e.newValue===e.oldValue?r():setTimeout(r,10)}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Op.type="LOCAL";const Pp=Op;class Lp extends Np{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Lp.type="SESSION";const Mp=Lp;class Up{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Up(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Fp(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}Up.receivers=[];class Vp{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const c=Fp("",20);r.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function jp(){return window}function Bp(){return void 0!==jp().WorkerGlobalScope&&"function"==typeof jp().importScripts}const zp="firebaseLocalStorageDb",qp="firebaseLocalStorage",$p="fbase_key";class Hp{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Kp(e,t){return e.transaction([qp],t?"readwrite":"readonly").objectStore(qp)}function Gp(){const e=indexedDB.open(zp,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(qp,{keyPath:$p})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(qp)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(zp);return new Hp(e).toPromise()}(),t(await Gp()))}))}))}async function Wp(e,t,n){const r=Kp(e,!0).put({[$p]:t,value:n});return new Hp(r).toPromise()}function Qp(e,t){const n=Kp(e,!0).delete(t);return new Hp(n).toPromise()}class Jp{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Gp()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Bp()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Up._getInstance(Bp()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Vp(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gp();return await Wp(e,Dp,"1"),await Qp(e,Dp),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Wp(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Kp(e,!1).get(t),r=await new Hp(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Qp(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Kp(e,!1).getAll();return new Hp(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Jp.type="LOCAL";const Xp=Jp;tp("rcb"),new nf(3e4,6e4);class Yp{constructor(e){this.providerId=Yp.PROVIDER_ID,this.auth=Xf(e)}verifyPhoneNumber(e,t){return async function(e,t,n){var r;const i=await n.verify();try{let s;if(Xd("string"==typeof i,e,"argument-error"),Xd("recaptcha"===n.type,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Xd("enroll"===t.type,e,"internal-error");const n=await function(e,t){return lf(e,"POST","/v2/accounts/mfaEnrollment:start",cf(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Xd("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Xd(n,e,"missing-multi-factor-info");const o=await function(e,t){return lf(e,"POST","/v2/accounts/mfaSignIn:start",cf(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return lf(e,"POST","/v1/accounts:sendVerificationCode",cf(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}(this.auth,e,Z(t))}static credential(e,t){return pp._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Yp.credentialFromTaggedObject(t)}static credentialFromError(e){return Yp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?pp._fromTokenResponse(t,n):null}}Yp.PROVIDER_ID="phone",Yp.PHONE_SIGN_IN_METHOD="phone";class Zp extends ap{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hp(e,this._buildIdpRequest())}_linkToIdToken(e,t){return hp(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return hp(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function em(e){return Ap(e.auth,new Zp(e),e.bypassAuthState)}function tm(e){const{auth:t,user:n}=e;return Xd(n,t,"internal-error"),async function(e,t,n=!1){const{auth:r}=e;if(ze(r.app))return Promise.reject(Qd(r));const i="reauthenticate";try{const s=await If(e,kp(r,i,t,e),n);Xd(s.idToken,r,"internal-error");const o=_f(s.idToken);Xd(o,r,"internal-error");const{sub:a}=o;return Xd(e.uid===a,r,"user-mismatch"),Tp._forOperation(e,i,s)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&Kd(r,"user-mismatch"),e}}(n,new Zp(e),e.bypassAuthState)}async function nm(e){const{auth:t,user:n}=e;return Xd(n,t,"internal-error"),async function(e,t,n=!1){const r=await If(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Tp._forOperation(e,"link",r)}(n,new Zp(e),e.bypassAuthState)}class rm{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return em;case"linkViaPopup":case"linkViaRedirect":return nm;case"reauthViaPopup":case"reauthViaRedirect":return tm;default:Kd(this.auth,"internal-error")}}resolve(e){Zd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const im=new nf(2e3,1e4);class sm extends rm{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,sm.currentPopupAction&&sm.currentPopupAction.cancel(),sm.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Xd(e,this.auth,"internal-error"),e}async onExecution(){Zd(1===this.filter.length,"Popup operations only handle one event");const e=Fp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Gd(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Gd(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sm.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Gd(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,im.get())};e()}}sm.currentPopupAction=null;const om="pendingRedirect",am=new Map;class cm extends rm{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=am.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return Lf(om,e.config.apiKey,e.name)}(t),r=function(e){return Nf(e._redirectPersistence)}(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}am.set(this.auth._key(),e)}return this.bypassAuthState||am.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function lm(e,t){am.set(e._key(),t)}async function um(e,t,n=!1){if(ze(e.app))return Promise.reject(Qd(e));const r=Xf(e),i=function(e,t){return t?Nf(t):(Xd(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(r,t),s=new cm(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class hm{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fm(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!fm(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Gd(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(dm(e))}saveEventToCache(e){this.cachedEventUids.add(dm(e)),this.lastProcessedEventTime=Date.now()}}function dm(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function fm({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}const pm=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mm=/^https?/;function gm(e){const t=ef(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!mm.test(n))return!1;if(pm.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const ym=new nf(3e4,6e4);function vm(){const e=jp().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}function wm(e){return new Promise(((t,n)=>{var r,i,s;function o(){vm(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{vm(),n(Gd(e,"network-request-failed"))},timeout:ym.get()})}if(null===(i=null===(r=jp().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=jp().gapi)||void 0===s?void 0:s.load)){const t=tp("iframefcb");return jp()[t]=()=>{gapi.load?o():n(Gd(e,"network-request-failed"))},ep(`${Zf.gapiScript}?onload=${t}`).catch((e=>n(e)))}o()}})).catch((e=>{throw bm=null,e}))}let bm=null;const _m=new nf(5e3,15e3),Em="__/auth/iframe",Im="emulator/auth/iframe",Tm={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Cm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Sm(e){const t=e.config;Xd(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?rf(t,Im):`https://${e.config.authDomain}/${Em}`,r={apiKey:t.apiKey,appName:e.name,v:He},i=Cm.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${q(r).slice(1)}`}const km={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Am{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}const Rm=encodeURIComponent("fac");async function xm(e,t,n,r,i,s){Xd(e.config.authDomain,e,"auth-domain-config-required"),Xd(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:He,eventId:i};if(t instanceof yp){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof vp){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const e of Object.keys(a))void 0===a[e]&&delete a[e];const c=await e._getAppCheckToken(),l=c?`#${Rm}=${encodeURIComponent(c)}`:"";return`${function({config:e}){return e.emulator?rf(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${q(a).slice(1)}${l}`}const Dm="webStorageSupport",Nm=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Mp,this._completeRedirectFn=um,this._overrideRedirectResult=lm}async _openPopup(e,t,n,r){var i;return Zd(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()"),function(e,t,n,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},km),{width:r.toString(),height:i.toString(),top:s,left:o}),l=P().toLowerCase();n&&(a=jf(l)?"_blank":n),Ff(l)&&(t=t||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=P()){var t;return Hf(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(l)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Am(null);const h=window.open(t||"",a,u);Xd(h,e,"popup-blocked");try{h.focus()}catch(e){}return new Am(h)}(e,await xm(e,t,n,ef(),r),Fp())}async _openRedirect(e,t,n,r){return await this._originValidation(e),i=await xm(e,t,n,ef(),r),jp().location.href=i,new Promise((()=>{}));var i}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Zd(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await function(e){return bm=bm||wm(e),bm}(e),n=jp().gapi;return Xd(n,e,"internal-error"),t.open({where:document.body,url:Sm(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Tm,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Gd(e,"network-request-failed"),s=jp().setTimeout((()=>{r(i)}),_m.get());function o(){jp().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}(e),n=new hm(e);return t.register("authEvent",(t=>(Xd(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Dm,{type:Dm},(n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[Dm];void 0!==i&&t(!!i),Kd(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return lf(e,"GET","/v1/projects",t)}(e);for(const e of t)try{if(gm(e))return}catch(e){}Kd(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Kf()||Vf()||Hf()}};var Om="@firebase/auth",Pm="1.7.2";class Lm{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Xd(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Mm=D("authIdTokenMaxAge")||300;let Um=null;function Fm(e=Ge()){const t=Be(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Be(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(B(n.getOptions(),null!=t?t:{}))return e;Kd(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Nm,persistence:[Xp,Pp,Mp]}),r=D("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Mm)return;const r=null==t?void 0:t.token;Um!==r&&(Um=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){Z(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,n,r,i){Z(e).onIdTokenChanged((e=>t(e)),void 0,void 0)}(n)}}var i;const s=A("auth");return s&&function(e,t,n){const r=Xf(e);Xd(r._canInitEmulator,r,"emulator-config-failed"),Xd(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),s=sp(t),{host:o,port:a}=function(e){const t=sp(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:op(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:op(t)}}}(t),c=null===a?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(n,`http://${s}`),n}var Vm;!function(e){Zf=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");var i,s;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Gd("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(s=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==s?s:document).appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),Vm="Browser",je(new ee("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=n.options;Xd(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const a={apiKey:s,authDomain:o,clientPlatform:Vm,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Gf(Vm)},c=new Jf(n,r,i,a);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Nf);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(c,t),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),je(new ee("auth-internal",(e=>{return t=Xf(e.getProvider("auth").getImmediate()),new Lm(t);var t}),"PRIVATE").setInstantiationMode("EXPLICIT")),We(Om,Pm,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Vm)),We(Om,Pm,"esm2017");const jm="@firebase/installations",Bm="0.6.6",zm=1e4,qm=`w:${Bm}`,$m="FIS_v2",Hm="https://firebaseinstallations.googleapis.com/v1",Km=36e5,Gm=new V("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Wm(e){return e instanceof F&&e.code.includes("request-failed")}function Qm({projectId:e}){return`${Hm}/projects/${e}/installations`}function Jm(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function Xm(e,t){const n=(await t.json()).error;return Gm.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Ym({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}async function Zm(e){const t=await e();return t.status>=500&&t.status<600?e():t}function eg(e){return new Promise((t=>{setTimeout(t,e)}))}const tg=/^[cdef][\w-]{21}$/,ng="";function rg(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){var t;return(t=e,btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22)}(e);return tg.test(t)?t:ng}catch(e){return ng}}function ig(e){return`${e.appName}!${e.appId}`}const sg=new Map;function og(e,t){const n=ig(e);ag(n,t),function(e,t){const n=(!cg&&"BroadcastChannel"in self&&(cg=new BroadcastChannel("[Firebase] FID Change"),cg.onmessage=e=>{ag(e.data.key,e.data.fid)}),cg);n&&n.postMessage({key:e,fid:t}),0===sg.size&&cg&&(cg.close(),cg=null)}(n,t)}function ag(e,t){const n=sg.get(e);if(n)for(const e of n)e(t)}let cg=null;const lg="firebase-installations-database",ug=1,hg="firebase-installations-store";let dg=null;function fg(){return dg||(dg=Te(lg,ug,{upgrade:(e,t)=>{0===t&&e.createObjectStore(hg)}})),dg}async function pg(e,t){const n=ig(e),r=(await fg()).transaction(hg,"readwrite"),i=r.objectStore(hg),s=await i.get(n);return await i.put(t,n),await r.done,s&&s.fid===t.fid||og(e,t.fid),t}async function mg(e){const t=ig(e),n=(await fg()).transaction(hg,"readwrite");await n.objectStore(hg).delete(t),await n.done}async function gg(e,t){const n=ig(e),r=(await fg()).transaction(hg,"readwrite"),i=r.objectStore(hg),s=await i.get(n),o=t(s);return void 0===o?await i.delete(n):await i.put(o,n),await r.done,!o||s&&s.fid===o.fid||og(e,o.fid),o}async function yg(e){let t;const n=await gg(e.appConfig,(n=>{const r=function(e){return bg(e||{fid:rg(),registrationStatus:0})}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(Gm.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=Qm(e),i=Ym(e),s=t.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const o={fid:n,authVersion:$m,appId:e.appId,sdkVersion:qm},a={method:"POST",headers:i,body:JSON.stringify(o)},c=await Zm((()=>fetch(r,a)));if(c.ok){const e=await c.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:Jm(e.authToken)}}throw await Xm("Create Installation",c)}(e,t);return pg(e.appConfig,n)}catch(n){throw Wm(n)&&409===n.customData.serverCode?await mg(e.appConfig):await pg(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:vg(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}));return n.fid===ng?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function vg(e){let t=await wg(e.appConfig);for(;1===t.registrationStatus;)await eg(100),t=await wg(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await yg(e);return n||t}return t}function wg(e){return gg(e,(e=>{if(!e)throw Gm.create("installation-not-found");return bg(e)}))}function bg(e){return 1===(t=e).registrationStatus&&t.registrationTime+zm<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function _g({appConfig:e,heartbeatServiceProvider:t},n){const r=function(e,{fid:t}){return`${Qm(e)}/${t}/authTokens:generate`}(e,n),i=function(e,{refreshToken:t}){const n=Ym(e);return n.append("Authorization",function(e){return`${$m} ${e}`}(t)),n}(e,n),s=t.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const o={installation:{sdkVersion:qm,appId:e.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},c=await Zm((()=>fetch(r,a)));if(c.ok)return Jm(await c.json());throw await Xm("Generate Auth Token",c)}async function Eg(e,t=!1){let n;const r=await gg(e.appConfig,(r=>{if(!Tg(r))throw Gm.create("not-registered");const i=r.authToken;if(!t&&(2===(s=i).requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Km}(s)))return r;var s;if(1===i.requestStatus)return n=async function(e,t){let n=await Ig(e.appConfig);for(;1===n.authToken.requestStatus;)await eg(100),n=await Ig(e.appConfig);const r=n.authToken;return 0===r.requestStatus?Eg(e,t):r}(e,t),r;{if(!navigator.onLine)throw Gm.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return n=async function(e,t){try{const n=await _g(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await pg(e.appConfig,r),n}catch(n){if(!Wm(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await pg(e.appConfig,n)}else await mg(e.appConfig);throw n}}(e,t),t}}));return n?await n:r.authToken}function Ig(e){return gg(e,(e=>{if(!Tg(e))throw Gm.create("not-registered");return 1===(t=e.authToken).requestStatus&&t.requestTime+zm<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var t}))}function Tg(e){return void 0!==e&&2===e.registrationStatus}function Cg(e){return Gm.create("missing-app-config-values",{valueName:e})}const Sg="installations";je(new ee(Sg,(e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Cg("App Configuration");if(!e.name)throw Cg("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Cg(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Be(t,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),je(new ee("installations-internal",(e=>{const t=Be(e.getProvider("app").getImmediate(),Sg).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await yg(t);return r?r.catch(console.error):Eg(t).catch(console.error),n.fid}(t),getToken:e=>async function(e,t=!1){const n=e;return await async function(e){const{registrationPromise:t}=await yg(e);t&&await t}(n),(await Eg(n,t)).token}(t,e)}}),"PRIVATE")),We(jm,Bm),We(jm,Bm,"esm2017");const kg="analytics",Ag="firebase_id",Rg="origin",xg=6e4,Dg="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ng="https://www.googletagmanager.com/gtag/js",Og=new he("@firebase/analytics"),Pg=new V("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Lg(e){if(!e.startsWith(Ng)){const t=Pg.create("invalid-gtag-resource",{gtagURL:e});return Og.warn(t.message),""}return e}function Mg(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}const Ug=30,Fg=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Vg(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function jg(e,t=Fg,n){const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw Pg.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Pg.create("no-api-key")}const o=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new zg;return setTimeout((async()=>{a.abort()}),void 0!==n?n:xg),Bg({appId:r,apiKey:i,measurementId:s},o,a,t)}async function Bg(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=Fg){var s;const{appId:o,measurementId:a}=e;try{await function(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(s),r(Pg.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(r,t)}catch(e){if(a)return Og.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==e?void 0:e.message}]`),{appId:o,measurementId:a};throw e}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:Vg(r)},s=Dg.replace("{app-id}",n),o=await fetch(s,i);if(200!==o.status&&304!==o.status){let e="";try{const n=await o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(e){}throw Pg.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}(e);return i.deleteThrottleMetadata(o),t}catch(t){const c=t;if(!function(e){if(!(e instanceof F&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(c)){if(i.deleteThrottleMetadata(o),a)return Og.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==c?void 0:c.message}]`),{appId:o,measurementId:a};throw t}const l=503===Number(null===(s=null==c?void 0:c.customData)||void 0===s?void 0:s.httpStatus)?Y(n,i.intervalMillis,Ug):Y(n,i.intervalMillis),u={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return i.setThrottleMetadata(o,u),Og.debug(`Calling attemptFetch again in ${l} millis`),Bg(e,u,r,i)}}class zg{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let qg,$g;async function Hg(e,t,n,r,i,s,o){var a;const c=jg(e);c.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&Og.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>Og.error(e))),t.push(c);const l=async function(){if(!M())return Og.warn(Pg.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await U()}catch(e){return Og.warn(Pg.create("indexeddb-unavailable",{errorInfo:null==e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[u,h]=await Promise.all([c,l]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(Ng)&&n.src.includes(e))return n;return null})(s)||function(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy("firebase-js-sdk-policy",t)),n}(0,{createScriptURL:Lg}),r=document.createElement("script"),i=`${Ng}?l=${e}&id=${t}`;r.src=n?null==n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(s,u.measurementId),$g&&(i("consent","default",$g),$g=void 0),i("js",new Date);const d=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return d[Rg]="firebase",d.update=!0,null!=h&&(d[Ag]=h),i("config",u.measurementId,d),qg&&(i("set",qg),qg=void 0),u.measurementId}class Kg{constructor(e){this.app=e}_delete(){return delete Gg[this.app.options.appId],Promise.resolve()}}let Gg={},Wg=[];const Qg={};let Jg,Xg,Yg="dataLayer",Zg=!1;function ey(e,t,n){!function(){const e=[];if(L()&&e.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=Pg.create("invalid-analytics-context",{errorInfo:t});Og.warn(n.message)}}();const r=e.options.appId;if(!r)throw Pg.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Pg.create("no-api-key");Og.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Gg[r])throw Pg.create("already-exists",{id:r});if(!Zg){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Yg);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(...e){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function(e,t,n,r){return async function(i,...s){try{if("event"===i){const[r,i]=s;await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await Mg(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch(e){Og.error(e)}}(e,t,n,r,i)}else if("config"===i){const[i,o]=s;await async function(e,t,n,r,i,s){const o=r[i];try{if(o)await t[o];else{const e=(await Mg(n)).find((e=>e.measurementId===i));e&&await t[e.appId]}}catch(e){Og.error(e)}e("config",i,s)}(e,t,n,r,i,o)}else if("consent"===i){const[t]=s;e("consent","update",t)}else if("get"===i){const[t,n,r]=s;e("get",t,n,r)}else if("set"===i){const[t]=s;e("set",t)}else e(i,...s)}catch(e){Og.error(e)}}}(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}(Gg,Wg,Qg,Yg,"gtag");Xg=e,Jg=t,Zg=!0}return Gg[r]=Hg(e,Wg,Qg,t,Jg,Yg,n),new Kg(e)}const ty="@firebase/analytics",ny="0.10.2";je(new ee(kg,((e,{options:t})=>ey(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t)),"PUBLIC")),je(new ee("analytics-internal",(function(e){try{const t=e.getProvider(kg).getImmediate();return{logEvent:(e,n,r)=>function(e,t,n,r){e=Z(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(Xg,Gg[e.app.options.appId],t,n,r).catch((e=>Og.error(e)))}(t,e,n,r)}}catch(e){throw Pg.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),We(ty,ny),We(ty,ny,"esm2017");const ry="firebasestorage.googleapis.com";class iy extends F{constructor(e,t,n=0){super(ay(e),`Firebase Storage: ${t} (${ay(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,iy.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ay(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var sy,oy;function ay(e){return"storage/"+e}function cy(e){return new iy(sy.INVALID_ARGUMENT,e)}function ly(){return new iy(sy.APP_DELETED,"The Firebase app was deleted.")}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(sy||(sy={}));class uy{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=uy.makeFromUrl(e,t)}catch(t){return new uy(e,"")}if(""===n.path)return n;throw r=e,new iy(sy.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${o}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp(`^https?://${t===ry?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let t=0;t<a.length;t++){const r=a[t],i=r.regex.exec(e);if(i){const e=i[r.indices.bucket];let t=i[r.indices.path];t||(t=""),n=new uy(e,t),r.postModify(n);break}}if(null==n)throw function(e){return new iy(sy.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class hy{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function dy(e,t,n,r){if(r<t)throw cy(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw cy(`Invalid value for '${e}'. Expected ${n} or less.`)}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(oy||(oy={}));class fy{constructor(e,t,n,r,i,s,o,a,c,l,u,h=!0){this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(e){r(e)}else if(null!==i){const e=new iy(sy.UNKNOWN,"An unknown error occurred, please check the error payload for server response.");e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else t.canceled?r(this.appDelete_?ly():new iy(sy.CANCELED,"User canceled the upload/download.")):r(new iy(sy.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))};this.canceled_?e(0,new py(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return 2===a}let l=!1;function u(...e){l||(l=!0,t.apply(null,e))}function h(t){i=setTimeout((()=>{i=null,e(f,c())}),t)}function d(){s&&clearTimeout(s)}function f(e,...t){if(l)return void d();if(e)return d(),void u.call(null,e,...t);if(c()||o)return d(),void u.call(null,e,...t);let n;r<64&&(r*=2),1===a?(a=2,n=0):n=1e3*(r+Math.random()),h(n)}let p=!1;function m(e){p||(p=!0,d(),l||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),s=setTimeout((()=>{o=!0,m(!0)}),n),m}(((e,t)=>{if(t)return void e(!1,new py(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===oy.NO_ERROR,i=n.getStatus();if(!t||function(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===oy.ABORT;return void e(!1,new py(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new py(s,n))}))}),e,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class py{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}class my{constructor(e,t){this._service=e,this._location=t instanceof uy?t:uy.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new my(e,t)}get root(){const e=new uy(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new uy(this._location.bucket,e);return new my(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new iy(sy.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function gy(e,t){const n=null==t?void 0:t.storageBucket;return null==n?null:uy.makeFromBucketSpec(n,e)}class yy{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=ry,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?uy.makeFromBucketSpec(r,this._host):gy(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=uy.makeFromBucketSpec(this._url,e):this._bucket=gy(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){dy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){dy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new my(this,e)}_makeRequest(e,t,n,r,i=!0){if(this._deleted)return new hy(ly());{const s=function(e,t,n,r,i,s,o=!0){const a=function(e){const t=encodeURIComponent;let n="?";for(const r in e)e.hasOwnProperty(r)&&(n=n+(t(r)+"=")+t(e[r])+"&");return n=n.slice(0,-1),n}(e.urlParams),c=e.url+a,l=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(l,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(l,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(l,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(l,r),new fy(c,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const vy="@firebase/storage",wy="0.12.4",by="storage";je(new ee(by,(function(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new yy(n,r,i,t,He)}),"PUBLIC").setMultipleInstances(!0)),We(vy,wy,""),We(vy,wy,"esm2017");var _y=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};const Ey=Ke({apiKey:"AIzaSyCU42uuS55TFRUWS2KJZzoQKjhTJT1Jciw",authDomain:"proyecto-final-c5690.firebaseapp.com",projectId:"proyecto-final-c5690",storageBucket:"proyecto-final-c5690.appspot.com",messagingSenderId:"183150005663",appId:"1:183150005663:web:791e23ff92190ffddf41aa",measurementId:"G-YKJ4DK3G23"}),Iy=function(e,t){const n="string"==typeof e?e:"(default)",r=Be("object"==typeof e?e:Ge(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=R("firestore");e&&function(e,t,n,r={}){var i;const s=(e=Yh(e,ed))._getSettings(),o=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Ns("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Ss.MOCK_USER;else{t=O(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Fs(Us.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ss(s)}e._authCredentials=new zs(new js(t,n))}}(r,...e)}return r}(Ey),Ty=(function(e=Ge()){const t=Be(e=Z(e),kg);t.isInitialized()?t.getImmediate():function(e,t={}){const n=Be(e,kg);if(n.isInitialized()){const e=n.getImmediate();if(B(t,n.getOptions()))return e;throw Pg.create("already-initialized")}n.initialize({options:t})}(e)}(Ey),function(e=Ge(),t){const n=Be(e=Z(e),by).getImmediate({identifier:t}),r=R("storage");r&&function(e,t,n,r={}){!function(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"==typeof i?i:O(i,e.app.options.projectId))}(e,t,n,r)}(n,...r)}(Ey),Fm(),(e,t,n)=>_y(void 0,void 0,void 0,(function*(){(async function(e,t,n){if(ze(e.app))return Promise.reject(Qd(e));const r=Xf(e),i=ip(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ip),s=await i.catch((t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Rp(e),t})),o=await Tp._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o})(Fm(),t,n).then((n=>{n.user,function(e,t,n){e=Yh(e,nd);const r=Yh(e.firestore,od),i=function(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}(e.converter,t,n);jd(r,[wd(vd(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,pc.none())])}(function(e,t,...n){if(e=Z(e),1===arguments.length&&(t=Qs.newId()),Wh("doc","path",t),e instanceof ed){const r=to.fromString(t,...n);return Qh(r),new nd(e,null,new io(r))}{if(!(e instanceof nd||e instanceof rd))throw new Fs(Us.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(to.fromString(t,...n));return Qh(r),new nd(e.firestore,e instanceof rd?e.converter:null,new io(r))}}(Iy,"users",e),{name:e,email:t})})).catch((e=>{console.error("Error al crear usuario:",e.code,e.message)}))}))),Cy=()=>_y(void 0,void 0,void 0,(function*(){const e=yield Vd(id(Iy,"main-ImgCard")),t=[];return e.forEach((e=>{const n=e.data();t.push(Object.assign({id:e.id},n))})),t}));const Sy={user:"",img:"",message:""},ky={caption:"",likes:"",publications:"",user:""};class Ay extends HTMLElement{constructor(){super(),this.tweets=[],this.post=[],this.dataIndex=0,this.attachShadow({mode:"open"})}connectedCallback(){this.render()}changecaption(e){ky.caption=e.target.value}changeMainuser(e){ky.user=e.target.value}changelikes(e){ky.likes=e.target.value}changepublications(e){ky.publications=e.target.value}changeimg(e){Sy.img=e.target.value}changeuser(e){Sy.user=e.target.value}changemessage(e){Sy.message=e.target.value}render(){var e,n,r,i,s;return function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){const o=document.createElement("style");o.textContent=t.Z,null===(e=this.shadowRoot)||void 0===e||e.appendChild(o);const a=this.ownerDocument.createElement("menu-card");a.setAttribute(h.user,"@a.miller"),null===(n=this.shadowRoot)||void 0===n||n.appendChild(a);const c=document.createElement("section");c.classList.add("general"),null===(r=this.shadowRoot)||void 0===r||r.appendChild(c);const l=this.ownerDocument.createElement("post-card");l.classList.add("PostCard"),l.setAttribute(g.user,"@a.miller"),l.setAttribute(g.comment,"Mix&Match"),l.setAttribute(g.img,"https://m.media-amazon.com/images/I/91LYRChMy-L._SX1248_CR0%2C0%2C1248%2C1248_.jpg"),c.appendChild(l),c.appendChild(l),l.addEventListener("click",(()=>{var e;const t=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector(".general"),n=this.ownerDocument.createElement("tweet-card");n.setAttribute(f.user,"@traveler_adventures"),n.setAttribute(f.message,"I go to the beach!"),n.setAttribute(f.img,"https://i.pinimg.com/564x/08/09/5a/08095a891a2c668646b10975e6ab561e.jpg"),null==t||t.appendChild(n);const r=this.ownerDocument.createElement("main-imgcard");r.setAttribute(w.user,"@fashionista_chic"),r.setAttribute(w.likes,"3000"),r.setAttribute(w.caption,"Sushi feast for dinner! 😋"),r.setAttribute(w.publication,"https://i.pinimg.com/736x/96/18/57/9618575d1e790be40cbd79785f905021.jpg"),null==t||t.appendChild(r)}));try{const e=yield _y(void 0,void 0,void 0,(function*(){const e=yield Vd(id(Iy,"Tweet")),t=[];return e.forEach((e=>{const n=e.data();t.push(Object.assign({id:e.id},n))})),t}));console.log(e);const t=yield Cy();console.log(t);const n=null===(i=this.shadowRoot)||void 0===i?void 0:i.querySelector(".general");for(let r=0;r<e.length;r++){const i=this.ownerDocument.createElement("tweet-card");i.setAttribute(f.img,e[r].img),i.setAttribute(f.user,e[r].user),i.setAttribute(f.message,e[r].message),null==n||n.appendChild(i);const s=this.ownerDocument.createElement("main-imgcard");s.setAttribute(w.caption,t[r].caption),s.setAttribute(w.user,t[r].user),s.setAttribute(w.likes,t[r].likes),s.setAttribute(w.publication,t[r].publications),null==n||n.appendChild(s)}}catch(e){console.error("Error al obtener datos de tweet:",e)}try{const e=yield Cy();console.log(e)}catch(e){console.error("Error al obtener datos de post:",e)}const u=document.createElement("menu-feed");null===(s=this.shadowRoot)||void 0===s||s.appendChild(u)}))}}customElements.define("main-feed",Ay);var Ry,xy=n(226),Dy=n(700);!function(e){e.user="user",e.name="name",e.description="description"}(Ry||(Ry={}));class Ny extends HTMLElement{static get observedAttributes(){return Object.values(Ry)}attributeChangedCallback(e,t,n){this.render()}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){if(this.shadowRoot){this.shadowRoot.innerHTML=`\n        <style>\n          ${Dy.Z}\n        </style>\n\n        <section class="container">\n          <img class="user" src="https://m.media-amazon.com/images/I/91LYRChMy-L._SX1248_CR0%2C0%2C1248%2C1248_.jpg"/>\n          <h1 class="user-profile">${this.name||"Default Name"}</h1>\n          <p class="user-at">@${this.user} - she / her</p>\n\n          <section class="container-secondline">\n            <a href="url" class="user-link">Facebook.laitana.com</a>\n            <p class="user-description">${this.description||""}</p>\n          </section>\n        </section>\n      `;const e=this.ownerDocument.createElement("div");e.classList.add("containerButton"),this.shadowRoot.appendChild(e);const t=this.ownerDocument.createElement("button");t.textContent="Edit Profile",t.classList.add("button-profile"),e.appendChild(t),t.addEventListener("click",(()=>{l(u(i.SETTINGS))}));const n=this.ownerDocument.createElement("button");n.textContent="Log out",n.classList.add("btn-logout"),e.appendChild(n),n.addEventListener("click",(()=>{l(u(i.LOGIN))}))}}}customElements.define("user-profile",Ny);var Oy,Py=n(890);!function(e){e.img="img",e.img1="img1",e.img2="img2"}(Oy||(Oy={}));class Ly extends HTMLElement{static get observedAttributes(){return Object.keys({img:null,img1:null,img2:null})}attributeChangedCallback(e,t,n){this[e]=n,this.render()}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){this.shadowRoot&&(this.shadowRoot.innerHTML=`\n          <style>\n            ${Py.Z}\n          </style>\n\n      <section class="grid-container">\n        <section class="photo-container"><img src="${this.img}"></section>\n        <section class="photo-container"><img src="${this.img1}"></section>\n        <section class="photo-container"><img src="${this.img2}"></section>\n      </section>\n          \n      `)}}customElements.define("profile-grid",Ly);const My={img:"",img1:"",img2:""};class Uy extends HTMLElement{constructor(){super(),this.message=[],this.attachShadow({mode:"open"})}connectedCallback(){this.render()}changeimg(e){My.img=e.target.value,My.img1=e.target.value,My.img2=e.target.value}render(){var e,t,n,r;return function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){this.shadowRoot&&(this.shadowRoot.innerHTML="");const i=document.createElement("style");i.textContent=xy.Z,null===(e=this.shadowRoot)||void 0===e||e.appendChild(i);const s=this.ownerDocument.createElement("menu-card");s.setAttribute(h.user,"@a.miller"),null===(t=this.shadowRoot)||void 0===t||t.appendChild(s);const o=this.ownerDocument.createElement("user-profile");o.setAttribute(Ry.user,"@a.miller"),null===(n=this.shadowRoot)||void 0===n||n.appendChild(o);const a=yield _y(void 0,void 0,void 0,(function*(){const e=yield Vd(id(Iy,"FeedGrid")),t=[];return e.forEach((e=>{const n=e.data();t.push(Object.assign({id:e.id},n))})),t})),c=document.createElement("div");c.classList.add("image-container"),null===(r=this.shadowRoot)||void 0===r||r.appendChild(c),a.forEach((e=>{console.log(e);const t=this.ownerDocument.createElement("profile-grid");t.setAttribute(Oy.img,e.img),t.setAttribute(Oy.img1,e.img1),t.setAttribute(Oy.img2,e.img2),c.appendChild(t)}))}))}}customElements.define("profile-screen",Uy);var Fy,Vy=n(689),jy=n(367);!function(e){e.user="user"}(Fy||(Fy={}));class By extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){this.shadowRoot&&(this.shadowRoot.innerHTML=`\n        <style>\n          ${jy.Z}\n        </style>\n\n        <h1>Create an Account</h1>\n\n        <form>\n          <label for="name">Your Name</label>\n          <input type="text" id="name" name="name" placeholder="First and last name" required><br><br>\n\n          <label for="email">Email</label>\n          <input type="email" id="email" name="email" placeholder="Enter your email" required><br><br>\n\n          <label for="password">Password</label>\n          <input type="password" id="password" name="password" placeholder="At least 6 characters" required><br><br>\n\n          <label for="reenter-password">Re-enter Password:</label>\n          <input type="password" id="reenter-password" name="reenter-password" placeholder="At least 6 characters" required><br><br>\n        </form>\n      `)}getNameInput(){var e;return null===(e=this.shadowRoot)||void 0===e?void 0:e.getElementById("name")}getEmailInput(){var e;return null===(e=this.shadowRoot)||void 0===e?void 0:e.getElementById("email")}getPasswordInput(){var e;return null===(e=this.shadowRoot)||void 0===e?void 0:e.getElementById("password")}getReenterPasswordInput(){var e;return null===(e=this.shadowRoot)||void 0===e?void 0:e.getElementById("reenter-password")}}customElements.define("create-form",By);var zy,qy=n(225);!function(e){e.user="user"}(zy||(zy={}));class $y extends HTMLElement{static get observedAttributes(){return Object.keys({user:null})}attributeChangedCallback(e,t,n){this[e]=n,this.render()}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){this.shadowRoot&&(this.shadowRoot.innerHTML=`\n      <style>\n        ${qy.Z}\n      </style>\n\n        <hr class="linea-blanca">\n        <section>\n            <p>© 2023 img, Inc. <a href="url" class="user-link">Mobile version</a></p>\n\n            <div class="left">\n                <p>Terms of Services</p>\n                <p>Privacy</p>\n                <p>Help</p>\n            </div>\n        </section>\n\n      `)}}customElements.define("lower-menu",$y);var Hy=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class Ky extends HTMLElement{constructor(){super(),this.createFormElement=null,this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var e,t,n,r,s;return Hy(this,void 0,void 0,(function*(){this.shadowRoot&&(this.shadowRoot.innerHTML="");const o=document.createElement("style");o.textContent=Vy.Z,null===(e=this.shadowRoot)||void 0===e||e.appendChild(o),this.createFormElement=this.ownerDocument.createElement("create-form"),this.createFormElement.setAttribute(Fy.user,"@a.miller"),null===(t=this.shadowRoot)||void 0===t||t.appendChild(this.createFormElement);const a=this.ownerDocument.createElement("button");a.innerText="Create Account",null===(n=this.shadowRoot)||void 0===n||n.appendChild(a),a.addEventListener("click",(()=>Hy(this,void 0,void 0,(function*(){if(this.createFormElement){const e=this.createFormElement.getNameInput(),t=this.createFormElement.getEmailInput(),n=this.createFormElement.getPasswordInput();if(this.createFormElement.getReenterPasswordInput(),e&&t&&n){const r=e.value,s=t.value,o=n.value;""!==s.trim()&&""!==r.trim()?(Ty(r,s,o),l(u(i.DASHBOARD)),console.log("Usuario registrado exitosamente")):alert("Por favor, ingrese datos válidos.")}else console.error("Error al obtener los inputs del formulario.")}}))));const c=this.ownerDocument.createElement("account-info");null===(r=this.shadowRoot)||void 0===r||r.appendChild(c);const h=this.ownerDocument.createElement("lower-menu");h.setAttribute(zy.user,"@a.miller"),null===(s=this.shadowRoot)||void 0===s||s.appendChild(h)}))}}customElements.define("create-account",Ky);var Gy,Wy=n(186);!function(e){e.user="user"}(Gy||(Gy={}));class Qy extends HTMLElement{static get observedAttributes(){return Object.keys({user:null})}attributeChangedCallback(e,t,n){this[e]=n,this.render()}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var e;if(this.shadowRoot){this.shadowRoot.innerHTML=`\n      <style>\n        ${Wy.Z}\n      </style>\n\n        <h1>\n            Account Settings\n        </h1>\n\n        <form>\n             \n        <div class="input-container">\n            <label for="name">Your Name</label>\n            <input type="text" id="name" name="name" placeholder="Amelia Miller">\n            <p class="input-description">\n              To help people discover your account, use the name people know you by, whether it's your full name, nickname, or business name. You can only change the name twice within a 14-day period.\n            </p>\n          </div>\n\n          <div class="input-container">\n            <label for="username">Username</label>\n            <input type="text" id="username" name="username" placeholder="amiller">\n            <p class="input-description">\n              In most cases, you will be able to change your username back to amiller for 14 more days.\n            </p>\n          </div>\n\n          <div class="input-container">\n            <label for="description">Description</label>\n            <input type="text" id="description" name="description" placeholder="Sun, sand, the sea, and me.">\n                </div>\n\n          <div class="input-container">\n            <label for="email">Email</label>\n            <input type="email" id="email" name="email" placeholder="amiller@gmail.com">\n          </div>\n\n          <div class="input-container">\n            <label for="phone">Cellphone Number</label>\n            <input class="phonenumber-input" type="text" id="phone" name="phone" placeholder="304 540 6396">\n          </div>\n\n          \n        </form>\n\n      `;const t=this.ownerDocument.createElement("div");t.classList.add("button-container");const n=this.ownerDocument.createElement("button");n.type="button",n.classList.add("change-password-button"),n.textContent="Change Password",t.appendChild(n),n.addEventListener("click",(()=>{l(u(i.PASSWORD))}));const r=this.ownerDocument.createElement("button");r.type="submit",r.classList.add("save-changes-button"),r.textContent="Save Changes",t.appendChild(r),r.addEventListener("click",(()=>{l(u(i.USER_PROFILE))}));const s=this.ownerDocument.createElement("button");s.type="button",s.classList.add("cancel-button"),s.textContent="Cancel",t.appendChild(s),s.addEventListener("click",(()=>{l(u(i.USER_PROFILE))})),null===(e=this.shadowRoot)||void 0===e||e.appendChild(t)}}}customElements.define("account-settings",Qy);class Jy extends HTMLElement{constructor(){super(),this.message=[],this.attachShadow({mode:"open"})}connectedCallback(){this.render(),console.log(this.message)}render(){var e,t;this.shadowRoot&&(this.shadowRoot.innerHTML="");const n=this.ownerDocument.createElement("account-settings");n.setAttribute(Gy.user,"@a.miller"),null===(e=this.shadowRoot)||void 0===e||e.appendChild(n);const r=this.ownerDocument.createElement("lower-menu");r.setAttribute(zy.user,"@a.miller"),null===(t=this.shadowRoot)||void 0===t||t.appendChild(r)}}customElements.define("settings-screen",Jy);var Xy,Yy=n(725);!function(e){e.user="user"}(Xy||(Xy={}));class Zy extends HTMLElement{static get observedAttributes(){return Object.keys({user:null})}attributeChangedCallback(e,t,n){this[e]=n,this.render()}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var e;if(this.shadowRoot){this.shadowRoot.innerHTML=`\n      <style>\n        ${Yy.Z}\n      </style>\n\n        <h1>\n            Change Password\n        </h1>\n\n        <form>\n             \n          <label for="password">New Password</label>\n          <input type="password" id="password" name="password" placeholder= "At least 6 characters" required><br><br>\n\n          <label for="reenter-password">Re-enter New Password</label>\n          <input type="password" id="reenter-password" name="reenter-password" placeholder= "At least 6 characters" required><br><br>\n\n        </form>\n      `;const t=this.ownerDocument.createElement("div");t.classList.add("button-container");const n=this.ownerDocument.createElement("button");n.type="button",n.classList.add("change-password-button"),n.textContent="Change Password",t.appendChild(n),n.addEventListener("click",(()=>{l(u(i.USER_PROFILE))}));const r=this.ownerDocument.createElement("button");r.type="button",r.classList.add("cancel-button"),r.textContent="Cancel",t.appendChild(r),r.addEventListener("click",(()=>{l(u(i.USER_PROFILE))})),null===(e=this.shadowRoot)||void 0===e||e.appendChild(t)}}}customElements.define("change-password",Zy);class ev extends HTMLElement{constructor(){super(),this.message=[],this.attachShadow({mode:"open"})}connectedCallback(){this.render(),console.log(this.message)}render(){var e,t;this.shadowRoot&&(this.shadowRoot.innerHTML="");const n=this.ownerDocument.createElement("change-password");n.setAttribute(Xy.user,"@a.miller"),null===(e=this.shadowRoot)||void 0===e||e.appendChild(n);const r=this.ownerDocument.createElement("lower-menu");r.setAttribute(zy.user,"@a.miller"),null===(t=this.shadowRoot)||void 0===t||t.appendChild(r)}}customElements.define("password-screen",ev);var tv=n(463);class nv extends HTMLElement{constructor(){super(),this.loginFormElement=null,this.attachShadow({mode:"open"})}connectedCallback(){this.render()}handleLoginButtonClick(){return function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){if(!this.loginFormElement)return void console.error("Error: LoginForm element not found.");const e=this.loginFormElement.getEmailInput(),t=this.loginFormElement.getPasswordInput();if(e&&t){const n=e.value.trim(),r=t.value;try{const e=yield((e,t)=>_y(void 0,void 0,void 0,(function*(){const n=Fm();xp(n,e,t);try{const r=(yield xp(n,e,t)).user;return console.log("se inicio sesion",r),r}catch(e){alert("correo electronico o contraseña invalidos, por favor intentalo de nuevo"),console.log("Error al iniciar sesión",e)}})))(n,r);e?l(u(i.DASHBOARD)):console.error("Error al obtener el usuario")}catch(e){console.error("Error al iniciar sesión:",e)}}else console.error("Error al obtener los inputs del formulario de inicio de sesión.")}))}handleSignUpLinkClick(){l(u(i.CREATEACCOUNT))}render(){if(this.shadowRoot){const e=document.createElement("style");e.textContent=tv.Z,this.shadowRoot.appendChild(e),this.loginFormElement=this.ownerDocument.createElement("login-form"),this.shadowRoot.appendChild(this.loginFormElement);const t=this.ownerDocument.createElement("div");t.classList.add("btn-container");const n=this.ownerDocument.createElement("button");n.classList.add("btnContinue"),n.textContent="Continue",n.addEventListener("click",(()=>this.handleLoginButtonClick())),t.appendChild(n),this.shadowRoot.appendChild(t);const r=this.ownerDocument.createElement("a");r.href="#",r.textContent="Sign Up",r.classList.add("user-link"),r.addEventListener("click",(()=>this.handleSignUpLinkClick()));const i=this.ownerDocument.createElement("p");i.textContent="Don't have an account ",i.appendChild(r);const s=this.ownerDocument.createElement("p");s.innerHTML='By creating an account, you agree to the Raw <a href="url" class="user-link">Terms of Service</a> and <a href="url" class="user-link">Privacy Policy</a>',this.shadowRoot.appendChild(s),this.shadowRoot.appendChild(i)}}}customElements.define("login-screen",nv);class rv extends HTMLElement{constructor(){var e;super(),this.attachShadow({mode:"open"}),e=this,c=[...c,e]}connectedCallback(){this.render()}render(){var e,t,n,r,s,o;if(this.shadowRoot)switch(this.shadowRoot.innerHTML="\n        <section></section>\n      ",console.log(a.screen),a.screen){case i.CREATEACCOUNT:const a=this.ownerDocument.createElement("create-account");null===(e=this.shadowRoot)||void 0===e||e.appendChild(a);break;case i.LOGIN:const c=this.ownerDocument.createElement("login-screen");null===(t=this.shadowRoot)||void 0===t||t.appendChild(c);break;case i.DASHBOARD:const l=this.ownerDocument.createElement("main-feed");null===(n=this.shadowRoot)||void 0===n||n.appendChild(l);break;case i.USER_PROFILE:const u=this.ownerDocument.createElement("profile-screen");null===(r=this.shadowRoot)||void 0===r||r.appendChild(u);break;case i.SETTINGS:const h=this.ownerDocument.createElement("settings-screen");null===(s=this.shadowRoot)||void 0===s||s.appendChild(h);break;case i.PASSWORD:const d=this.ownerDocument.createElement("password-screen");null===(o=this.shadowRoot)||void 0===o||o.appendChild(d)}}}customElements.define("app-container",rv)})()})();